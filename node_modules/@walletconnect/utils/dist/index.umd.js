(function(w,ft){typeof exports=="object"&&typeof module<"u"?ft(exports):typeof define=="function"&&define.amd?define(["exports"],ft):(w=typeof globalThis<"u"?globalThis:w||self,ft(w["@walletconnect/utils"]={}))})(this,function(w){"use strict";const ft=":";function ri(e){const[t,n]=e.split(ft);return{namespace:t,reference:n}}function Us(e){const{namespace:t,reference:n}=e;return[t,n].join(ft)}function ii(e){const[t,n,r]=e.split(ft);return{namespace:t,reference:n,address:r}}function Os(e){const{namespace:t,reference:n,address:r}=e;return[t,n,r].join(ft)}function oi(e,t){const n=[];return e.forEach(r=>{const i=t(r);n.includes(i)||n.push(i)}),n}function Cs(e){const{address:t}=ii(e);return t}function Ts(e){const{namespace:t,reference:n}=ii(e);return Us({namespace:t,reference:n})}function Ql(e,t){const{namespace:n,reference:r}=ri(t);return Os({namespace:n,reference:r,address:e})}function ed(e){return oi(e,Cs)}function Ns(e){return oi(e,Ts)}function td(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...i.accounts)}),n}function nd(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...Ns(i.accounts))}),n}function rd(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...ar(r,i))}),n}function ar(e,t){return e.includes(":")?[e]:t.chains||[]}var $s=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},id=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),od=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),sd=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),cd=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),ad=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),fd=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ud=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Rs=3,ld=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",fd]],Fs=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function dd(e){return e?Ps(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ad:typeof navigator<"u"?Ps(navigator.userAgent):bd()}function hd(e){return e!==""&&ld.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]},!1)}function Ps(e){var t=hd(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new cd;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<Rs&&(i=$s($s([],i,!0),pd(Rs-i.length),!0)):i=[];var o=i.join("."),s=gd(e),c=ud.exec(e);return c&&c[1]?new sd(n,o,s,c[1]):new id(n,o,s)}function gd(e){for(var t=0,n=Fs.length;t<n;t++){var r=Fs[t],i=r[0],o=r[1],s=o.exec(e);if(s)return i}return null}function bd(){var e=typeof process<"u"&&process.version;return e?new od(process.version.slice(1)):null}function pd(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}function wd(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Mt={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var si=function(e,t){return si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},si(e,t)};function yd(e,t){si(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ci=function(){return ci=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ci.apply(this,arguments)};function md(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Ed(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function xd(e,t){return function(n,r){t(n,r,e)}}function vd(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Dd(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{u(r.next(f))}catch(l){s(l)}}function a(f){try{u(r.throw(f))}catch(l){s(l)}}function u(f){f.done?o(f.value):i(f.value).then(c,a)}u((r=r.apply(e,t||[])).next())})}function Ad(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(u){return function(f){return a([u,f])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Bd(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function Sd(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ai(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ls(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function _d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ls(arguments[t]));return e}function Id(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,c=o.length;s<c;s++,i++)r[i]=o[s];return r}function yn(e){return this instanceof yn?(this.v=e,this):new yn(e)}function Ud(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(b){return new Promise(function(h,g){o.push([d,b,h,g])>1||c(d,b)})})}function c(d,b){try{a(r[d](b))}catch(h){l(o[0][3],h)}}function a(d){d.value instanceof yn?Promise.resolve(d.value.v).then(u,f):l(o[0][2],d)}function u(d){c("next",d)}function f(d){c("throw",d)}function l(d,b){d(b),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Od(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(s){return(n=!n)?{value:yn(e[i](s)),done:i==="return"}:o?o(s):s}:o}}function Cd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ai=="function"?ai(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(c,a){s=e[o](s),i(c,a,s.done,s.value)})}}function i(o,s,c,a){Promise.resolve(a).then(function(u){o({value:u,done:c})},s)}}function Td(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Nd(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function $d(e){return e&&e.__esModule?e:{default:e}}function Rd(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Fd(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}var Pd=Object.freeze({__proto__:null,__extends:yd,get __assign(){return ci},__rest:md,__decorate:Ed,__param:xd,__metadata:vd,__awaiter:Dd,__generator:Ad,__createBinding:Bd,__exportStar:Sd,__values:ai,__read:Ls,__spread:_d,__spreadArrays:Id,__await:yn,__asyncGenerator:Ud,__asyncDelegator:Od,__asyncValues:Cd,__makeTemplateObject:Td,__importStar:Nd,__importDefault:$d,__classPrivateFieldGet:Rd,__classPrivateFieldSet:Fd}),fr=wd(Pd),fi={},mn={},ks;function Ld(){if(ks)return mn;ks=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return mn.delay=e,mn}var zt={},ui={},Ht={},Ms;function kd(){return Ms||(Ms=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.ONE_THOUSAND=Ht.ONE_HUNDRED=void 0,Ht.ONE_HUNDRED=100,Ht.ONE_THOUSAND=1e3),Ht}var li={},zs;function Md(){return zs||(zs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(li)),li}var Hs;function js(){return Hs||(Hs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=fr;t.__exportStar(kd(),e),t.__exportStar(Md(),e)}(ui)),ui}var Vs;function zd(){if(Vs)return zt;Vs=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.fromMiliseconds=zt.toMiliseconds=void 0;const e=js();function t(r){return r*e.ONE_THOUSAND}zt.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return zt.fromMiliseconds=n,zt}var qs;function Hd(){return qs||(qs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=fr;t.__exportStar(Ld(),e),t.__exportStar(zd(),e)}(fi)),fi}var tn={},Ks;function jd(){if(Ks)return tn;Ks=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return tn.Watch=e,tn.default=e,tn}var di={},En={},Ws;function Vd(){if(Ws)return En;Ws=1,Object.defineProperty(En,"__esModule",{value:!0}),En.IWatch=void 0;class e{}return En.IWatch=e,En}var Zs;function qd(){return Zs||(Zs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),fr.__exportStar(Vd(),e)}(di)),di}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=fr;t.__exportStar(Hd(),e),t.__exportStar(jd(),e),t.__exportStar(qd(),e),t.__exportStar(js(),e)})(Mt);var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getLocalStorage=Q.getLocalStorageOrThrow=Q.getCrypto=Q.getCryptoOrThrow=gi=Q.getLocation=Q.getLocationOrThrow=hi=Q.getNavigator=Q.getNavigatorOrThrow=rn=Q.getDocument=Q.getDocumentOrThrow=Q.getFromWindowOrThrow=Q.getFromWindow=void 0;function jt(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Q.getFromWindow=jt;function nn(e){const t=jt(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Q.getFromWindowOrThrow=nn;function Kd(){return nn("document")}Q.getDocumentOrThrow=Kd;function Wd(){return jt("document")}var rn=Q.getDocument=Wd;function Zd(){return nn("navigator")}Q.getNavigatorOrThrow=Zd;function Gd(){return jt("navigator")}var hi=Q.getNavigator=Gd;function Yd(){return nn("location")}Q.getLocationOrThrow=Yd;function Xd(){return jt("location")}var gi=Q.getLocation=Xd;function Jd(){return nn("crypto")}Q.getCryptoOrThrow=Jd;function Qd(){return jt("crypto")}Q.getCrypto=Qd;function eh(){return nn("localStorage")}Q.getLocalStorageOrThrow=eh;function th(){return jt("localStorage")}Q.getLocalStorage=th;var bi={};Object.defineProperty(bi,"__esModule",{value:!0});var Gs=bi.getWindowMetadata=void 0;const Ys=Q;function nh(){let e,t;try{e=Ys.getDocumentOrThrow(),t=Ys.getLocationOrThrow()}catch{return null}function n(){const l=e.getElementsByTagName("link"),d=[];for(let b=0;b<l.length;b++){const h=l[b],g=h.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const E=h.getAttribute("href");if(E)if(E.toLowerCase().indexOf("https:")===-1&&E.toLowerCase().indexOf("http:")===-1&&E.indexOf("//")!==0){let U=t.protocol+"//"+t.host;if(E.indexOf("/")===0)U+=E;else{const P=t.pathname.split("/");P.pop();const x=P.join("/");U+=x+"/"+E}d.push(U)}else if(E.indexOf("//")===0){const U=t.protocol+E;d.push(U)}else d.push(E)}}return d}function r(...l){const d=e.getElementsByTagName("meta");for(let b=0;b<d.length;b++){const h=d[b],g=["itemprop","property","name"].map(E=>h.getAttribute(E)).filter(E=>E?l.includes(E):!1);if(g.length&&g){const E=h.getAttribute("content");if(E)return E}}return""}function i(){let l=r("name","og:site_name","og:title","twitter:title");return l||(l=e.title),l}function o(){return r("description","og:description","twitter:description","keywords")}const s=i(),c=o(),a=t.origin,u=n();return{description:c,url:a,icons:u,name:s}}Gs=bi.getWindowMetadata=nh;var rh=Object.defineProperty,ih=Object.defineProperties,oh=Object.getOwnPropertyDescriptors,Xs=Object.getOwnPropertySymbols,sh=Object.prototype.hasOwnProperty,ch=Object.prototype.propertyIsEnumerable,pi=(e,t,n)=>t in e?rh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Js=(e,t)=>{for(var n in t||(t={}))sh.call(t,n)&&pi(e,n,t[n]);if(Xs)for(var n of Xs(t))ch.call(t,n)&&pi(e,n,t[n]);return e},ah=(e,t)=>ih(e,oh(t)),Qs=(e,t,n)=>pi(e,typeof t!="symbol"?t+"":t,n);const ec="ReactNative",we={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ur=" ",fh=":",tc="/",wi=2,uh=1e3,nc="js";function yi(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ut(){return!rn()&&!!hi()&&navigator.product===ec}function lh(){return ut()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function dh(){return ut()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function on(){return!yi()&&!!hi()&&!!rn()}function Vt(){return ut()?we.reactNative:yi()?we.node:on()?we.browser:we.unknown}function hh(){var e;try{return ut()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function rc(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const i=t[r];i!==void 0&&n.set(r,i)}return n.toString()}function gh(e){var t,n;const r=ic();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),ah(Js(Js({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),e||r}}function ic(){return Gs()||{name:"",description:"",url:"",icons:[""]}}function bh(e,t){var n;const r=Vt(),i={protocol:e,version:t,env:r};return r==="browser"&&(i.host=((n=gi())==null?void 0:n.host)||"unknown"),i}function oc(){if(Vt()===we.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=dd();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function sc(){var e;const t=Vt();return t===we.browser?[t,((e=gi())==null?void 0:e.host)||"unknown"].join(":"):t}function cc(e,t,n){const r=oc(),i=sc();return[[e,t].join("-"),[nc,n].join("-"),r,i].join("/")}function ph({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:o,useOnCloseEvent:s,bundleId:c,packageName:a}){const u=n.split("?"),f=cc(e,t,r),l={auth:i,ua:f,projectId:o,useOnCloseEvent:s||void 0,packageName:a||void 0,bundleId:c||void 0},d=rc(u[1]||"",l);return u[0]+"?"+d}function wh(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,n].join("://")}function yh(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function ac(e,t=wi){return fc(e.split(tc),t)}function mh(e){return ac(e).join(ur)}function lt(e,t){return e.filter(n=>t.includes(n)).length===e.length}function fc(e,t=wi){return e.slice(Math.max(e.length-t,0))}function Eh(e){return Object.fromEntries(e.entries())}function xh(e){return new Map(Object.entries(e))}function vh(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r])}),n}const Dh=e=>e;function uc(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function Ah(e){return e.split(ur).map(t=>uc(t)).join(ur)}function Bh(e=Mt.FIVE_MINUTES,t){const n=Mt.toMiliseconds(e||Mt.FIVE_MINUTES);let r,i,o,s;return{resolve:c=>{o&&r&&(clearTimeout(o),r(c),s=Promise.resolve(c))},reject:c=>{o&&i&&(clearTimeout(o),i(c))},done:()=>new Promise((c,a)=>{if(s)return c(s);o=setTimeout(()=>{const u=new Error(t);s=Promise.reject(u),a(u)},n),r=c,i=a})}}function Sh(e,t,n){return new Promise(async(r,i)=>{const o=setTimeout(()=>i(new Error(n)),t);try{const s=await e;r(s)}catch(s){i(s)}clearTimeout(o)})}function mi(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function _h(e){return mi("topic",e)}function Ih(e){return mi("id",e)}function Uh(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function Oh(e,t){return Mt.fromMiliseconds((t||Date.now())+Mt.toMiliseconds(e))}function Ch(e){return Date.now()>=Mt.toMiliseconds(e)}function Th(e,t){return`${e}${t?`:${t}`:""}`}function Ne(e=[],t=[]){return[...new Set([...e,...t])]}async function Nh({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,o=i?.href;if(typeof o!="string")return;const s=lc(o,e,t),c=Vt();if(c===we.browser){if(!((r=rn())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}dc(s)}else c===we.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(i){console.error(i)}}function lc(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const o=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${o}${bc(r,!0)}`}else i=`${i}/wc?${r}`;return i}function dc(e){let t="_self";gc()?t="_top":(hc()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function $h(e,t){let n="";try{if(on()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function Ei(e,t){return e.filter(n=>t.includes(n))}function Rh(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function Fh(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function Ph(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function hc(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function gc(){try{return window.self!==window.top}catch{return!1}}function bc(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function xi(e){return Buffer.from(e,"base64").toString("utf-8")}function Lh(e){return new Promise(t=>setTimeout(t,e))}class kh{constructor({limit:t}){Qs(this,"limit"),Qs(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}}const lr=BigInt(2**32-1),pc=BigInt(32);function wc(e,t=!1){return t?{h:Number(e&lr),l:Number(e>>pc&lr)}:{h:Number(e>>pc&lr)|0,l:Number(e&lr)|0}}function yc(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let o=0;o<n;o++){const{h:s,l:c}=wc(e[o],t);[r[o],i[o]]=[s,c]}return[r,i]}const mc=(e,t,n)=>e>>>n,Ec=(e,t,n)=>e<<32-n|t>>>n,dt=(e,t,n)=>e>>>n|t<<32-n,ht=(e,t,n)=>e<<32-n|t>>>n,xn=(e,t,n)=>e<<64-n|t>>>n-32,vn=(e,t,n)=>e>>>n-32|t<<64-n,Mh=(e,t)=>t,zh=(e,t)=>e,Hh=(e,t,n)=>e<<n|t>>>32-n,jh=(e,t,n)=>t<<n|e>>>32-n,Vh=(e,t,n)=>t<<n-32|e>>>64-n,qh=(e,t,n)=>e<<n-32|t>>>64-n;function ze(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const vi=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Di=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Kh=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Wh=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,Zh=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Gh=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,sn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Ai(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ke(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function $e(e,...t){if(!Ai(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Bi(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ke(e.outputLen),Ke(e.blockLen)}function gt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Si(e,t){$e(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Dn(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Re(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function _i(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function We(e,t){return e<<32-t|e>>>t}const xc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function vc(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const Qe=xc?e=>e:e=>vc(e);function Yh(e){for(let t=0;t<e.length;t++)e[t]=vc(e[t]);return e}const bt=xc?e=>e:Yh,Dc=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Xh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function An(e){if($e(e),Dc)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Xh[e[n]];return t}const et={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ac(e){if(e>=et._0&&e<=et._9)return e-et._0;if(e>=et.A&&e<=et.F)return e-(et.A-10);if(e>=et.a&&e<=et.f)return e-(et.a-10)}function Ii(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Dc)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=Ac(e.charCodeAt(o)),c=Ac(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function Jh(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function He(e){return typeof e=="string"&&(e=Jh(e)),$e(e),e}function pt(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];$e(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}class dr{}function Bn(e){const t=r=>e().update(He(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Qh(e){const t=(r,i)=>e(i).update(He(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function wt(e=32){if(sn&&typeof sn.getRandomValues=="function")return sn.getRandomValues(new Uint8Array(e));if(sn&&typeof sn.randomBytes=="function")return Uint8Array.from(sn.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const e0=BigInt(0),Sn=BigInt(1),t0=BigInt(2),n0=BigInt(7),r0=BigInt(256),i0=BigInt(113),Bc=[],Sc=[],_c=[];for(let e=0,t=Sn,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Bc.push(2*(5*r+n)),Sc.push((e+1)*(e+2)/2%64);let i=e0;for(let o=0;o<7;o++)t=(t<<Sn^(t>>n0)*i0)%r0,t&t0&&(i^=Sn<<(Sn<<BigInt(o))-Sn);_c.push(i)}const Ic=yc(_c,!0),o0=Ic[0],s0=Ic[1],Uc=(e,t,n)=>n>32?Vh(e,t,n):Hh(e,t,n),Oc=(e,t,n)=>n>32?qh(e,t,n):jh(e,t,n);function c0(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const c=(s+8)%10,a=(s+2)%10,u=n[a],f=n[a+1],l=Uc(u,f,1)^n[c],d=Oc(u,f,1)^n[c+1];for(let b=0;b<50;b+=10)e[s+b]^=l,e[s+b+1]^=d}let i=e[2],o=e[3];for(let s=0;s<24;s++){const c=Sc[s],a=Uc(i,o,c),u=Oc(i,o,c),f=Bc[s];i=e[f],o=e[f+1],e[f]=a,e[f+1]=u}for(let s=0;s<50;s+=10){for(let c=0;c<10;c++)n[c]=e[s+c];for(let c=0;c<10;c++)e[s+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=o0[r],e[1]^=s0[r]}Re(n)}class Ui extends dr{constructor(t,n,r,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,Ke(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Dn(this.state)}clone(){return this._cloneInto()}keccak(){bt(this.state32),c0(this.state32,this.rounds),bt(this.state32),this.posOut=0,this.pos=0}update(t){gt(this),t=He(t),$e(t);const{blockLen:n,state:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);for(let c=0;c<s;c++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){gt(this,!1),$e(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,o=t.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);t.set(n.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ke(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Si(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Re(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new Ui(n,r,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}const a0=(e,t,n)=>Bn(()=>new Ui(t,e,n)),Oi=a0(1,136,256/8);function _n(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function Ci(e){return _n(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Cc="2.31.0";let Ti={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Cc}`};class qt extends Error{constructor(t,n={}){const r=n.cause instanceof qt?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof qt&&n.cause.docsPath||n.docsPath,o=Ti.getDocsUrl?.({...n,docsPath:i}),s=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...Ti.version?[`Version: ${Ti.version}`]:[]].join(`
`);super(s,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Cc}walk(t){return Tc(this,t)}}function Tc(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Tc(e.cause,t):t?null:e}class Nc extends qt{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function cn(e,{dir:t,size:n=32}={}){return typeof e=="string"?f0(e,{dir:t,size:n}):u0(e,{dir:t,size:n})}function f0(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Nc({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function u0(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Nc({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const o=t==="right";r[o?i:n-i-1]=e[o?i:e.length-i-1]}return r}class l0 extends qt{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number "${o}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class d0 extends qt{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function an(e,{size:t}){if(Ci(e)>t)throw new d0({givenSize:Ci(e),maxSize:t})}function Ni(e,t={}){const{signed:n}=t;t.size&&an(e,{size:t.size});const r=BigInt(e);if(!n)return r;const i=(e.length-2)/2,o=(1n<<BigInt(i)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function h0(e,t={}){return Number(Ni(e,t))}const g0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $i(e,t={}){return typeof e=="number"||typeof e=="bigint"?Ri(e,t):typeof e=="string"?w0(e,t):typeof e=="boolean"?b0(e,t):$c(e,t)}function b0(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(an(n,{size:t.size}),cn(n,{size:t.size})):n}function $c(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=g0[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(an(r,{size:t.size}),cn(r,{dir:"right",size:t.size})):r}function Ri(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof o=="bigint"&&n?-o-1n:0;if(o&&i>o||i<s){const a=typeof e=="bigint"?"n":"";throw new l0({max:o?`${o}${a}`:void 0,min:`${s}${a}`,signed:n,size:r,value:`${e}${a}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?cn(c,{size:r}):c}const p0=new TextEncoder;function w0(e,t={}){const n=p0.encode(e);return $c(n,t)}const y0=new TextEncoder;function m0(e,t={}){return typeof e=="number"||typeof e=="bigint"?x0(e,t):typeof e=="boolean"?E0(e,t):_n(e)?Fc(e,t):Pc(e,t)}function E0(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(an(n,{size:t.size}),cn(n,{size:t.size})):n}const tt={zero:48,nine:57,A:65,F:70,a:97,f:102};function Rc(e){if(e>=tt.zero&&e<=tt.nine)return e-tt.zero;if(e>=tt.A&&e<=tt.F)return e-(tt.A-10);if(e>=tt.a&&e<=tt.f)return e-(tt.a-10)}function Fc(e,t={}){let n=e;t.size&&(an(n,{size:t.size}),n=cn(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,o=new Uint8Array(i);for(let s=0,c=0;s<i;s++){const a=Rc(r.charCodeAt(c++)),u=Rc(r.charCodeAt(c++));if(a===void 0||u===void 0)throw new qt(`Invalid byte sequence ("${r[c-2]}${r[c-1]}" in "${r}").`);o[s]=a*16+u}return o}function x0(e,t){const n=Ri(e,t);return Fc(n)}function Pc(e,t={}){const n=y0.encode(e);return typeof t.size=="number"?(an(n,{size:t.size}),cn(n,{dir:"right",size:t.size})):n}function Lc(e,t){const n=t||"hex",r=Oi(_n(e,{strict:!1})?m0(e):e);return n==="bytes"?r:$i(r)}class kc extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Fi=new kc(8192);function v0(e,t){if(Fi.has(`${e}.${t}`))return Fi.get(`${e}.${t}`);const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),r=Lc(Pc(n),"bytes"),i=(t?n.substring(`${t}0x`.length):n).split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&i[s]&&(i[s]=i[s].toUpperCase()),(r[s>>1]&15)>=8&&i[s+1]&&(i[s+1]=i[s+1].toUpperCase());const o=`0x${i.join("")}`;return Fi.set(`${e}.${t}`,o),o}function D0(e){const t=Lc(`0x${e.substring(4)}`).substring(26);return v0(`0x${t}`)}async function A0({hash:e,signature:t}){const n=_n(e)?e:$i(e),{secp256k1:r}=await Promise.resolve().then(function(){return tg});return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:f,v:l,yParity:d}=t,b=Number(d??l),h=Mc(b);return new r.Signature(Ni(u),Ni(f)).addRecoveryBit(h)}const s=_n(t)?t:$i(t);if(Ci(s)!==65)throw new Error("invalid signature length");const c=h0(`0x${s.slice(130)}`),a=Mc(c);return r.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(a)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Mc(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function B0({hash:e,signature:t}){return D0(await A0({hash:e,signature:t}))}function S0(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,u=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+u,c,r)}function _0(e,t,n){return e&t^~e&n}function I0(e,t,n){return e&t^e&n^t&n}class zc extends dr{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=_i(this.buffer)}update(t){gt(this),t=He(t),$e(t);const{view:n,buffer:r,blockLen:i}=this,o=t.length;for(let s=0;s<o;){const c=Math.min(i-this.pos,o-s);if(c===i){const a=_i(t);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){gt(this),Si(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,Re(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let l=s;l<i;l++)n[l]=0;S0(r,i-8,BigInt(this.length*8),o),this.process(r,0);const c=_i(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)c.setUint32(4*l,f[l],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return t.destroyed=s,t.finished=o,t.length=i,t.pos=c,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const yt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),de=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),he=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),U0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mt=new Uint32Array(64);class O0 extends zc{constructor(t=32){super(64,t,8,!1),this.A=yt[0]|0,this.B=yt[1]|0,this.C=yt[2]|0,this.D=yt[3]|0,this.E=yt[4]|0,this.F=yt[5]|0,this.G=yt[6]|0,this.H=yt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:o,F:s,G:c,H:a}=this;return[t,n,r,i,o,s,c,a]}set(t,n,r,i,o,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)mt[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const d=mt[l-15],b=mt[l-2],h=We(d,7)^We(d,18)^d>>>3,g=We(b,17)^We(b,19)^b>>>10;mt[l]=g+mt[l-7]+h+mt[l-16]|0}let{A:r,B:i,C:o,D:s,E:c,F:a,G:u,H:f}=this;for(let l=0;l<64;l++){const d=We(c,6)^We(c,11)^We(c,25),b=f+d+_0(c,a,u)+U0[l]+mt[l]|0,g=(We(r,2)^We(r,13)^We(r,22))+I0(r,i,o)|0;f=u,u=a,a=c,c=s+b|0,s=o,o=i,i=r,r=b+g|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,i,o,s,c,a,u,f)}roundClean(){Re(mt)}destroy(){this.set(0,0,0,0,0,0,0,0),Re(this.buffer)}}const Hc=yc(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),C0=Hc[0],T0=Hc[1],Et=new Uint32Array(80),xt=new Uint32Array(80);class Pi extends zc{constructor(t=64){super(128,t,16,!1),this.Ah=he[0]|0,this.Al=he[1]|0,this.Bh=he[2]|0,this.Bl=he[3]|0,this.Ch=he[4]|0,this.Cl=he[5]|0,this.Dh=he[6]|0,this.Dl=he[7]|0,this.Eh=he[8]|0,this.El=he[9]|0,this.Fh=he[10]|0,this.Fl=he[11]|0,this.Gh=he[12]|0,this.Gl=he[13]|0,this.Hh=he[14]|0,this.Hl=he[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:u,El:f,Fh:l,Fl:d,Gh:b,Gl:h,Hh:g,Hl:E}=this;return[t,n,r,i,o,s,c,a,u,f,l,d,b,h,g,E]}set(t,n,r,i,o,s,c,a,u,f,l,d,b,h,g,E){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=d|0,this.Gh=b|0,this.Gl=h|0,this.Hh=g|0,this.Hl=E|0}process(t,n){for(let x=0;x<16;x++,n+=4)Et[x]=t.getUint32(n),xt[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const D=Et[x-15]|0,B=xt[x-15]|0,F=dt(D,B,1)^dt(D,B,8)^mc(D,B,7),R=ht(D,B,1)^ht(D,B,8)^Ec(D,B,7),T=Et[x-2]|0,m=xt[x-2]|0,C=dt(T,m,19)^xn(T,m,61)^mc(T,m,6),A=ht(T,m,19)^vn(T,m,61)^Ec(T,m,6),_=Kh(R,A,xt[x-7],xt[x-16]),O=Wh(_,F,C,Et[x-7],Et[x-16]);Et[x]=O|0,xt[x]=_|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:u,Dl:f,Eh:l,El:d,Fh:b,Fl:h,Gh:g,Gl:E,Hh:U,Hl:P}=this;for(let x=0;x<80;x++){const D=dt(l,d,14)^dt(l,d,18)^xn(l,d,41),B=ht(l,d,14)^ht(l,d,18)^vn(l,d,41),F=l&b^~l&g,R=d&h^~d&E,T=Zh(P,B,R,T0[x],xt[x]),m=Gh(T,U,D,F,C0[x],Et[x]),C=T|0,A=dt(r,i,28)^xn(r,i,34)^xn(r,i,39),_=ht(r,i,28)^vn(r,i,34)^vn(r,i,39),O=r&o^r&c^o&c,L=i&s^i&a^s&a;U=g|0,P=E|0,g=b|0,E=h|0,b=l|0,h=d|0,{h:l,l:d}=ze(u|0,f|0,m|0,C|0),u=c|0,f=a|0,c=o|0,a=s|0,o=r|0,s=i|0;const y=vi(C,_,L);r=Di(y,m,A,O),i=y|0}({h:r,l:i}=ze(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=ze(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=ze(this.Ch|0,this.Cl|0,c|0,a|0),{h:u,l:f}=ze(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:d}=ze(this.Eh|0,this.El|0,l|0,d|0),{h:b,l:h}=ze(this.Fh|0,this.Fl|0,b|0,h|0),{h:g,l:E}=ze(this.Gh|0,this.Gl|0,g|0,E|0),{h:U,l:P}=ze(this.Hh|0,this.Hl|0,U|0,P|0),this.set(r,i,o,s,c,a,u,f,l,d,b,h,g,E,U,P)}roundClean(){Re(Et,xt)}destroy(){Re(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class N0 extends Pi{constructor(){super(48),this.Ah=de[0]|0,this.Al=de[1]|0,this.Bh=de[2]|0,this.Bl=de[3]|0,this.Ch=de[4]|0,this.Cl=de[5]|0,this.Dh=de[6]|0,this.Dl=de[7]|0,this.Eh=de[8]|0,this.El=de[9]|0,this.Fh=de[10]|0,this.Fl=de[11]|0,this.Gh=de[12]|0,this.Gl=de[13]|0,this.Hh=de[14]|0,this.Hl=de[15]|0}}const ge=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class $0 extends Pi{constructor(){super(32),this.Ah=ge[0]|0,this.Al=ge[1]|0,this.Bh=ge[2]|0,this.Bl=ge[3]|0,this.Ch=ge[4]|0,this.Cl=ge[5]|0,this.Dh=ge[6]|0,this.Dl=ge[7]|0,this.Eh=ge[8]|0,this.El=ge[9]|0,this.Fh=ge[10]|0,this.Fl=ge[11]|0,this.Gh=ge[12]|0,this.Gl=ge[13]|0,this.Hh=ge[14]|0,this.Hl=ge[15]|0}}const vt=Bn(()=>new O0),R0=Bn(()=>new Pi),F0=Bn(()=>new N0),P0=Bn(()=>new $0),hr=vt,Li=BigInt(0),ki=BigInt(1);function gr(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function br(e){const t=e.toString(16);return t.length&1?"0"+t:t}function jc(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Li:BigInt("0x"+e)}function pr(e){return jc(An(e))}function wr(e){return $e(e),jc(An(Uint8Array.from(e).reverse()))}function Mi(e,t){return Ii(e.toString(16).padStart(t*2,"0"))}function zi(e,t){return Mi(e,t).reverse()}function ve(e,t,n){let r;if(typeof t=="string")try{r=Ii(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Ai(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const Hi=e=>typeof e=="bigint"&&Li<=e;function L0(e,t,n){return Hi(e)&&Hi(t)&&Hi(n)&&t<=e&&e<n}function ji(e,t,n,r){if(!L0(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function k0(e){let t;for(t=0;e>Li;e>>=ki,t+=1);return t}const yr=e=>(ki<<BigInt(e))-ki;function M0(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=b=>new Uint8Array(b),i=b=>Uint8Array.of(b);let o=r(e),s=r(e),c=0;const a=()=>{o.fill(1),s.fill(0),c=0},u=(...b)=>n(s,o,...b),f=(b=r(0))=>{s=u(i(0),b),o=u(),b.length!==0&&(s=u(i(1),b),o=u())},l=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const h=[];for(;b<t;){o=u();const g=o.slice();h.push(g),b+=o.length}return pt(...h)};return(b,h)=>{a(),f(b);let g;for(;!(g=h(l()));)f();return a(),g}}function mr(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(i,o,s){const c=e[i];if(s&&c===void 0)return;const a=typeof c;if(a!==o||c===null)throw new Error(`param "${i}" is invalid: expected ${o}, got ${a}`)}Object.entries(t).forEach(([i,o])=>r(i,o,!1)),Object.entries(n).forEach(([i,o])=>r(i,o,!0))}function Vc(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const z0="0.1.1";function H0(){return z0}class ye extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof ye){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof ye&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${i??""}`,c=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${s}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${H0()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=i,this.shortMessage=t}walk(t){return qc(this,t)}}function qc(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?qc(e.cause,t):t?null:e}function j0(e,t){if(Zc(e)>t)throw new X0({givenSize:Zc(e),maxSize:t})}const nt={zero:48,nine:57,A:65,F:70,a:97,f:102};function Kc(e){if(e>=nt.zero&&e<=nt.nine)return e-nt.zero;if(e>=nt.A&&e<=nt.F)return e-(nt.A-10);if(e>=nt.a&&e<=nt.f)return e-(nt.a-10)}function V0(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new J0({size:e.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let o=0;o<r;o++){const s=n==="right";i[s?o:r-o-1]=e[s?o:e.length-o-1]}return i}function Vi(e,t){if(Ki(e)>t)throw new o1({givenSize:Ki(e),maxSize:t})}function Wc(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const i=e.replace("0x","");if(i.length>r*2)throw new s1({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const q0=new TextEncoder;function K0(e){return e instanceof Uint8Array?e:typeof e=="string"?Z0(e):W0(e)}function W0(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Z0(e,t={}){const{size:n}=t;let r=e;n&&(Vi(e,n),r=qi(e,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const o=i.length/2,s=new Uint8Array(o);for(let c=0,a=0;c<o;c++){const u=Kc(i.charCodeAt(a++)),f=Kc(i.charCodeAt(a++));if(u===void 0||f===void 0)throw new ye(`Invalid byte sequence ("${i[a-2]}${i[a-1]}" in "${i}").`);s[c]=u*16+f}return s}function G0(e,t={}){const{size:n}=t,r=q0.encode(e);return typeof n=="number"?(j0(r,n),Y0(r,n)):r}function Y0(e,t){return V0(e,{dir:"right",size:t})}function Zc(e){return e.length}class X0 extends ye{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class J0 extends ye{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const Q0=new TextEncoder,e1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Gc(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function t1(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Vi(n,t.size),Er(n,t.size)):n}function Yc(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=e1[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(Vi(r,t.size),qi(r,t.size)):r}function n1(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof o=="bigint"&&n?-o-1n:0;if(o&&i>o||i<s){const u=typeof e=="bigint"?"n":"";throw new i1({max:o?`${o}${u}`:void 0,min:`${s}${u}`,signed:n,size:r,value:`${e}${u}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Er(a,r):a}function r1(e,t={}){return Yc(Q0.encode(e),t)}function Er(e,t){return Wc(e,{dir:"left",size:t})}function qi(e,t){return Wc(e,{dir:"right",size:t})}function Ki(e){return Math.ceil((e.length-2)/2)}class i1 extends ye{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number \`${o}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class o1 extends ye{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class s1 extends ye{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}new kc(128),Ri(0,{size:32});function c1(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Oi(K0(e));return n==="Bytes"?r:Yc(r)}class a1 extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Wi={checksum:new a1(8192)}.checksum,f1=/^0x[a-fA-F0-9]{40}$/;function Xc(e,t={}){const{strict:n=!0}=t;if(!f1.test(e))throw new Jc({address:e,cause:new l1});if(n){if(e.toLowerCase()===e)return;if(u1(e)!==e)throw new Jc({address:e,cause:new d1})}}function u1(e){if(Wi.has(e))return Wi.get(e);Xc(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=c1(G0(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const i=`0x${r.join("")}`;return Wi.set(e,i),i}class Jc extends ye{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class l1 extends ye{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class d1 extends ye{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const h1=/^(.*)\[([0-9]*)\]$/,g1=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,b1=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Zi(e,t){if(e.length!==t.length)throw new w1({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=t[r];n.push(Zi.encode(i,o))}return Gc(...n)}(function(e){function t(n,r,i=!1){if(n==="address"){const a=r;return Xc(a),Er(a.toLowerCase(),i?32:0)}if(n==="string")return r1(r);if(n==="bytes")return r;if(n==="bool")return Er(t1(r),i?32:1);const o=n.match(b1);if(o){const[a,u,f="256"]=o,l=Number.parseInt(f)/8;return n1(r,{size:i?32:l,signed:u==="int"})}const s=n.match(g1);if(s){const[a,u]=s;if(Number.parseInt(u)!==(r.length-2)/2)throw new p1({expectedSize:Number.parseInt(u),value:r});return qi(r,i?32:0)}const c=n.match(h1);if(c&&Array.isArray(r)){const[a,u]=c,f=[];for(let l=0;l<r.length;l++)f.push(t(u,r[l],!0));return f.length===0?"0x":Gc(...f)}throw new y1(n)}e.encode=t})(Zi||(Zi={}));class p1 extends ye{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${Ki(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class w1 extends ye{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class y1 extends ye{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class Qc extends dr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Bi(t);const r=He(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?t.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),Re(o)}update(t){return gt(this),this.iHash.update(t),this}digestInto(t){gt(this),$e(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const In=(e,t,n)=>new Qc(e,t).update(n).digest();In.create=(e,t)=>new Qc(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gi=BigInt(0),Yi=BigInt(1);function Un(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Dt(e){if(!Un(e))throw new Error("Uint8Array expected")}function On(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function xr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function ea(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Gi:BigInt("0x"+e)}const ta=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",m1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Cn(e){if(Dt(e),ta)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=m1[e[n]];return t}const rt={_0:48,_9:57,A:65,F:70,a:97,f:102};function na(e){if(e>=rt._0&&e<=rt._9)return e-rt._0;if(e>=rt.A&&e<=rt.F)return e-(rt.A-10);if(e>=rt.a&&e<=rt.f)return e-(rt.a-10)}function vr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(ta)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=na(e.charCodeAt(o)),c=na(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function Ze(e){return ea(Cn(e))}function ra(e){return Dt(e),ea(Cn(Uint8Array.from(e).reverse()))}function Kt(e,t){return vr(e.toString(16).padStart(t*2,"0"))}function ia(e,t){return Kt(e,t).reverse()}function ce(e,t,n){let r;if(typeof t=="string")try{r=vr(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Un(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function Fe(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Dt(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}function Xi(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const Ji=e=>typeof e=="bigint"&&Gi<=e;function Tn(e,t,n){return Ji(e)&&Ji(t)&&Ji(n)&&t<=e&&e<n}function Wt(e,t,n,r){if(!Tn(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function E1(e){let t;for(t=0;e>Gi;e>>=Yi,t+=1);return t}const Dr=e=>(Yi<<BigInt(e))-Yi,Qi=e=>new Uint8Array(e),oa=e=>Uint8Array.from(e);function x1(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Qi(e),i=Qi(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},c=(...l)=>n(i,r,...l),a=(l=Qi(0))=>{i=c(oa([0]),l),r=c(),l.length!==0&&(i=c(oa([1]),l),r=c())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const d=[];for(;l<t;){r=c();const b=r.slice();d.push(b),l+=r.length}return Fe(...d)};return(l,d)=>{s(),a(l);let b;for(;!(b=d(u()));)a();return s(),b}}const v1={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Un(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Nn(e,t,n={}){const r=(i,o,s)=>{const c=v1[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[i];if(!(s&&a===void 0)&&!c(a,e))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+a)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}function sa(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const De=BigInt(0),me=BigInt(1),Zt=BigInt(2),D1=BigInt(3),ca=BigInt(4),aa=BigInt(5),fa=BigInt(8);function oe(e,t){const n=e%t;return n>=De?n:t+n}function Pe(e,t,n){let r=e;for(;t-- >De;)r*=r,r%=n;return r}function eo(e,t){if(e===De)throw new Error("invert: expected non-zero number");if(t<=De)throw new Error("invert: expected positive modulus, got "+t);let n=oe(e,t),r=t,i=De,o=me;for(;n!==De;){const c=r/n,a=r%n,u=i-o*c;r=n,n=a,i=o,o=u}if(r!==me)throw new Error("invert: does not exist");return oe(i,t)}function ua(e,t){const n=(e.ORDER+me)/ca,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function A1(e,t){const n=(e.ORDER-aa)/fa,r=e.mul(t,Zt),i=e.pow(r,n),o=e.mul(t,i),s=e.mul(e.mul(o,Zt),i),c=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(c),t))throw new Error("Cannot find square root");return c}function B1(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-me,n=0;for(;t%Zt===De;)t/=Zt,n++;let r=Zt;const i=to(e);for(;da(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return ua;let o=i.pow(r,t);const s=(t+me)/Zt;return function(a,u){if(a.is0(u))return u;if(da(a,u)!==1)throw new Error("Cannot find square root");let f=n,l=a.mul(a.ONE,o),d=a.pow(u,t),b=a.pow(u,s);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(h++,g=a.sqr(g),h===f)throw new Error("Cannot find square root");const E=me<<BigInt(f-h-1),U=a.pow(l,E);f=h,l=a.sqr(U),d=a.mul(d,l),b=a.mul(b,U)}return b}}function S1(e){return e%ca===D1?ua:e%fa===aa?A1:B1(e)}const _1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function la(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=_1.reduce((r,i)=>(r[i]="function",r),t);return Nn(e,n)}function I1(e,t,n){if(n<De)throw new Error("invalid exponent, negatives unsupported");if(n===De)return e.ONE;if(n===me)return t;let r=e.ONE,i=t;for(;n>De;)n&me&&(r=e.mul(r,i)),i=e.sqr(i),n>>=me;return r}function Ar(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),o=e.inv(i);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),o),r}function da(e,t){const n=(e.ORDER-me)/Zt,r=e.pow(t,n),i=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function ha(e,t){t!==void 0&&Ke(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function to(e,t,n=!1,r={}){if(e<=De)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=ha(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const c=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:o,MASK:Dr(i),ZERO:De,ONE:me,create:a=>oe(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return De<=a&&a<e},is0:a=>a===De,isOdd:a=>(a&me)===me,neg:a=>oe(-a,e),eql:(a,u)=>a===u,sqr:a=>oe(a*a,e),add:(a,u)=>oe(a+u,e),sub:(a,u)=>oe(a-u,e),mul:(a,u)=>oe(a*u,e),pow:(a,u)=>I1(c,a,u),div:(a,u)=>oe(a*eo(u,e),e),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>eo(a,e),sqrt:r.sqrt||(a=>(s||(s=S1(e)),s(c,a))),toBytes:a=>n?ia(a,o):Kt(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?ra(a):Ze(a)},invertBatch:a=>Ar(c,a),cmov:(a,u,f)=>f?u:a});return Object.freeze(c)}function ga(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ba(e){const t=ga(e);return t+Math.ceil(t/2)}function U1(e,t,n=!1){const r=e.length,i=ga(t),o=ba(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=n?ra(e):Ze(e),c=oe(s,t-me)+me;return n?ia(c,i):Kt(c,i)}const pa=BigInt(0),no=BigInt(1);function ro(e,t){const n=t.negate();return e?n:t}function wa(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function io(e,t){wa(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,o=Dr(e),s=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:i,shiftBy:s}}function ya(e,t,n){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=n;let c=Number(e&i),a=e>>s;c>r&&(c-=o,a+=no);const u=t*r,f=u+Math.abs(c)-1,l=c===0,d=c<0,b=t%2!==0;return{nextN:a,offset:f,isZero:l,isNeg:d,isNegF:b,offsetF:u}}function O1(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function C1(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const oo=new WeakMap,ma=new WeakMap;function so(e){return ma.get(e)||1}function T1(e,t){return{constTimeNegate:ro,hasPrecomputes(n){return so(n)!==1},unsafeLadder(n,r,i=e.ZERO){let o=n;for(;r>pa;)r&no&&(i=i.add(o)),o=o.double(),r>>=no;return i},precomputeWindow(n,r){const{windows:i,windowSize:o}=io(r,t),s=[];let c=n,a=c;for(let u=0;u<i;u++){a=c,s.push(a);for(let f=1;f<o;f++)a=a.add(c),s.push(a);c=a.double()}return s},wNAF(n,r,i){let o=e.ZERO,s=e.BASE;const c=io(n,t);for(let a=0;a<c.windows;a++){const{nextN:u,offset:f,isZero:l,isNeg:d,isNegF:b,offsetF:h}=ya(i,a,c);i=u,l?s=s.add(ro(b,r[h])):o=o.add(ro(d,r[f]))}return{p:o,f:s}},wNAFUnsafe(n,r,i,o=e.ZERO){const s=io(n,t);for(let c=0;c<s.windows&&i!==pa;c++){const{nextN:a,offset:u,isZero:f,isNeg:l}=ya(i,c,s);if(i=a,!f){const d=r[u];o=o.add(l?d.negate():d)}}return o},getPrecomputes(n,r,i){let o=oo.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&oo.set(r,i(o))),o},wNAFCached(n,r,i){const o=so(n);return this.wNAF(o,this.getPrecomputes(o,n,i),r)},wNAFCachedUnsafe(n,r,i,o){const s=so(n);return s===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,n,i),r,o)},setWindowSize(n,r){wa(r,t),ma.set(n,r),oo.delete(n)}}}function N1(e,t,n,r){O1(n,e),C1(r,t);const i=n.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=E1(BigInt(i));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const u=Dr(a),f=new Array(Number(u)+1).fill(s),l=Math.floor((t.BITS-1)/a)*a;let d=s;for(let b=l;b>=0;b-=a){f.fill(s);for(let g=0;g<o;g++){const E=r[g],U=Number(E>>BigInt(b)&u);f[U]=f[U].add(n[g])}let h=s;for(let g=f.length-1,E=s;g>0;g--)E=E.add(f[g]),h=h.add(E);if(d=d.add(h),b!==0)for(let g=0;g<a;g++)d=d.double()}return d}function Ea(e){return la(e.Fp),Nn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ha(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function xa(e){e.lowS!==void 0&&On("lowS",e.lowS),e.prehash!==void 0&&On("prehash",e.prehash)}function $1(e){const t=Ea(e);Nn(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class R1 extends Error{constructor(t=""){super(t)}}const it={Err:R1,_tlv:{encode:(e,t)=>{const{Err:n}=it;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=xr(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?xr(i.length/2|128):"";return xr(e)+o+i+t},decode(e,t){const{Err:n}=it;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],o=!!(i&128);let s=0;if(!o)s=i;else{const a=i&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+a);if(u.length!==a)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)s=s<<8|f;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=it;if(e<je)throw new t("integer: negative integers are not allowed");let n=xr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=it;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Ze(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=it,i=ce("signature",e),{v:o,l:s}=r.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:u,l:f}=r.decode(2,a);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=it,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),o=r+i;return t.encode(48,o)}};function co(e,t){return Cn(Kt(e,t))}const je=BigInt(0),J=BigInt(1),At=BigInt(2),$n=BigInt(3),ao=BigInt(4);function F1(e){const t=$1(e),{Fp:n}=t,r=to(t.n,t.nBitLength),i=t.toBytes||((x,D,B)=>{const F=D.toAffine();return Fe(Uint8Array.from([4]),n.toBytes(F.x),n.toBytes(F.y))}),o=t.fromBytes||(x=>{const D=x.subarray(1),B=n.fromBytes(D.subarray(0,n.BYTES)),F=n.fromBytes(D.subarray(n.BYTES,2*n.BYTES));return{x:B,y:F}});function s(x){const{a:D,b:B}=t,F=n.sqr(x),R=n.mul(F,x);return n.add(n.add(R,n.mul(x,D)),B)}function c(x,D){const B=n.sqr(D),F=s(x);return n.eql(B,F)}if(!c(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(t.a,$n),ao),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(a,u)))throw new Error("bad curve params: a or b");function f(x){return Tn(x,J,t.n)}function l(x){const{allowedPrivateKeyLengths:D,nByteLength:B,wrapPrivateKey:F,n:R}=t;if(D&&typeof x!="bigint"){if(Un(x)&&(x=Cn(x)),typeof x!="string"||!D.includes(x.length))throw new Error("invalid private key");x=x.padStart(B*2,"0")}let T;try{T=typeof x=="bigint"?x:Ze(ce("private key",x,B))}catch{throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof x)}return F&&(T=oe(T,R)),Wt("private key",T,J,R),T}function d(x){if(!(x instanceof g))throw new Error("ProjectivePoint expected")}const b=sa((x,D)=>{const{px:B,py:F,pz:R}=x;if(n.eql(R,n.ONE))return{x:B,y:F};const T=x.is0();D==null&&(D=T?n.ONE:n.inv(R));const m=n.mul(B,D),C=n.mul(F,D),A=n.mul(R,D);if(T)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:m,y:C}}),h=sa(x=>{if(x.is0()){if(t.allowInfinityPoint&&!n.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:D,y:B}=x.toAffine();if(!n.isValid(D)||!n.isValid(B))throw new Error("bad point: x or y not FE");if(!c(D,B))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(D,B,F){if(D==null||!n.isValid(D))throw new Error("x required");if(B==null||!n.isValid(B)||n.is0(B))throw new Error("y required");if(F==null||!n.isValid(F))throw new Error("z required");this.px=D,this.py=B,this.pz=F,Object.freeze(this)}static fromAffine(D){const{x:B,y:F}=D||{};if(!D||!n.isValid(B)||!n.isValid(F))throw new Error("invalid affine point");if(D instanceof g)throw new Error("projective point not allowed");const R=T=>n.eql(T,n.ZERO);return R(B)&&R(F)?g.ZERO:new g(B,F,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(D){const B=Ar(n,D.map(F=>F.pz));return D.map((F,R)=>F.toAffine(B[R])).map(g.fromAffine)}static fromHex(D){const B=g.fromAffine(o(ce("pointHex",D)));return B.assertValidity(),B}static fromPrivateKey(D){return g.BASE.multiply(l(D))}static msm(D,B){return N1(g,r,D,B)}_setWindowSize(D){P.setWindowSize(this,D)}assertValidity(){h(this)}hasEvenY(){const{y:D}=this.toAffine();if(n.isOdd)return!n.isOdd(D);throw new Error("Field doesn't support isOdd")}equals(D){d(D);const{px:B,py:F,pz:R}=this,{px:T,py:m,pz:C}=D,A=n.eql(n.mul(B,C),n.mul(T,R)),_=n.eql(n.mul(F,C),n.mul(m,R));return A&&_}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:D,b:B}=t,F=n.mul(B,$n),{px:R,py:T,pz:m}=this;let C=n.ZERO,A=n.ZERO,_=n.ZERO,O=n.mul(R,R),L=n.mul(T,T),y=n.mul(m,m),p=n.mul(R,T);return p=n.add(p,p),_=n.mul(R,m),_=n.add(_,_),C=n.mul(D,_),A=n.mul(F,y),A=n.add(C,A),C=n.sub(L,A),A=n.add(L,A),A=n.mul(C,A),C=n.mul(p,C),_=n.mul(F,_),y=n.mul(D,y),p=n.sub(O,y),p=n.mul(D,p),p=n.add(p,_),_=n.add(O,O),O=n.add(_,O),O=n.add(O,y),O=n.mul(O,p),A=n.add(A,O),y=n.mul(T,m),y=n.add(y,y),O=n.mul(y,p),C=n.sub(C,O),_=n.mul(y,L),_=n.add(_,_),_=n.add(_,_),new g(C,A,_)}add(D){d(D);const{px:B,py:F,pz:R}=this,{px:T,py:m,pz:C}=D;let A=n.ZERO,_=n.ZERO,O=n.ZERO;const L=t.a,y=n.mul(t.b,$n);let p=n.mul(B,T),v=n.mul(F,m),S=n.mul(R,C),I=n.add(B,F),N=n.add(T,m);I=n.mul(I,N),N=n.add(p,v),I=n.sub(I,N),N=n.add(B,R);let $=n.add(T,C);return N=n.mul(N,$),$=n.add(p,S),N=n.sub(N,$),$=n.add(F,R),A=n.add(m,C),$=n.mul($,A),A=n.add(v,S),$=n.sub($,A),O=n.mul(L,N),A=n.mul(y,S),O=n.add(A,O),A=n.sub(v,O),O=n.add(v,O),_=n.mul(A,O),v=n.add(p,p),v=n.add(v,p),S=n.mul(L,S),N=n.mul(y,N),v=n.add(v,S),S=n.sub(p,S),S=n.mul(L,S),N=n.add(N,S),p=n.mul(v,N),_=n.add(_,p),p=n.mul($,N),A=n.mul(I,A),A=n.sub(A,p),p=n.mul(I,v),O=n.mul($,O),O=n.add(O,p),new g(A,_,O)}subtract(D){return this.add(D.negate())}is0(){return this.equals(g.ZERO)}wNAF(D){return P.wNAFCached(this,D,g.normalizeZ)}multiplyUnsafe(D){const{endo:B,n:F}=t;Wt("scalar",D,je,F);const R=g.ZERO;if(D===je)return R;if(this.is0()||D===J)return this;if(!B||P.hasPrecomputes(this))return P.wNAFCachedUnsafe(this,D,g.normalizeZ);let{k1neg:T,k1:m,k2neg:C,k2:A}=B.splitScalar(D),_=R,O=R,L=this;for(;m>je||A>je;)m&J&&(_=_.add(L)),A&J&&(O=O.add(L)),L=L.double(),m>>=J,A>>=J;return T&&(_=_.negate()),C&&(O=O.negate()),O=new g(n.mul(O.px,B.beta),O.py,O.pz),_.add(O)}multiply(D){const{endo:B,n:F}=t;Wt("scalar",D,J,F);let R,T;if(B){const{k1neg:m,k1:C,k2neg:A,k2:_}=B.splitScalar(D);let{p:O,f:L}=this.wNAF(C),{p:y,f:p}=this.wNAF(_);O=P.constTimeNegate(m,O),y=P.constTimeNegate(A,y),y=new g(n.mul(y.px,B.beta),y.py,y.pz),R=O.add(y),T=L.add(p)}else{const{p:m,f:C}=this.wNAF(D);R=m,T=C}return g.normalizeZ([R,T])[0]}multiplyAndAddUnsafe(D,B,F){const R=g.BASE,T=(C,A)=>A===je||A===J||!C.equals(R)?C.multiplyUnsafe(A):C.multiply(A),m=T(this,B).add(T(D,F));return m.is0()?void 0:m}toAffine(D){return b(this,D)}isTorsionFree(){const{h:D,isTorsionFree:B}=t;if(D===J)return!0;if(B)return B(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:D,clearCofactor:B}=t;return D===J?this:B?B(g,this):this.multiplyUnsafe(t.h)}toRawBytes(D=!0){return On("isCompressed",D),this.assertValidity(),i(g,this,D)}toHex(D=!0){return On("isCompressed",D),Cn(this.toRawBytes(D))}}g.BASE=new g(t.Gx,t.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const{endo:E,nBitLength:U}=t,P=T1(g,E?Math.ceil(U/2):U);return{CURVE:t,ProjectivePoint:g,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:f}}function P1(e){const t=Ea(e);return Nn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function L1(e){const t=P1(e),{Fp:n,n:r,nByteLength:i,nBitLength:o}=t,s=n.BYTES+1,c=2*n.BYTES+1;function a(y){return oe(y,r)}function u(y){return eo(y,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:b}=F1({...t,toBytes(y,p,v){const S=p.toAffine(),I=n.toBytes(S.x),N=Fe;return On("isCompressed",v),v?N(Uint8Array.from([p.hasEvenY()?2:3]),I):N(Uint8Array.from([4]),I,n.toBytes(S.y))},fromBytes(y){const p=y.length,v=y[0],S=y.subarray(1);if(p===s&&(v===2||v===3)){const I=Ze(S);if(!Tn(I,J,n.ORDER))throw new Error("Point is not on curve");const N=d(I);let $;try{$=n.sqrt(N)}catch(j){const H=j instanceof Error?": "+j.message:"";throw new Error("Point is not on curve"+H)}const k=($&J)===J;return(v&1)===1!==k&&($=n.neg($)),{x:I,y:$}}else if(p===c&&v===4){const I=n.fromBytes(S.subarray(0,n.BYTES)),N=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:I,y:N}}else{const I=s,N=c;throw new Error("invalid Point, expected length of "+I+", or uncompressed "+N+", got "+p)}}});function h(y){const p=r>>J;return y>p}function g(y){return h(y)?a(-y):y}const E=(y,p,v)=>Ze(y.slice(p,v));class U{constructor(p,v,S){Wt("r",p,J,r),Wt("s",v,J,r),this.r=p,this.s=v,S!=null&&(this.recovery=S),Object.freeze(this)}static fromCompact(p){const v=i;return p=ce("compactSignature",p,v*2),new U(E(p,0,v),E(p,v,2*v))}static fromDER(p){const{r:v,s:S}=it.toSig(ce("DER",p));return new U(v,S)}assertValidity(){}addRecoveryBit(p){return new U(this.r,this.s,p)}recoverPublicKey(p){const{r:v,s:S,recovery:I}=this,N=R(ce("msgHash",p));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const $=I===2||I===3?v+t.n:v;if($>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const k=(I&1)===0?"02":"03",z=f.fromHex(k+co($,n.BYTES)),j=u($),H=a(-N*j),V=a(S*j),Z=f.BASE.multiplyAndAddUnsafe(z,H,V);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new U(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return vr(this.toDERHex())}toDERHex(){return it.hexFromSig(this)}toCompactRawBytes(){return vr(this.toCompactHex())}toCompactHex(){const p=i;return co(this.r,p)+co(this.s,p)}}const P={isValidPrivateKey(y){try{return l(y),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const y=ba(t.n);return U1(t.randomBytes(y),t.n)},precompute(y=8,p=f.BASE){return p._setWindowSize(y),p.multiply(BigInt(3)),p}};function x(y,p=!0){return f.fromPrivateKey(y).toRawBytes(p)}function D(y){if(typeof y=="bigint")return!1;if(y instanceof f)return!0;const v=ce("key",y).length,S=n.BYTES,I=S+1,N=2*S+1;if(!(t.allowedPrivateKeyLengths||i===I))return v===I||v===N}function B(y,p,v=!0){if(D(y)===!0)throw new Error("first arg must be private key");if(D(p)===!1)throw new Error("second arg must be public key");return f.fromHex(p).multiply(l(y)).toRawBytes(v)}const F=t.bits2int||function(y){if(y.length>8192)throw new Error("input is too large");const p=Ze(y),v=y.length*8-o;return v>0?p>>BigInt(v):p},R=t.bits2int_modN||function(y){return a(F(y))},T=Dr(o);function m(y){return Wt("num < 2^"+o,y,je,T),Kt(y,i)}function C(y,p,v=A){if(["recovered","canonical"].some(W=>W in v))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:I}=t;let{lowS:N,prehash:$,extraEntropy:k}=v;N==null&&(N=!0),y=ce("msgHash",y),xa(v),$&&(y=ce("prehashed msgHash",S(y)));const z=R(y),j=l(p),H=[m(j),m(z)];if(k!=null&&k!==!1){const W=k===!0?I(n.BYTES):k;H.push(ce("extraEntropy",W))}const V=Fe(...H),Z=z;function X(W){const ee=F(W);if(!b(ee))return;const ne=u(ee),Xe=f.BASE.multiply(ee).toAffine(),Je=a(Xe.x);if(Je===je)return;const Lt=a(ne*a(Z+Je*j));if(Lt===je)return;let kt=(Xe.x===Je?0:2)|Number(Xe.y&J),ni=Lt;return N&&h(Lt)&&(ni=g(Lt),kt^=1),new U(Je,ni,kt)}return{seed:V,k2sig:X}}const A={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};function O(y,p,v=A){const{seed:S,k2sig:I}=C(y,p,v),N=t;return x1(N.hash.outputLen,N.nByteLength,N.hmac)(S,I)}f.BASE._setWindowSize(8);function L(y,p,v,S=_){const I=y;p=ce("msgHash",p),v=ce("publicKey",v);const{lowS:N,prehash:$,format:k}=S;if(xa(S),"strict"in S)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&k!=="compact"&&k!=="der")throw new Error("format must be compact or der");const z=typeof I=="string"||Un(I),j=!z&&!k&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!z&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let H,V;try{if(j&&(H=new U(I.r,I.s)),z){try{k!=="compact"&&(H=U.fromDER(I))}catch(kt){if(!(kt instanceof it.Err))throw kt}!H&&k!=="der"&&(H=U.fromCompact(I))}V=f.fromHex(v)}catch{return!1}if(!H||N&&H.hasHighS())return!1;$&&(p=t.hash(p));const{r:Z,s:X}=H,W=R(p),ee=u(X),ne=a(W*ee),Xe=a(Z*ee),Je=f.BASE.multiplyAndAddUnsafe(V,ne,Xe)?.toAffine();return Je?a(Je.x)===Z:!1}return{CURVE:t,getPublicKey:x,getSharedSecret:B,sign:O,verify:L,ProjectivePoint:f,Signature:U,utils:P}}function k1(e,t){const n=e.ORDER;let r=je;for(let h=n-J;h%At===je;h/=At)r+=J;const i=r,o=At<<i-J-J,s=o*At,c=(n-J)/s,a=(c-J)/At,u=s-J,f=o,l=e.pow(t,c),d=e.pow(t,(c+J)/At);let b=(h,g)=>{let E=l,U=e.pow(g,u),P=e.sqr(U);P=e.mul(P,g);let x=e.mul(h,P);x=e.pow(x,a),x=e.mul(x,U),U=e.mul(x,g),P=e.mul(x,h);let D=e.mul(P,U);x=e.pow(D,f);let B=e.eql(x,e.ONE);U=e.mul(P,d),x=e.mul(D,E),P=e.cmov(U,P,B),D=e.cmov(x,D,B);for(let F=i;F>J;F--){let R=F-At;R=At<<R-J;let T=e.pow(D,R);const m=e.eql(T,e.ONE);U=e.mul(P,E),E=e.mul(E,E),T=e.mul(D,E),P=e.cmov(U,P,m),D=e.cmov(T,D,m)}return{isValid:B,value:P}};if(e.ORDER%ao===$n){const h=(e.ORDER-$n)/ao,g=e.sqrt(e.neg(t));b=(E,U)=>{let P=e.sqr(U);const x=e.mul(E,U);P=e.mul(P,x);let D=e.pow(P,h);D=e.mul(D,x);const B=e.mul(D,g),F=e.mul(e.sqr(D),U),R=e.eql(F,E);let T=e.cmov(B,D,R);return{isValid:R,value:T}}}return b}function M1(e,t){if(la(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=k1(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,o,s,c,a,u,f,l;i=e.sqr(r),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,t.B),c=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),c=e.mul(c,t.A),o=e.sqr(s),u=e.sqr(c),a=e.mul(u,t.A),o=e.add(o,a),o=e.mul(o,s),u=e.mul(u,c),a=e.mul(u,t.B),o=e.add(o,a),f=e.mul(i,s);const{isValid:d,value:b}=n(o,u);l=e.mul(i,r),l=e.mul(l,b),f=e.cmov(f,s,d),l=e.cmov(l,b,d);const h=e.isOdd(r)===e.isOdd(l);l=e.cmov(e.neg(l),l,h);const g=Ar(e,[c],!0)[0];return f=e.mul(f,g),{x:f,y:l}}}function z1(e){return{hash:e,hmac:(t,...n)=>In(e,t,pt(...n)),randomBytes:wt}}function H1(e,t){const n=r=>L1({...e,...z1(r)});return{...n(t),create:n}}const j1=Ze;function Bt(e,t){if(Rn(e),Rn(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function V1(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function Rn(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function q1(e,t,n,r){Dt(e),Dt(t),Rn(n),t.length>255&&(t=r(Fe(Xi("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:o}=r,s=Math.ceil(n/i);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const c=Fe(t,Bt(t.length,1)),a=Bt(0,o),u=Bt(n,2),f=new Array(s),l=r(Fe(a,e,u,Bt(0,1),c));f[0]=r(Fe(l,Bt(1,1),c));for(let b=1;b<=s;b++){const h=[V1(l,f[b-1]),Bt(b+1,1),c];f[b]=r(Fe(...h))}return Fe(...f).slice(0,n)}function K1(e,t,n,r,i){if(Dt(e),Dt(t),Rn(n),t.length>255){const o=Math.ceil(2*r/8);t=i.create({dkLen:o}).update(Xi("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(Bt(n,2)).update(t).update(Bt(t.length,1)).digest()}function va(e,t,n){Nn(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:o,hash:s,expand:c,DST:a}=n;Dt(e),Rn(t);const u=typeof a=="string"?Xi(a):a,f=r.toString(2).length,l=Math.ceil((f+i)/8),d=t*o*l;let b;if(c==="xmd")b=q1(e,u,d,s);else if(c==="xof")b=K1(e,u,d,i,s);else if(c==="_internal_pass")b=e;else throw new Error('expand must be "xmd" or "xof"');const h=new Array(t);for(let g=0;g<t;g++){const E=new Array(o);for(let U=0;U<o;U++){const P=l*(U+g*o),x=b.subarray(P,P+l);E[U]=oe(j1(x),r)}h[g]=E}return h}function W1(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,i)=>{const[o,s,c,a]=n.map(l=>l.reduce((d,b)=>e.add(e.mul(d,r),b))),[u,f]=Ar(e,[s,a],!0);return r=e.mul(o,u),i=e.mul(i,e.mul(c,f)),{x:r,y:i}}}function Z1(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function r(o){return e.fromAffine(t(o))}function i(o){const s=o.clearCofactor();return s.equals(e.ZERO)?e.ZERO:(s.assertValidity(),s)}return{defaults:n,hashToCurve(o,s){const c=va(o,2,{...n,DST:n.DST,...s}),a=r(c[0]),u=r(c[1]);return i(a.add(u))},encodeToCurve(o,s){const c=va(o,1,{...n,DST:n.encodeDST,...s});return i(r(c[0]))},mapToCurve(o){if(!Array.isArray(o))throw new Error("expected array of bigints");for(const s of o)if(typeof s!="bigint")throw new Error("expected array of bigints");return i(r(o))}}}const Fn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Br=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fo=BigInt(0),Pn=BigInt(1),Sr=BigInt(2),Da=(e,t)=>(e+t/Sr)/t;function Aa(e){const t=Fn,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),u=e*e*e%t,f=u*u*e%t,l=Pe(f,n,t)*f%t,d=Pe(l,n,t)*f%t,b=Pe(d,Sr,t)*u%t,h=Pe(b,i,t)*b%t,g=Pe(h,o,t)*h%t,E=Pe(g,c,t)*g%t,U=Pe(E,a,t)*E%t,P=Pe(U,c,t)*g%t,x=Pe(P,n,t)*f%t,D=Pe(x,s,t)*h%t,B=Pe(D,r,t)*u%t,F=Pe(B,Sr,t);if(!St.eql(St.sqr(F),e))throw new Error("Cannot find square root");return F}const St=to(Fn,void 0,void 0,{sqrt:Aa}),Ln=H1({a:fo,b:BigInt(7),Fp:St,n:Br,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Br,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Pn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),c=Da(o*e,t),a=Da(-r*e,t);let u=oe(e-c*n-a*i,t),f=oe(-c*r-a*o,t);const l=u>s,d=f>s;if(l&&(u=t-u),d&&(f=t-f),u>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:d,k2:f}}}},vt),Ba={};function _r(e,...t){let n=Ba[e];if(n===void 0){const r=vt(Uint8Array.from(e,i=>i.charCodeAt(0)));n=Fe(r,r),Ba[e]=n}return vt(Fe(n,...t))}const uo=e=>e.toRawBytes(!0).slice(1),lo=e=>Kt(e,32),ho=e=>oe(e,Fn),kn=e=>oe(e,Br),go=Ln.ProjectivePoint,G1=(e,t,n)=>go.BASE.multiplyAndAddUnsafe(e,t,n);function bo(e){let t=Ln.utils.normPrivateKeyToScalar(e),n=go.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:kn(-t),bytes:uo(n)}}function Sa(e){Wt("x",e,Pn,Fn);const t=ho(e*e),n=ho(t*e+BigInt(7));let r=Aa(n);r%Sr!==fo&&(r=ho(-r));const i=new go(e,r,Pn);return i.assertValidity(),i}const fn=Ze;function _a(...e){return kn(fn(_r("BIP0340/challenge",...e)))}function Y1(e){return bo(e).bytes}function X1(e,t,n=wt(32)){const r=ce("message",e),{bytes:i,scalar:o}=bo(t),s=ce("auxRand",n,32),c=lo(o^fn(_r("BIP0340/aux",s))),a=_r("BIP0340/nonce",c,i,r),u=kn(fn(a));if(u===fo)throw new Error("sign failed: k is zero");const{bytes:f,scalar:l}=bo(u),d=_a(f,i,r),b=new Uint8Array(64);if(b.set(f,0),b.set(lo(kn(l+d*o)),32),!Ia(b,r,i))throw new Error("sign: Invalid signature produced");return b}function Ia(e,t,n){const r=ce("signature",e,64),i=ce("message",t),o=ce("publicKey",n,32);try{const s=Sa(fn(o)),c=fn(r.subarray(0,32));if(!Tn(c,Pn,Fn))return!1;const a=fn(r.subarray(32,64));if(!Tn(a,Pn,Br))return!1;const u=_a(lo(c),uo(s),i),f=G1(s,a,kn(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==c)}catch{return!1}}const J1={getPublicKey:Y1,sign:X1,verify:Ia,utils:{randomPrivateKey:Ln.utils.randomPrivateKey,lift_x:Sa,pointToBytes:uo,numberToBytesBE:Kt,bytesToNumberBE:Ze,taggedHash:_r,mod:oe}},Q1=W1(St,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),eg=M1(St,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:St.create(BigInt("-11"))}),po=Z1(Ln.ProjectivePoint,e=>{const{x:t,y:n}=eg(St.create(e[0]));return Q1(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:St.ORDER,m:1,k:128,expand:"xmd",hash:vt});var tg=Object.freeze({__proto__:null,secp256k1:Ln,schnorr:J1,secp256k1_hasher:po,hashToCurve:po.hashToCurve,encodeToCurve:po.encodeToCurve});function ng(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let u=0;u<t.length;u++)t[u]=255;for(let u=0;u<e.length;u++){const f=e.charAt(u),l=f.charCodeAt(0);if(t[l]!==255)throw new TypeError(f+" is ambiguous");t[l]=u}const n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function s(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let f=0,l=0,d=0;const b=u.length;for(;d!==b&&u[d]===0;)d++,f++;const h=(b-d)*o+1>>>0,g=new Uint8Array(h);for(;d!==b;){let P=u[d],x=0;for(let D=h-1;(P!==0||x<l)&&D!==-1;D--,x++)P+=256*g[D]>>>0,g[D]=P%n>>>0,P=P/n>>>0;if(P!==0)throw new Error("Non-zero carry");l=x,d++}let E=h-l;for(;E!==h&&g[E]===0;)E++;let U=r.repeat(f);for(;E<h;++E)U+=e.charAt(g[E]);return U}function c(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let f=0,l=0,d=0;for(;u[f]===r;)l++,f++;const b=(u.length-f)*i+1>>>0,h=new Uint8Array(b);for(;f<u.length;){const P=u.charCodeAt(f);if(P>255)return;let x=t[P];if(x===255)return;let D=0;for(let B=b-1;(x!==0||D<d)&&B!==-1;B--,D++)x+=n*h[B]>>>0,h[B]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");d=D,f++}let g=b-d;for(;g!==b&&h[g]===0;)g++;const E=new Uint8Array(l+(b-g));let U=l;for(;g!==b;)E[U++]=h[g++];return E}function a(u){const f=c(u);if(f)return f;throw new Error("Non-base"+n+" character")}return{encode:s,decodeUnsafe:c,decode:a}}var rg="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Mn=ng(rg);const ig=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),re=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),M=new Uint32Array(32);function _t(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=M[2*e],u=M[2*e+1],f=M[2*t],l=M[2*t+1],d=M[2*n],b=M[2*n+1],h=M[2*r],g=M[2*r+1],E=vi(a,f,s);u=Di(E,u,l,c),a=E|0,{Dh:g,Dl:h}={Dh:g^u,Dl:h^a},{Dh:g,Dl:h}={Dh:Mh(g,h),Dl:zh(g)},{h:b,l:d}=ze(b,d,g,h),{Bh:l,Bl:f}={Bh:l^b,Bl:f^d},{Bh:l,Bl:f}={Bh:dt(l,f,24),Bl:ht(l,f,24)},M[2*e]=a,M[2*e+1]=u,M[2*t]=f,M[2*t+1]=l,M[2*n]=d,M[2*n+1]=b,M[2*r]=h,M[2*r+1]=g}function It(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=M[2*e],u=M[2*e+1],f=M[2*t],l=M[2*t+1],d=M[2*n],b=M[2*n+1],h=M[2*r],g=M[2*r+1],E=vi(a,f,s);u=Di(E,u,l,c),a=E|0,{Dh:g,Dl:h}={Dh:g^u,Dl:h^a},{Dh:g,Dl:h}={Dh:dt(g,h,16),Dl:ht(g,h,16)},{h:b,l:d}=ze(b,d,g,h),{Bh:l,Bl:f}={Bh:l^b,Bl:f^d},{Bh:l,Bl:f}={Bh:xn(l,f,63),Bl:vn(l,f,63)},M[2*e]=a,M[2*e+1]=u,M[2*t]=f,M[2*t+1]=l,M[2*n]=d,M[2*n+1]=b,M[2*r]=h,M[2*r+1]=g}function og(e,t={},n,r,i){if(Ke(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:o,salt:s,personalization:c}=t;if(o!==void 0&&(o.length<1||o.length>n))throw new Error("key length must be undefined or 1.."+n);if(s!==void 0&&s.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}class sg extends dr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ke(t),Ke(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=Dn(this.buffer)}update(t){gt(this),t=He(t),$e(t);const{blockLen:n,buffer:r,buffer32:i}=this,o=t.length,s=t.byteOffset,c=t.buffer;for(let a=0;a<o;){this.pos===n&&(bt(i),this.compress(i,0,!1),bt(i),this.pos=0);const u=Math.min(n-this.pos,o-a),f=s+a;if(u===n&&!(f%4)&&a+u<o){const l=new Uint32Array(c,f,Math.floor((o-a)/4));bt(l);for(let d=0;a+n<o;d+=i.length,a+=n)this.length+=n,this.compress(l,d,!1);bt(l);continue}r.set(t.subarray(a,a+u),this.pos),this.pos+=u,this.length+=u,a+=u}return this}digestInto(t){gt(this),Si(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,Re(this.buffer.subarray(n)),bt(r),this.compress(r,0,!0),bt(r);const i=Dn(t);this.get().forEach((o,s)=>i[s]=Qe(o))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:o,outputLen:s,pos:c}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.buffer.set(n),t.destroyed=o,t.finished=i,t.length=r,t.pos=c,t.outputLen=s,t}clone(){return this._cloneInto()}}class cg extends sg{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=re[0]|0,this.v0h=re[1]|0,this.v1l=re[2]|0,this.v1h=re[3]|0,this.v2l=re[4]|0,this.v2h=re[5]|0,this.v3l=re[6]|0,this.v3h=re[7]|0,this.v4l=re[8]|0,this.v4h=re[9]|0,this.v5l=re[10]|0,this.v5h=re[11]|0,this.v6l=re[12]|0,this.v6h=re[13]|0,this.v7l=re[14]|0,this.v7h=re[15]|0,og(n,t,64,16,16);let{key:r,personalization:i,salt:o}=t,s=0;if(r!==void 0&&(r=He(r),s=r.length),this.v0l^=this.outputLen|s<<8|65536|1<<24,o!==void 0){o=He(o);const c=Dn(o);this.v4l^=Qe(c[0]),this.v4h^=Qe(c[1]),this.v5l^=Qe(c[2]),this.v5h^=Qe(c[3])}if(i!==void 0){i=He(i);const c=Dn(i);this.v6l^=Qe(c[0]),this.v6h^=Qe(c[1]),this.v7l^=Qe(c[2]),this.v7h^=Qe(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:o,v2h:s,v3l:c,v3h:a,v4l:u,v4h:f,v5l:l,v5h:d,v6l:b,v6h:h,v7l:g,v7h:E}=this;return[t,n,r,i,o,s,c,a,u,f,l,d,b,h,g,E]}set(t,n,r,i,o,s,c,a,u,f,l,d,b,h,g,E){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=o|0,this.v2h=s|0,this.v3l=c|0,this.v3h=a|0,this.v4l=u|0,this.v4h=f|0,this.v5l=l|0,this.v5h=d|0,this.v6l=b|0,this.v6h=h|0,this.v7l=g|0,this.v7h=E|0}compress(t,n,r){this.get().forEach((a,u)=>M[u]=a),M.set(re,16);let{h:i,l:o}=wc(BigInt(this.length));M[24]=re[8]^o,M[25]=re[9]^i,r&&(M[28]=~M[28],M[29]=~M[29]);let s=0;const c=ig;for(let a=0;a<12;a++)_t(0,4,8,12,t,n+2*c[s++]),It(0,4,8,12,t,n+2*c[s++]),_t(1,5,9,13,t,n+2*c[s++]),It(1,5,9,13,t,n+2*c[s++]),_t(2,6,10,14,t,n+2*c[s++]),It(2,6,10,14,t,n+2*c[s++]),_t(3,7,11,15,t,n+2*c[s++]),It(3,7,11,15,t,n+2*c[s++]),_t(0,5,10,15,t,n+2*c[s++]),It(0,5,10,15,t,n+2*c[s++]),_t(1,6,11,12,t,n+2*c[s++]),It(1,6,11,12,t,n+2*c[s++]),_t(2,7,8,13,t,n+2*c[s++]),It(2,7,8,13,t,n+2*c[s++]),_t(3,4,9,14,t,n+2*c[s++]),It(3,4,9,14,t,n+2*c[s++]);this.v0l^=M[0]^M[16],this.v0h^=M[1]^M[17],this.v1l^=M[2]^M[18],this.v1h^=M[3]^M[19],this.v2l^=M[4]^M[20],this.v2h^=M[5]^M[21],this.v3l^=M[6]^M[22],this.v3h^=M[7]^M[23],this.v4l^=M[8]^M[24],this.v4h^=M[9]^M[25],this.v5l^=M[10]^M[26],this.v5h^=M[11]^M[27],this.v6l^=M[12]^M[28],this.v6h^=M[13]^M[29],this.v7l^=M[14]^M[30],this.v7h^=M[15]^M[31],Re(M)}destroy(){this.destroyed=!0,Re(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ag=Qh(e=>new cg(e));function fg(e){const t=e.length;let n=0,r=0;for(;r<t;){let i=e.charCodeAt(r++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&r<t){const o=e.charCodeAt(r);(o&64512)===56320&&(++r,i=((i&1023)<<10)+(o&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function ug(e,t,n){const r=e.length;let i=n,o=0;for(;o<r;){let s=e.charCodeAt(o++);if((s&4294967168)===0){t[i++]=s;continue}else if((s&4294965248)===0)t[i++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&o<r){const c=e.charCodeAt(o);(c&64512)===56320&&(++o,s=((s&1023)<<10)+(c&1023)+65536)}(s&4294901760)===0?(t[i++]=s>>12&15|224,t[i++]=s>>6&63|128):(t[i++]=s>>18&7|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128)}t[i++]=s&63|128}}const lg=new TextEncoder,dg=50;function hg(e,t,n){lg.encodeInto(e,t.subarray(n))}function gg(e,t,n){e.length>dg?hg(e,t,n):ug(e,t,n)}const bg=4096;function Ua(e,t,n){let r=t;const i=r+n,o=[];let s="";for(;r<i;){const c=e[r++];if((c&128)===0)o.push(c);else if((c&224)===192){const a=e[r++]&63;o.push((c&31)<<6|a)}else if((c&240)===224){const a=e[r++]&63,u=e[r++]&63;o.push((c&31)<<12|a<<6|u)}else if((c&248)===240){const a=e[r++]&63,u=e[r++]&63,f=e[r++]&63;let l=(c&7)<<18|a<<12|u<<6|f;l>65535&&(l-=65536,o.push(l>>>10&1023|55296),l=56320|l&1023),o.push(l)}else o.push(c);o.length>=bg&&(s+=String.fromCharCode(...o),o.length=0)}return o.length>0&&(s+=String.fromCharCode(...o)),s}const pg=new TextDecoder,wg=200;function yg(e,t,n){const r=e.subarray(t,t+n);return pg.decode(r)}function mg(e,t,n){return n>wg?yg(e,t,n):Ua(e,t,n)}class Ir{constructor(t,n){this.type=t,this.data=n}}class _e extends Error{constructor(t){super(t);const n=Object.create(_e.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:_e.name})}}const zn=4294967295;function Eg(e,t,n){const r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function Oa(e,t,n){const r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function Ca(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function xg(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const vg=-1,Dg=4294967296-1,Ag=17179869184-1;function Bg({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=Ag)if(t===0&&e<=Dg){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,i=new Uint8Array(8),o=new DataView(i.buffer);return o.setUint32(0,t<<2|n&3),o.setUint32(4,r),i}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),Oa(r,4,e),n}}function Sg(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function _g(e){if(e instanceof Date){const t=Sg(e);return Bg(t)}else return null}function Ig(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),i=(n&3)*4294967296+r,o=n>>>2;return{sec:i,nsec:o}}case 12:{const n=Ca(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new _e(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function Ug(e){const t=Ig(e);return new Date(t.sec*1e3+t.nsec/1e6)}const Og={type:vg,encode:_g,decode:Ug};class Ur{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Og)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const i=-1-t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const o=i(t,n);if(o!=null){const s=-1-r;return new Ir(s,o)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const o=i(t,n);if(o!=null){const s=r;return new Ir(s,o)}}}return t instanceof Ir?t:null}decode(t,n,r){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(t,n,r):new Ir(n,t)}}Ur.defaultCodec=new Ur;function Cg(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function wo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Cg(e)?new Uint8Array(e):Uint8Array.from(e)}const Tg=100,Ng=2048;class yo{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??Ur.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??Tg,this.initialBufferSize=t?.initialBufferSize??Ng,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new yo({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=fg(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),gg(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=wo(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of t)this.doEncode(i,n+1)}countWithoutUndefined(t,n){let r=0;for(const i of n)t[i]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const o of r){const s=t[o];this.ignoreUndefined&&s===void 0||(this.encodeString(o),this.doEncode(s,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),Eg(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),Oa(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}}function $g(e,t){return new yo(t).encodeSharedRef(e)}function mo(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const Rg=16,Fg=16;class Pg{constructor(t=Rg,n=Fg){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const i=this.caches[r-1];e:for(const o of i){const s=o.bytes;for(let c=0;c<r;c++)if(s[c]!==t[n+c])continue e;return o.str}return null}store(t,n){const r=this.caches[t.length-1],i={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(t,n,r){const i=this.find(t,n,r);if(i!=null)return this.hit++,i;this.miss++;const o=Ua(t,n,r),s=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(s,o),o}}const Eo="array",Hn="map_key",Ta="map_value",Lg=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new _e("The type of key must be string or number but "+typeof e)};class kg{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=Eo,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=Hn,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===Eo){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===Hn||t.type===Ta){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const jn=-1,xo=new DataView(new ArrayBuffer(0)),Mg=new Uint8Array(xo.buffer);try{xo.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Na=new RangeError("Insufficient data"),zg=new Pg;class vo{constructor(t){this.totalPos=0,this.pos=0,this.view=xo,this.bytes=Mg,this.headByte=jn,this.stack=new kg,this.entered=!1,this.extensionCodec=t?.extensionCodec??Ur.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??zn,this.maxBinLength=t?.maxBinLength??zn,this.maxArrayLength=t?.maxArrayLength??zn,this.maxMapLength=t?.maxMapLength??zn,this.maxExtLength=t?.maxExtLength??zn,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:zg,this.mapKeyConverter=t?.mapKeyConverter??Lg}clone(){return new vo({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=jn,this.stack.reset()}setBuffer(t){const n=wo(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===jn&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=wo(t),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const c of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{r=this.doDecodeSync(),n=!0}catch(a){if(!(a instanceof RangeError))throw a}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:o,totalPos:s}=this;throw new RangeError(`Insufficient data in parsing ${mo(i)} at ${s} (${o} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,i=-1;for await(const o of t){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(s){if(!(s instanceof RangeError))throw s}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const i=t-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t<160){const i=t-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=t-160;n=this.decodeString(i,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(t===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(t===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(t===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(t===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(t===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(t===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(t===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new _e(`Unrecognized type byte: ${mo(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===Eo)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===Hn){if(n==="__proto__")throw new _e("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=Ta;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=Hn;continue e}}return n}}readHeadByte(){return this.headByte===jn&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=jn}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new _e(`Unrecognized array type byte: ${mo(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new _e(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new _e(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new _e(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw Na;const r=this.pos+n;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?i=this.keyDecoder.decode(this.bytes,r,t):i=mg(this.bytes,r,t),this.pos+=n+t,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Hn:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new _e(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw Na;const r=this.pos+n,i=this.bytes.subarray(r,r+t);return this.pos+=n+t,i}decodeExtension(t,n){if(t>this.maxExtLength)throw new _e(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),i=this.decodeBinary(t,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=xg(this.view,this.pos);return this.pos+=8,t}readI64(){const t=Ca(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}}function Hg(e,t){return new vo(t).decode(e)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Or(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Do(e,...t){if(!Or(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function $a(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function Ra(e){if(typeof e!="function")throw new Error("function expected");return!0}function Ut(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Vn(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Cr(e){if(!Array.isArray(e))throw new Error("array expected")}function Tr(e,t){if(!$a(!0,t))throw new Error(`${e}: array of strings expected`)}function Ao(e,t){if(!$a(!1,t))throw new Error(`${e}: array of numbers expected`)}function Ie(...e){const t=o=>o,n=(o,s)=>c=>o(s(c)),r=e.map(o=>o.encode).reduceRight(n,t),i=e.map(o=>o.decode).reduce(n,t);return{encode:r,decode:i}}function Ue(e){const t=typeof e=="string"?e.split(""):e,n=t.length;Tr("alphabet",t);const r=new Map(t.map((i,o)=>[i,o]));return{encode:i=>(Cr(i),i.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${e}`);return t[o]})),decode:i=>(Cr(i),i.map(o=>{Ut("alphabet.decode",o);const s=r.get(o);if(s===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${e}`);return s}))}}function Oe(e=""){return Ut("join",e),{encode:t=>(Tr("join.decode",t),t.join(e)),decode:t=>(Ut("join.decode",t),t.split(e))}}function Nr(e,t="="){return Vn(e),Ut("padding",t),{encode(n){for(Tr("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){Tr("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function Fa(e){return Ra(e),{encode:t=>t,decode:t=>e(t)}}function Pa(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(Cr(e),!e.length)return[];let r=0;const i=[],o=Array.from(e,c=>{if(Vn(c),c<0||c>=t)throw new Error(`invalid integer: ${c}`);return c}),s=o.length;for(;;){let c=0,a=!0;for(let u=r;u<s;u++){const f=o[u],l=t*c,d=l+f;if(!Number.isSafeInteger(d)||l/t!==c||d-f!==l)throw new Error("convertRadix: carry overflow");const b=d/n;c=d%n;const h=Math.floor(b);if(o[u]=h,!Number.isSafeInteger(h)||h*n+c!==d)throw new Error("convertRadix: carry overflow");if(a)h?a=!1:r=u;else continue}if(i.push(c),a)break}for(let c=0;c<e.length-1&&e[c]===0;c++)i.push(0);return i.reverse()}const La=(e,t)=>t===0?e:La(t,e%t),$r=(e,t)=>e+(t-La(e,t)),Rr=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function Bo(e,t,n,r){if(Cr(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if($r(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${$r(t,n)}`);let i=0,o=0;const s=Rr[t],c=Rr[n]-1,a=[];for(const u of e){if(Vn(u),u>=s)throw new Error(`convertRadix2: invalid data word=${u} from=${t}`);if(i=i<<t|u,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)a.push((i>>o-n&c)>>>0);const f=Rr[o];if(f===void 0)throw new Error("invalid carry");i&=f-1}if(i=i<<n-o&c,!r&&o>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function jg(e){Vn(e);const t=2**8;return{encode:n=>{if(!Or(n))throw new Error("radix.encode input should be Uint8Array");return Pa(Array.from(n),t,e)},decode:n=>(Ao("radix.decode",n),Uint8Array.from(Pa(n,e,t)))}}function Le(e,t=!1){if(Vn(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if($r(8,e)>32||$r(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Or(n))throw new Error("radix2.encode input should be Uint8Array");return Bo(Array.from(n),8,e,!t)},decode:n=>(Ao("radix2.decode",n),Uint8Array.from(Bo(n,e,8,t)))}}function ka(e){return Ra(e),function(...t){try{return e.apply(null,t)}catch{}}}const Vg=Ie(Le(5),Ue("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Nr(5),Oe("")),Ma=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",za=(e,t)=>{Ut("base64",e);const n=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,r=t?"base64url":"base64";if(e.length>0&&!n.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:r,lastChunkHandling:"strict"})},So=e=>Ie(jg(58),Ue(e),Oe("")),_o=Ie(Ue("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Oe("")),Ha=[996825010,642813549,513874426,1027748829,705979059];function qn(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<Ha.length;r++)(t>>r&1)===1&&(n^=Ha[r]);return n}function ja(e,t,n=1){const r=e.length;let i=1;for(let o=0;o<r;o++){const s=e.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);i=qn(i)^s>>5}i=qn(i);for(let o=0;o<r;o++)i=qn(i)^e.charCodeAt(o)&31;for(let o of t)i=qn(i)^o;for(let o=0;o<6;o++)i=qn(i);return i^=n,_o.encode(Bo([i%Rr[30]],30,5,!1))}function Va(e){const t=e==="bech32"?1:734539939,n=Le(5),r=n.decode,i=n.encode,o=ka(r);function s(l,d,b=90){Ut("bech32.encode prefix",l),Or(d)&&(d=Array.from(d)),Ao("bech32.encode",d);const h=l.length;if(h===0)throw new TypeError(`Invalid prefix length ${h}`);const g=h+7+d.length;if(b!==!1&&g>b)throw new TypeError(`Length ${g} exceeds limit ${b}`);const E=l.toLowerCase(),U=ja(E,d,t);return`${E}1${_o.encode(d)}${U}`}function c(l,d=90){Ut("bech32.decode input",l);const b=l.length;if(b<8||d!==!1&&b>d)throw new TypeError(`invalid string length: ${b} (${l}). Expected (8..${d})`);const h=l.toLowerCase();if(l!==h&&l!==l.toUpperCase())throw new Error("String must be lowercase or uppercase");const g=h.lastIndexOf("1");if(g===0||g===-1)throw new Error('Letter "1" must be present between prefix and data only');const E=h.slice(0,g),U=h.slice(g+1);if(U.length<6)throw new Error("Data must be at least 6 characters long");const P=_o.decode(U).slice(0,-6),x=ja(E,P,t);if(!U.endsWith(x))throw new Error(`Invalid checksum in ${l}: expected "${x}"`);return{prefix:E,words:P}}const a=ka(c);function u(l){const{prefix:d,words:b}=c(l,!1);return{prefix:d,words:b,bytes:r(b)}}function f(l,d){return s(l,i(d))}return{encode:s,decode:c,encodeFromBytes:f,decodeToBytes:u,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:o,toWords:i}}const qg=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Kg={encode(e){return Do(e),e.toHex()},decode(e){return Ut("hex",e),Uint8Array.fromHex(e)}},Wg="https://rpc.walletconnect.org/v1";function Io(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(Oi(n)).toString("hex")}async function qa(e,t,n,r,i,o){switch(n.t){case"eip191":return await Ka(e,t,n.s);case"eip1271":return await Wa(e,t,n.s,r,i,o);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Ka(e,t,n){return(await B0({hash:Io(t),signature:n})).toLowerCase()===e.toLowerCase()}async function Wa(e,t,n,r,i,o){const s=ri(r);if(!s.namespace||!s.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const c="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",u=n.substring(2),f=(u.length/2).toString(16).padStart(64,"0"),l=(t.startsWith("0x")?t:Io(t)).substring(2),d=c+l+a+f+u,b=await fetch(`${o||Wg}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Zg(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:d},"latest"]})}),{result:h}=await b.json();return h?h.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function Zg(){return Date.now()+Math.floor(Math.random()*1e3)}function Gg(e){const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const o=Buffer.from(e,"base64").slice(1,65);return Mn.encode(o)}function Yg(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(o=>o.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const i=ag(r,{dkLen:32});return Mn.encode(i)}function Xg(e){const t=new Uint8Array(vt(Za(e)));return Mn.encode(t)}function Za(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function Jg(e){const t=Buffer.from(e,"base64"),n=Hg(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=$g(n),i=Buffer.from("TX"),o=Buffer.concat([i,Buffer.from(r)]),s=P0(o);return Vg.encode(s).replace(/=+$/,"")}function Uo(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function Qg(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(Uo(t.length)),i.push(t),i.push(Buffer.from([18])),i.push(Uo(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(Uo(r.length)),i.push(r);const o=Buffer.concat(i),s=vt(o);return Buffer.from(s).toString("hex").toUpperCase()}var eb=Object.defineProperty,tb=Object.defineProperties,nb=Object.getOwnPropertyDescriptors,Ga=Object.getOwnPropertySymbols,rb=Object.prototype.hasOwnProperty,ib=Object.prototype.propertyIsEnumerable,Ya=(e,t,n)=>t in e?eb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oo=(e,t)=>{for(var n in t||(t={}))rb.call(t,n)&&Ya(e,n,t[n]);if(Ga)for(var n of Ga(t))ib.call(t,n)&&Ya(e,n,t[n]);return e},Xa=(e,t)=>tb(e,nb(t));const ob="did:pkh:",Fr=e=>e?.split(":"),Ja=e=>{const t=e&&Fr(e);if(t)return e.includes(ob)?t[3]:t[1]},Qa=e=>{const t=e&&Fr(e);if(t)return t[2]+":"+t[3]},Co=e=>{const t=e&&Fr(e);if(t)return t.pop()};async function sb(e){const{cacao:t,projectId:n}=e,{s:r,p:i}=t,o=ef(i,i.iss),s=Co(i.iss);return await qa(s,o,r,Qa(i.iss),n)}const ef=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=Co(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const o=`URI: ${e.aud||e.uri}`,s=`Version: ${e.version}`,c=`Chain ID: ${Ja(t)}`,a=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,f=e.exp?`Expiration Time: ${e.exp}`:void 0,l=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,b=e.resources?`Resources:${e.resources.map(g=>`
- ${g}`).join("")}`:void 0,h=Lr(e.resources);if(h){const g=Ot(h);i=$o(i,g)}return[n,r,"",i,"",o,s,c,a,u,f,l,d,b].filter(g=>g!=null).join(`
`)};function cb(e,t,n){return n.includes("did:pkh:")||(n=`did:pkh:${n}`),{h:{t:"caip122"},p:{iss:n,domain:e.domain,aud:e.aud,version:e.version,nonce:e.nonce,iat:e.iat,statement:e.statement,requestId:e.requestId,resources:e.resources,nbf:e.nbf,exp:e.exp},s:t}}function ab(e){var t;const{authPayload:n,chains:r,methods:i}=e,o=n.statement||"";if(!(r!=null&&r.length))return n;const s=n.chains,c=Ei(s,r);if(!(c!=null&&c.length))throw new Error("No supported chains");const a=tf(n.resources);if(!a)return n;Ge(a);const u=nf(a,"eip155");let f=n?.resources||[];if(u!=null&&u.length){const l=rf(u),d=Ei(l,i);if(!(d!=null&&d.length))throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(l)}, supported: ${JSON.stringify(i)}`);const b=To("request",d,{chains:c}),h=af(a,"eip155",b);f=((t=n?.resources)==null?void 0:t.slice(0,-1))||[],f.push(Pr(h))}return Xa(Oo({},n),{statement:uf(o,Lr(f)),chains:c,resources:n!=null&&n.resources||f.length>0?f:void 0})}function tf(e){const t=Lr(e);if(t&&No(t))return Ot(t)}function fb(e,t){var n;return(n=e?.att)==null?void 0:n.hasOwnProperty(t)}function nf(e,t){var n,r;return(n=e?.att)!=null&&n[t]?Object.keys((r=e?.att)==null?void 0:r[t]):[]}function ub(e){return e?.map(t=>Object.keys(t))||[]}function rf(e){return e?.map(t=>{var n;return(n=t.split("/"))==null?void 0:n[1]})||[]}function of(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function sf(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function Ge(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const o=r[i];if(!Array.isArray(o))throw new Error(`Ability limits ${i} must be an array of objects, found: ${o}`);if(!o.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);o.forEach(s=>{if(typeof s!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${s}`)})})})}function cf(e,t,n,r={}){return n?.sort((i,o)=>i.localeCompare(o)),{att:{[e]:To(t,n,r)}}}function af(e,t,n){var r;e.att[t]=Oo({},n);const i=(r=Object.keys(e.att))==null?void 0:r.sort((s,c)=>s.localeCompare(c)),o={att:{}};return i.reduce((s,c)=>(s.att[c]=e.att[c],s),o)}function To(e,t,n={}){t=t?.sort((i,o)=>i.localeCompare(o));const r=t.map(i=>({[`${e}/${i}`]:[n]}));return Object.assign({},...r)}function Pr(e){return Ge(e),`urn:recap:${of(e).replace(/=/g,"")}`}function Ot(e){const t=sf(e.replace("urn:recap:",""));return Ge(t),t}function lb(e,t,n){const r=cf(e,t,n);return Pr(r)}function No(e){return e&&e.includes("urn:recap:")}function db(e,t){const n=Ot(e),r=Ot(t),i=ff(n,r);return Pr(i)}function ff(e,t){Ge(e),Ge(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((i,o)=>i.localeCompare(o)),r={att:{}};return n.forEach(i=>{var o,s;Object.keys(((o=e.att)==null?void 0:o[i])||{}).concat(Object.keys(((s=t.att)==null?void 0:s[i])||{})).sort((c,a)=>c.localeCompare(a)).forEach(c=>{var a,u;r.att[i]=Xa(Oo({},r.att[i]),{[c]:((a=e.att[i])==null?void 0:a[c])||((u=t.att[i])==null?void 0:u[c])})})}),r}function $o(e="",t){Ge(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let i=0;Object.keys(t.att).forEach(c=>{const a=Object.keys(t.att[c]).map(l=>({ability:l.split("/")[0],action:l.split("/")[1]}));a.sort((l,d)=>l.action.localeCompare(d.action));const u={};a.forEach(l=>{u[l.ability]||(u[l.ability]=[]),u[l.ability].push(l.action)});const f=Object.keys(u).map(l=>(i++,`(${i}) '${l}': '${u[l].join("', '")}' for '${c}'.`));r.push(f.join(", ").replace(".,","."))});const o=r.join(" "),s=`${n}${o}`;return`${e?e+" ":""}${s}`}function hb(e){var t;const n=Ot(e);Ge(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function gb(e){const t=Ot(e);Ge(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(i=>{var o;(o=i?.[0])!=null&&o.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function uf(e,t){if(!t)return e;const n=Ot(t);return Ge(n),$o(e,n)}function Lr(e){if(!e)return;const t=e?.[e.length-1];return No(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function lf(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ro(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function Fo(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ae(e,...t){if(!lf(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function df(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function bb(e,t){Ae(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ct(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function un(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function pb(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const wb=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function yb(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Po(e){if(typeof e=="string")e=yb(e);else if(lf(e))e=Lo(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function mb(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function Eb(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const xb=(e,t)=>{function n(r,...i){if(Ae(r),!wb)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const f=i[0];if(!f)throw new Error("nonce / iv required");e.varSizeNonce?Ae(f):Ae(f,e.nonceLength)}const o=e.tagLength;o&&i[1]!==void 0&&Ae(i[1]);const s=t(r,...i),c=(f,l)=>{if(l!==void 0){if(f!==2)throw new Error("cipher output not supported");Ae(l)}};let a=!1;return{encrypt(f,l){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,Ae(f),c(s.encrypt.length,l),s.encrypt(f,l)},decrypt(f,l){if(Ae(f),o&&f.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return c(s.decrypt.length,l),s.decrypt(f,l)}}}return Object.assign(n,e),n};function hf(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!Db(t))throw new Error("invalid output, must be aligned");return t}function gf(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,u=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+u,c,r)}function vb(e,t,n){Ro(n);const r=new Uint8Array(16),i=pb(r);return gf(i,0,BigInt(t),n),gf(i,8,BigInt(e),n),r}function Db(e){return e.byteOffset%4===0}function Lo(e){return Uint8Array.from(e)}const bf=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),Ab=bf("expand 16-byte k"),Bb=bf("expand 32-byte k"),Sb=Ct(Ab),_b=Ct(Bb);function G(e,t){return e<<t|e>>>32-t}function ko(e){return e.byteOffset%4===0}const kr=64,Ib=16,pf=2**32-1,wf=new Uint32Array;function Ub(e,t,n,r,i,o,s,c){const a=i.length,u=new Uint8Array(kr),f=Ct(u),l=ko(i)&&ko(o),d=l?Ct(i):wf,b=l?Ct(o):wf;for(let h=0;h<a;s++){if(e(t,n,r,f,s,c),s>=pf)throw new Error("arx: counter overflow");const g=Math.min(kr,a-h);if(l&&g===kr){const E=h/4;if(h%4!==0)throw new Error("arx: invalid block position");for(let U=0,P;U<Ib;U++)P=E+U,b[P]=d[P]^f[U];h+=kr;continue}for(let E=0,U;E<g;E++)U=h+E,o[U]=i[U]^u[E];h+=g}}function Ob(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:o,rounds:s}=mb({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Fo(i),Fo(s),Ro(o),Ro(n),(c,a,u,f,l=0)=>{Ae(c),Ae(a),Ae(u);const d=u.length;if(f===void 0&&(f=new Uint8Array(d)),Ae(f),Fo(l),l<0||l>=pf)throw new Error("arx: counter overflow");if(f.length<d)throw new Error(`arx: output (${f.length}) is shorter than data (${d})`);const b=[];let h=c.length,g,E;if(h===32)b.push(g=Lo(c)),E=_b;else if(h===16&&n)g=new Uint8Array(32),g.set(c),g.set(c,16),E=Sb,b.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${h}`);ko(a)||b.push(a=Lo(a));const U=Ct(g);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(E,U,Ct(a.subarray(0,16)),U),a=a.subarray(16)}const P=16-i;if(P!==a.length)throw new Error(`arx: nonce must be ${P} or 16 bytes`);if(P!==12){const D=new Uint8Array(12);D.set(a,o?0:12-a.length),a=D,b.push(a)}const x=Ct(a);return Ub(e,E,U,x,u,f,l,s),un(...b),f}}const ae=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class Cb{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Po(t),Ae(t,32);const n=ae(t,0),r=ae(t,2),i=ae(t,4),o=ae(t,6),s=ae(t,8),c=ae(t,10),a=ae(t,12),u=ae(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let f=0;f<8;f++)this.pad[f]=ae(t,16+2*f)}process(t,n,r=!1){const i=r?0:2048,{h:o,r:s}=this,c=s[0],a=s[1],u=s[2],f=s[3],l=s[4],d=s[5],b=s[6],h=s[7],g=s[8],E=s[9],U=ae(t,n+0),P=ae(t,n+2),x=ae(t,n+4),D=ae(t,n+6),B=ae(t,n+8),F=ae(t,n+10),R=ae(t,n+12),T=ae(t,n+14);let m=o[0]+(U&8191),C=o[1]+((U>>>13|P<<3)&8191),A=o[2]+((P>>>10|x<<6)&8191),_=o[3]+((x>>>7|D<<9)&8191),O=o[4]+((D>>>4|B<<12)&8191),L=o[5]+(B>>>1&8191),y=o[6]+((B>>>14|F<<2)&8191),p=o[7]+((F>>>11|R<<5)&8191),v=o[8]+((R>>>8|T<<8)&8191),S=o[9]+(T>>>5|i),I=0,N=I+m*c+C*(5*E)+A*(5*g)+_*(5*h)+O*(5*b);I=N>>>13,N&=8191,N+=L*(5*d)+y*(5*l)+p*(5*f)+v*(5*u)+S*(5*a),I+=N>>>13,N&=8191;let $=I+m*a+C*c+A*(5*E)+_*(5*g)+O*(5*h);I=$>>>13,$&=8191,$+=L*(5*b)+y*(5*d)+p*(5*l)+v*(5*f)+S*(5*u),I+=$>>>13,$&=8191;let k=I+m*u+C*a+A*c+_*(5*E)+O*(5*g);I=k>>>13,k&=8191,k+=L*(5*h)+y*(5*b)+p*(5*d)+v*(5*l)+S*(5*f),I+=k>>>13,k&=8191;let z=I+m*f+C*u+A*a+_*c+O*(5*E);I=z>>>13,z&=8191,z+=L*(5*g)+y*(5*h)+p*(5*b)+v*(5*d)+S*(5*l),I+=z>>>13,z&=8191;let j=I+m*l+C*f+A*u+_*a+O*c;I=j>>>13,j&=8191,j+=L*(5*E)+y*(5*g)+p*(5*h)+v*(5*b)+S*(5*d),I+=j>>>13,j&=8191;let H=I+m*d+C*l+A*f+_*u+O*a;I=H>>>13,H&=8191,H+=L*c+y*(5*E)+p*(5*g)+v*(5*h)+S*(5*b),I+=H>>>13,H&=8191;let V=I+m*b+C*d+A*l+_*f+O*u;I=V>>>13,V&=8191,V+=L*a+y*c+p*(5*E)+v*(5*g)+S*(5*h),I+=V>>>13,V&=8191;let Z=I+m*h+C*b+A*d+_*l+O*f;I=Z>>>13,Z&=8191,Z+=L*u+y*a+p*c+v*(5*E)+S*(5*g),I+=Z>>>13,Z&=8191;let X=I+m*g+C*h+A*b+_*d+O*l;I=X>>>13,X&=8191,X+=L*f+y*u+p*a+v*c+S*(5*E),I+=X>>>13,X&=8191;let W=I+m*E+C*g+A*h+_*b+O*d;I=W>>>13,W&=8191,W+=L*l+y*f+p*u+v*a+S*c,I+=W>>>13,W&=8191,I=(I<<2)+I|0,I=I+N|0,N=I&8191,I=I>>>13,$+=I,o[0]=N,o[1]=$,o[2]=k,o[3]=z,o[4]=j,o[5]=H,o[6]=V,o[7]=Z,o[8]=X,o[9]=W}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let c=2;c<10;c++)t[c]+=i,i=t[c]>>>13,t[c]&=8191;t[0]+=i*5,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=t[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let o=(i^1)-1;for(let c=0;c<10;c++)r[c]&=o;o=~o;for(let c=0;c<10;c++)t[c]=t[c]&o|r[c];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+n[0];t[0]=s&65535;for(let c=1;c<8;c++)s=(t[c]+n[c]|0)+(s>>>16)|0,t[c]=s&65535;un(r)}update(t){df(this),t=Po(t),Ae(t);const{buffer:n,blockLen:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s===r){for(;r<=i-o;o+=r)this.process(t,o);continue}n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){un(this.h,this.r,this.buffer,this.pad)}digestInto(t){df(this),bb(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)t[o++]=r[s]>>>0,t[o++]=r[s]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function Tb(e){const t=(r,i)=>e(i).update(Po(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const Nb=Tb(e=>new Cb(e));function $b(e,t,n,r,i,o=20){let s=e[0],c=e[1],a=e[2],u=e[3],f=t[0],l=t[1],d=t[2],b=t[3],h=t[4],g=t[5],E=t[6],U=t[7],P=i,x=n[0],D=n[1],B=n[2],F=s,R=c,T=a,m=u,C=f,A=l,_=d,O=b,L=h,y=g,p=E,v=U,S=P,I=x,N=D,$=B;for(let z=0;z<o;z+=2)F=F+C|0,S=G(S^F,16),L=L+S|0,C=G(C^L,12),F=F+C|0,S=G(S^F,8),L=L+S|0,C=G(C^L,7),R=R+A|0,I=G(I^R,16),y=y+I|0,A=G(A^y,12),R=R+A|0,I=G(I^R,8),y=y+I|0,A=G(A^y,7),T=T+_|0,N=G(N^T,16),p=p+N|0,_=G(_^p,12),T=T+_|0,N=G(N^T,8),p=p+N|0,_=G(_^p,7),m=m+O|0,$=G($^m,16),v=v+$|0,O=G(O^v,12),m=m+O|0,$=G($^m,8),v=v+$|0,O=G(O^v,7),F=F+A|0,$=G($^F,16),p=p+$|0,A=G(A^p,12),F=F+A|0,$=G($^F,8),p=p+$|0,A=G(A^p,7),R=R+_|0,S=G(S^R,16),v=v+S|0,_=G(_^v,12),R=R+_|0,S=G(S^R,8),v=v+S|0,_=G(_^v,7),T=T+O|0,I=G(I^T,16),L=L+I|0,O=G(O^L,12),T=T+O|0,I=G(I^T,8),L=L+I|0,O=G(O^L,7),m=m+C|0,N=G(N^m,16),y=y+N|0,C=G(C^y,12),m=m+C|0,N=G(N^m,8),y=y+N|0,C=G(C^y,7);let k=0;r[k++]=s+F|0,r[k++]=c+R|0,r[k++]=a+T|0,r[k++]=u+m|0,r[k++]=f+C|0,r[k++]=l+A|0,r[k++]=d+_|0,r[k++]=b+O|0,r[k++]=h+L|0,r[k++]=g+y|0,r[k++]=E+p|0,r[k++]=U+v|0,r[k++]=P+S|0,r[k++]=x+I|0,r[k++]=D+N|0,r[k++]=B+$|0}const Rb=Ob($b,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Fb=new Uint8Array(16),yf=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(Fb.subarray(n))},Pb=new Uint8Array(32);function mf(e,t,n,r,i){const o=e(t,n,Pb),s=Nb.create(o);i&&yf(s,i),yf(s,r);const c=vb(r.length,i?i.length:0,!0);s.update(c);const a=s.digest();return un(o,c),a}const Ef=xb({blockSize:64,nonceLength:12,tagLength:16},(e=>(t,n,r)=>({encrypt(o,s){const c=o.length;s=hf(c+16,s,!1),s.set(o);const a=s.subarray(0,-16);e(t,n,a,a,1);const u=mf(e,t,n,a,r);return s.set(u,c),un(u),s},decrypt(o,s){s=hf(o.length-16,s,!1);const c=o.subarray(0,-16),a=o.subarray(-16),u=mf(e,t,n,c,r);if(!Eb(a,u))throw new Error("invalid tag");return s.set(o.subarray(0,-16)),e(t,n,s,s,1),un(u),s}}))(Rb));function Lb(e,t,n){return Bi(e),n===void 0&&(n=new Uint8Array(e.outputLen)),In(e,He(n),He(t))}const Mo=Uint8Array.from([0]),xf=Uint8Array.of();function kb(e,t,n,r=32){Bi(e),Ke(r);const i=e.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/i);n===void 0&&(n=xf);const s=new Uint8Array(o*i),c=In.create(e,t),a=c._cloneInto(),u=new Uint8Array(c.outputLen);for(let f=0;f<o;f++)Mo[0]=f+1,a.update(f===0?xf:u).update(n).update(Mo).digestInto(u),s.set(u,i*f),c._cloneInto(a);return c.destroy(),a.destroy(),Re(u,Mo),s.slice(0,r)}const Mb=(e,t,n,r,i)=>kb(e,Lb(e,t,n),r,i),Be=BigInt(0),Ee=BigInt(1),Gt=BigInt(2),zb=BigInt(3),vf=BigInt(4),Df=BigInt(5),Af=BigInt(8);function ke(e,t){const n=e%t;return n>=Be?n:t+n}function Ve(e,t,n){let r=e;for(;t-- >Be;)r*=r,r%=n;return r}function Bf(e,t){if(e===Be)throw new Error("invert: expected non-zero number");if(t<=Be)throw new Error("invert: expected positive modulus, got "+t);let n=ke(e,t),r=t,i=Be,o=Ee;for(;n!==Be;){const c=r/n,a=r%n,u=i-o*c;r=n,n=a,i=o,o=u}if(r!==Ee)throw new Error("invert: does not exist");return ke(i,t)}function Sf(e,t){const n=(e.ORDER+Ee)/vf,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Hb(e,t){const n=(e.ORDER-Df)/Af,r=e.mul(t,Gt),i=e.pow(r,n),o=e.mul(t,i),s=e.mul(e.mul(o,Gt),i),c=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(c),t))throw new Error("Cannot find square root");return c}function jb(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Ee,n=0;for(;t%Gt===Be;)t/=Gt,n++;let r=Gt;const i=ln(e);for(;If(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Sf;let o=i.pow(r,t);const s=(t+Ee)/Gt;return function(a,u){if(a.is0(u))return u;if(If(a,u)!==1)throw new Error("Cannot find square root");let f=n,l=a.mul(a.ONE,o),d=a.pow(u,t),b=a.pow(u,s);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(h++,g=a.sqr(g),h===f)throw new Error("Cannot find square root");const E=Ee<<BigInt(f-h-1),U=a.pow(l,E);f=h,l=a.sqr(U),d=a.mul(d,l),b=a.mul(b,U)}return b}}function Vb(e){return e%vf===zb?Sf:e%Af===Df?Hb:jb(e)}const qb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kb(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=qb.reduce((r,i)=>(r[i]="function",r),t);return mr(e,n),e}function Wb(e,t,n){if(n<Be)throw new Error("invalid exponent, negatives unsupported");if(n===Be)return e.ONE;if(n===Ee)return t;let r=e.ONE,i=t;for(;n>Be;)n&Ee&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Ee;return r}function _f(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),o=e.inv(i);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),o),r}function If(e,t){const n=(e.ORDER-Ee)/Gt,r=e.pow(t,n),i=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function Zb(e,t){t!==void 0&&Ke(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ln(e,t,n=!1,r={}){if(e<=Be)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,o;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=t;f.BITS&&(i=f.BITS),f.sqrt&&(o=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE)}else typeof t=="number"&&(i=t),r.sqrt&&(o=r.sqrt);const{nBitLength:s,nByteLength:c}=Zb(e,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const u=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:c,MASK:yr(s),ZERO:Be,ONE:Ee,create:f=>ke(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return Be<=f&&f<e},is0:f=>f===Be,isValidNot0:f=>!u.is0(f)&&u.isValid(f),isOdd:f=>(f&Ee)===Ee,neg:f=>ke(-f,e),eql:(f,l)=>f===l,sqr:f=>ke(f*f,e),add:(f,l)=>ke(f+l,e),sub:(f,l)=>ke(f-l,e),mul:(f,l)=>ke(f*l,e),pow:(f,l)=>Wb(u,f,l),div:(f,l)=>ke(f*Bf(l,e),e),sqrN:f=>f*f,addN:(f,l)=>f+l,subN:(f,l)=>f-l,mulN:(f,l)=>f*l,inv:f=>Bf(f,e),sqrt:o||(f=>(a||(a=Vb(e)),a(u,f))),toBytes:f=>n?zi(f,c):Mi(f,c),fromBytes:f=>{if(f.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+f.length);return n?wr(f):pr(f)},invertBatch:f=>_f(u,f),cmov:(f,l,d)=>d?l:f});return Object.freeze(u)}function Uf(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Of(e){const t=Uf(e);return t+Math.ceil(t/2)}function Gb(e,t,n=!1){const r=e.length,i=Uf(t),o=Of(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=n?wr(e):pr(e),c=ke(s,t-Ee)+Ee;return n?zi(c,i):Mi(c,i)}const dn=BigInt(0),Yt=BigInt(1);function Kn(e,t){const n=t.negate();return e?n:t}function Yb(e,t,n){const r=t==="pz"?s=>s.pz:s=>s.ez,i=_f(e.Fp,n.map(r));return n.map((s,c)=>s.toAffine(i[c])).map(e.fromAffine)}function Cf(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function zo(e,t){Cf(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,o=yr(e),s=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:i,shiftBy:s}}function Tf(e,t,n){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=n;let c=Number(e&i),a=e>>s;c>r&&(c-=o,a+=Yt);const u=t*r,f=u+Math.abs(c)-1,l=c===0,d=c<0,b=t%2!==0;return{nextN:a,offset:f,isZero:l,isNeg:d,isNegF:b,offsetF:u}}function Xb(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Jb(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Ho=new WeakMap,Nf=new WeakMap;function jo(e){return Nf.get(e)||1}function $f(e){if(e!==dn)throw new Error("invalid wNAF")}function Qb(e,t){return{constTimeNegate:Kn,hasPrecomputes(n){return jo(n)!==1},unsafeLadder(n,r,i=e.ZERO){let o=n;for(;r>dn;)r&Yt&&(i=i.add(o)),o=o.double(),r>>=Yt;return i},precomputeWindow(n,r){const{windows:i,windowSize:o}=zo(r,t),s=[];let c=n,a=c;for(let u=0;u<i;u++){a=c,s.push(a);for(let f=1;f<o;f++)a=a.add(c),s.push(a);c=a.double()}return s},wNAF(n,r,i){let o=e.ZERO,s=e.BASE;const c=zo(n,t);for(let a=0;a<c.windows;a++){const{nextN:u,offset:f,isZero:l,isNeg:d,isNegF:b,offsetF:h}=Tf(i,a,c);i=u,l?s=s.add(Kn(b,r[h])):o=o.add(Kn(d,r[f]))}return $f(i),{p:o,f:s}},wNAFUnsafe(n,r,i,o=e.ZERO){const s=zo(n,t);for(let c=0;c<s.windows&&i!==dn;c++){const{nextN:a,offset:u,isZero:f,isNeg:l}=Tf(i,c,s);if(i=a,!f){const d=r[u];o=o.add(l?d.negate():d)}}return $f(i),o},getPrecomputes(n,r,i){let o=Ho.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&(typeof i=="function"&&(o=i(o)),Ho.set(r,o))),o},wNAFCached(n,r,i){const o=jo(n);return this.wNAF(o,this.getPrecomputes(o,n,i),r)},wNAFCachedUnsafe(n,r,i,o){const s=jo(n);return s===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,n,i),r,o)},setWindowSize(n,r){Cf(r,t),Nf.set(n,r),Ho.delete(n)}}}function ep(e,t,n,r){let i=t,o=e.ZERO,s=e.ZERO;for(;n>dn||r>dn;)n&Yt&&(o=o.add(i)),r&Yt&&(s=s.add(i)),i=i.double(),n>>=Yt,r>>=Yt;return{p1:o,p2:s}}function tp(e,t,n,r){Xb(n,e),Jb(r,t);const i=n.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=k0(BigInt(i));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const u=yr(a),f=new Array(Number(u)+1).fill(s),l=Math.floor((t.BITS-1)/a)*a;let d=s;for(let b=l;b>=0;b-=a){f.fill(s);for(let g=0;g<o;g++){const E=r[g],U=Number(E>>BigInt(b)&u);f[U]=f[U].add(n[g])}let h=s;for(let g=f.length-1,E=s;g>0;g--)E=E.add(f[g]),h=h.add(E);if(d=d.add(h),b!==0)for(let g=0;g<a;g++)d=d.double()}return d}function Rf(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Kb(t),t}else return ln(e)}function np(e,t,n={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const c of["p","n","h"]){const a=t[c];if(!(typeof a=="bigint"&&a>dn))throw new Error(`CURVE.${c} must be positive bigint`)}const r=Rf(t.p,n.Fp),i=Rf(t.n,n.Fn),s=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const c of s)if(!r.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Wn=BigInt(0),hn=BigInt(1),Mr=BigInt(2);function rp(e){return mr(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function ip(e){const t=rp(e),{P:n,type:r,adjustScalarBytes:i,powPminus2:o,randomBytes:s}=t,c=r==="x25519";if(!c&&r!=="x448")throw new Error("invalid type");const a=s||wt,u=c?255:448,f=c?32:56,l=BigInt(c?9:5),d=BigInt(c?121665:39081),b=c?Mr**BigInt(254):Mr**BigInt(447),h=c?BigInt(8)*Mr**BigInt(251)-hn:BigInt(4)*Mr**BigInt(445)-hn,g=b+h+hn,E=m=>ke(m,n),U=P(l);function P(m){return zi(E(m),f)}function x(m){const C=ve("u coordinate",m,f);return c&&(C[31]&=127),E(wr(C))}function D(m){return wr(i(ve("scalar",m,f)))}function B(m,C){const A=T(x(C),D(m));if(A===Wn)throw new Error("invalid private or public key received");return P(A)}function F(m){return B(m,U)}function R(m,C,A){const _=E(m*(C-A));return C=E(C-_),A=E(A+_),{x_2:C,x_3:A}}function T(m,C){ji("u",m,Wn,n),ji("scalar",C,b,g);const A=C,_=m;let O=hn,L=Wn,y=m,p=hn,v=Wn;for(let I=BigInt(u-1);I>=Wn;I--){const N=A>>I&hn;v^=N,{x_2:O,x_3:y}=R(v,O,y),{x_2:L,x_3:p}=R(v,L,p),v=N;const $=O+L,k=E($*$),z=O-L,j=E(z*z),H=k-j,V=y+p,Z=y-p,X=E(Z*$),W=E(V*z),ee=X+W,ne=X-W;y=E(ee*ee),p=E(_*E(ne*ne)),O=E(k*j),L=E(H*(k+E(d*H)))}({x_2:O,x_3:y}=R(v,O,y)),{x_2:L,x_3:p}=R(v,L,p);const S=o(L);return E(O*S)}return{scalarMult:B,scalarMultBase:F,getSharedSecret:(m,C)=>B(m,C),getPublicKey:m=>F(m),utils:{randomPrivateKey:()=>a(f)},GuBytes:U.slice()}}BigInt(0);const op=BigInt(1),Ff=BigInt(2),sp=BigInt(3),cp=BigInt(5),ap=BigInt(8),Pf={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ap,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function fp(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=Pf.p,c=e*e%o*e%o,a=Ve(c,Ff,o)*c%o,u=Ve(a,op,o)*e%o,f=Ve(u,cp,o)*u%o,l=Ve(f,t,o)*f%o,d=Ve(l,n,o)*l%o,b=Ve(d,r,o)*d%o,h=Ve(b,i,o)*b%o,g=Ve(h,i,o)*b%o,E=Ve(g,t,o)*f%o;return{pow_p_5_8:Ve(E,Ff,o)*e%o,b2:c}}function up(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const Vo=(()=>{const e=Pf.p;return ip({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=fp(t);return ke(Ve(n,sp,e)*r,e)},adjustScalarBytes:up})})();function Lf(e){e.lowS!==void 0&&gr("lowS",e.lowS),e.prehash!==void 0&&gr("prehash",e.prehash)}class lp extends Error{constructor(t=""){super(t)}}const ot={Err:lp,_tlv:{encode:(e,t)=>{const{Err:n}=ot;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=br(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?br(i.length/2|128):"";return br(e)+o+i+t},decode(e,t){const{Err:n}=ot;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],o=!!(i&128);let s=0;if(!o)s=i;else{const a=i&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+a);if(u.length!==a)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)s=s<<8|f;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=ot;if(e<Zn)throw new t("integer: negative integers are not allowed");let n=br(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ot;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return pr(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ot,i=ve("signature",e),{v:o,l:s}=r.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:u,l:f}=r.decode(2,a);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=ot,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),o=r+i;return t.encode(48,o)}},Zn=BigInt(0),Gn=BigInt(1),dp=BigInt(2),zr=BigInt(3),hp=BigInt(4);function gp(e,t,n){function r(i){const o=e.sqr(i),s=e.mul(o,i);return e.add(e.add(s,e.mul(i,t)),n)}return r}function kf(e,t,n){const{BYTES:r}=e;function i(o){let s;if(typeof o=="bigint")s=o;else{let c=ve("private key",o);if(t){if(!t.includes(c.length*2))throw new Error("invalid private key");const a=new Uint8Array(r);a.set(c,a.length-c.length),c=a}try{s=e.fromBytes(c)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof o}`)}}if(n&&(s=e.create(s)),!e.isValidNot0(s))throw new Error("invalid private key: out of range [1..N-1]");return s}return i}function bp(e,t={}){const{Fp:n,Fn:r}=np("weierstrass",e,t),{h:i,n:o}=e;mr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:s}=t;if(s&&(!n.is0(e.a)||typeof s.beta!="bigint"||typeof s.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function c(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function a(T,m,C){const{x:A,y:_}=m.toAffine(),O=n.toBytes(A);if(gr("isCompressed",C),C){c();const L=!n.isOdd(_);return pt(Mf(L),O)}else return pt(Uint8Array.of(4),O,n.toBytes(_))}function u(T){$e(T);const m=n.BYTES,C=m+1,A=2*m+1,_=T.length,O=T[0],L=T.subarray(1);if(_===C&&(O===2||O===3)){const y=n.fromBytes(L);if(!n.isValid(y))throw new Error("bad point: is not on curve, wrong x");const p=d(y);let v;try{v=n.sqrt(p)}catch(N){const $=N instanceof Error?": "+N.message:"";throw new Error("bad point: is not on curve, sqrt error"+$)}c();const S=n.isOdd(v);return(O&1)===1!==S&&(v=n.neg(v)),{x:y,y:v}}else if(_===A&&O===4){const y=n.fromBytes(L.subarray(m*0,m*1)),p=n.fromBytes(L.subarray(m*1,m*2));if(!b(y,p))throw new Error("bad point: is not on curve");return{x:y,y:p}}else throw new Error(`bad point: got length ${_}, expected compressed=${C} or uncompressed=${A}`)}const f=t.toBytes||a,l=t.fromBytes||u,d=gp(n,e.a,e.b);function b(T,m){const C=n.sqr(m),A=d(T);return n.eql(C,A)}if(!b(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const h=n.mul(n.pow(e.a,zr),hp),g=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(h,g)))throw new Error("bad curve params: a or b");function E(T,m,C=!1){if(!n.isValid(m)||C&&n.is0(m))throw new Error(`bad point coordinate ${T}`);return m}function U(T){if(!(T instanceof B))throw new Error("ProjectivePoint expected")}const P=Vc((T,m)=>{const{px:C,py:A,pz:_}=T;if(n.eql(_,n.ONE))return{x:C,y:A};const O=T.is0();m==null&&(m=O?n.ONE:n.inv(_));const L=n.mul(C,m),y=n.mul(A,m),p=n.mul(_,m);if(O)return{x:n.ZERO,y:n.ZERO};if(!n.eql(p,n.ONE))throw new Error("invZ was invalid");return{x:L,y}}),x=Vc(T=>{if(T.is0()){if(t.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:m,y:C}=T.toAffine();if(!n.isValid(m)||!n.isValid(C))throw new Error("bad point: x or y not field elements");if(!b(m,C))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function D(T,m,C,A,_){return C=new B(n.mul(C.px,T),C.py,C.pz),m=Kn(A,m),C=Kn(_,C),m.add(C)}class B{constructor(m,C,A){this.px=E("x",m),this.py=E("y",C,!0),this.pz=E("z",A),Object.freeze(this)}static fromAffine(m){const{x:C,y:A}=m||{};if(!m||!n.isValid(C)||!n.isValid(A))throw new Error("invalid affine point");if(m instanceof B)throw new Error("projective point not allowed");return n.is0(C)&&n.is0(A)?B.ZERO:new B(C,A,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){return Yb(B,"pz",m)}static fromBytes(m){return $e(m),B.fromHex(m)}static fromHex(m){const C=B.fromAffine(l(ve("pointHex",m)));return C.assertValidity(),C}static fromPrivateKey(m){const C=kf(r,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return B.BASE.multiply(C(m))}static msm(m,C){return tp(B,r,m,C)}precompute(m=8,C=!0){return R.setWindowSize(this,m),C||this.multiply(zr),this}_setWindowSize(m){this.precompute(m)}assertValidity(){x(this)}hasEvenY(){const{y:m}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(m)}equals(m){U(m);const{px:C,py:A,pz:_}=this,{px:O,py:L,pz:y}=m,p=n.eql(n.mul(C,y),n.mul(O,_)),v=n.eql(n.mul(A,y),n.mul(L,_));return p&&v}negate(){return new B(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:C}=e,A=n.mul(C,zr),{px:_,py:O,pz:L}=this;let y=n.ZERO,p=n.ZERO,v=n.ZERO,S=n.mul(_,_),I=n.mul(O,O),N=n.mul(L,L),$=n.mul(_,O);return $=n.add($,$),v=n.mul(_,L),v=n.add(v,v),y=n.mul(m,v),p=n.mul(A,N),p=n.add(y,p),y=n.sub(I,p),p=n.add(I,p),p=n.mul(y,p),y=n.mul($,y),v=n.mul(A,v),N=n.mul(m,N),$=n.sub(S,N),$=n.mul(m,$),$=n.add($,v),v=n.add(S,S),S=n.add(v,S),S=n.add(S,N),S=n.mul(S,$),p=n.add(p,S),N=n.mul(O,L),N=n.add(N,N),S=n.mul(N,$),y=n.sub(y,S),v=n.mul(N,I),v=n.add(v,v),v=n.add(v,v),new B(y,p,v)}add(m){U(m);const{px:C,py:A,pz:_}=this,{px:O,py:L,pz:y}=m;let p=n.ZERO,v=n.ZERO,S=n.ZERO;const I=e.a,N=n.mul(e.b,zr);let $=n.mul(C,O),k=n.mul(A,L),z=n.mul(_,y),j=n.add(C,A),H=n.add(O,L);j=n.mul(j,H),H=n.add($,k),j=n.sub(j,H),H=n.add(C,_);let V=n.add(O,y);return H=n.mul(H,V),V=n.add($,z),H=n.sub(H,V),V=n.add(A,_),p=n.add(L,y),V=n.mul(V,p),p=n.add(k,z),V=n.sub(V,p),S=n.mul(I,H),p=n.mul(N,z),S=n.add(p,S),p=n.sub(k,S),S=n.add(k,S),v=n.mul(p,S),k=n.add($,$),k=n.add(k,$),z=n.mul(I,z),H=n.mul(N,H),k=n.add(k,z),z=n.sub($,z),z=n.mul(I,z),H=n.add(H,z),$=n.mul(k,H),v=n.add(v,$),$=n.mul(V,H),p=n.mul(j,p),p=n.sub(p,$),$=n.mul(j,k),S=n.mul(V,S),S=n.add(S,$),new B(p,v,S)}subtract(m){return this.add(m.negate())}is0(){return this.equals(B.ZERO)}multiply(m){const{endo:C}=t;if(!r.isValidNot0(m))throw new Error("invalid scalar: out of range");let A,_;const O=L=>R.wNAFCached(this,L,B.normalizeZ);if(C){const{k1neg:L,k1:y,k2neg:p,k2:v}=C.splitScalar(m),{p:S,f:I}=O(y),{p:N,f:$}=O(v);_=I.add($),A=D(C.beta,S,N,L,p)}else{const{p:L,f:y}=O(m);A=L,_=y}return B.normalizeZ([A,_])[0]}multiplyUnsafe(m){const{endo:C}=t,A=this;if(!r.isValid(m))throw new Error("invalid scalar: out of range");if(m===Zn||A.is0())return B.ZERO;if(m===Gn)return A;if(R.hasPrecomputes(this))return this.multiply(m);if(C){const{k1neg:_,k1:O,k2neg:L,k2:y}=C.splitScalar(m),{p1:p,p2:v}=ep(B,A,O,y);return D(C.beta,p,v,_,L)}else return R.wNAFCachedUnsafe(A,m)}multiplyAndAddUnsafe(m,C,A){const _=this.multiplyUnsafe(C).add(m.multiplyUnsafe(A));return _.is0()?void 0:_}toAffine(m){return P(this,m)}isTorsionFree(){const{isTorsionFree:m}=t;return i===Gn?!0:m?m(B,this):R.wNAFCachedUnsafe(this,o).is0()}clearCofactor(){const{clearCofactor:m}=t;return i===Gn?this:m?m(B,this):this.multiplyUnsafe(i)}toBytes(m=!0){return gr("isCompressed",m),this.assertValidity(),f(B,this,m)}toRawBytes(m=!0){return this.toBytes(m)}toHex(m=!0){return An(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}B.BASE=new B(e.Gx,e.Gy,n.ONE),B.ZERO=new B(n.ZERO,n.ONE,n.ZERO),B.Fp=n,B.Fn=r;const F=r.BITS,R=Qb(B,t.endo?Math.ceil(F/2):F);return B}function Mf(e){return Uint8Array.of(e?2:3)}function pp(e,t,n={}){mr(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||wt,i=t.hmac||((A,..._)=>In(t.hash,A,pt(..._))),{Fp:o,Fn:s}=e,{ORDER:c,BITS:a}=s;function u(A){const _=c>>Gn;return A>_}function f(A){return u(A)?s.neg(A):A}function l(A,_){if(!s.isValidNot0(_))throw new Error(`invalid signature ${A}: out of range 1..CURVE.n`)}class d{constructor(_,O,L){l("r",_),l("s",O),this.r=_,this.s=O,L!=null&&(this.recovery=L),Object.freeze(this)}static fromCompact(_){const O=s.BYTES,L=ve("compactSignature",_,O*2);return new d(s.fromBytes(L.subarray(0,O)),s.fromBytes(L.subarray(O,O*2)))}static fromDER(_){const{r:O,s:L}=ot.toSig(ve("DER",_));return new d(O,L)}assertValidity(){}addRecoveryBit(_){return new d(this.r,this.s,_)}recoverPublicKey(_){const O=o.ORDER,{r:L,s:y,recovery:p}=this;if(p==null||![0,1,2,3].includes(p))throw new Error("recovery id invalid");if(c*dp<O&&p>1)throw new Error("recovery id is ambiguous for h>1 curve");const S=p===2||p===3?L+c:L;if(!o.isValid(S))throw new Error("recovery id 2 or 3 invalid");const I=o.toBytes(S),N=e.fromHex(pt(Mf((p&1)===0),I)),$=s.inv(S),k=x(ve("msgHash",_)),z=s.create(-k*$),j=s.create(y*$),H=e.BASE.multiplyUnsafe(z).add(N.multiplyUnsafe(j));if(H.is0())throw new Error("point at infinify");return H.assertValidity(),H}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,s.neg(this.s),this.recovery):this}toBytes(_){if(_==="compact")return pt(s.toBytes(this.r),s.toBytes(this.s));if(_==="der")return Ii(ot.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return An(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return An(this.toBytes("compact"))}}const b=kf(s,n.allowedPrivateKeyLengths,n.wrapPrivateKey),h={isValidPrivateKey(A){try{return b(A),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const A=c;return Gb(r(Of(A)),A)},precompute(A=8,_=e.BASE){return _.precompute(A,!1)}};function g(A,_=!0){return e.fromPrivateKey(A).toBytes(_)}function E(A){if(typeof A=="bigint")return!1;if(A instanceof e)return!0;const O=ve("key",A).length,L=o.BYTES,y=L+1,p=2*L+1;if(!(n.allowedPrivateKeyLengths||s.BYTES===y))return O===y||O===p}function U(A,_,O=!0){if(E(A)===!0)throw new Error("first arg must be private key");if(E(_)===!1)throw new Error("second arg must be public key");return e.fromHex(_).multiply(b(A)).toBytes(O)}const P=t.bits2int||function(A){if(A.length>8192)throw new Error("input is too large");const _=pr(A),O=A.length*8-a;return O>0?_>>BigInt(O):_},x=t.bits2int_modN||function(A){return s.create(P(A))},D=yr(a);function B(A){return ji("num < 2^"+a,A,Zn,D),s.toBytes(A)}function F(A,_,O=R){if(["recovered","canonical"].some(j=>j in O))throw new Error("sign() legacy options not supported");const{hash:L}=t;let{lowS:y,prehash:p,extraEntropy:v}=O;y==null&&(y=!0),A=ve("msgHash",A),Lf(O),p&&(A=ve("prehashed msgHash",L(A)));const S=x(A),I=b(_),N=[B(I),B(S)];if(v!=null&&v!==!1){const j=v===!0?r(o.BYTES):v;N.push(ve("extraEntropy",j))}const $=pt(...N),k=S;function z(j){const H=P(j);if(!s.isValidNot0(H))return;const V=s.inv(H),Z=e.BASE.multiply(H).toAffine(),X=s.create(Z.x);if(X===Zn)return;const W=s.create(V*s.create(k+X*I));if(W===Zn)return;let ee=(Z.x===X?0:2)|Number(Z.y&Gn),ne=W;return y&&u(W)&&(ne=f(W),ee^=1),new d(X,ne,ee)}return{seed:$,k2sig:z}}const R={lowS:t.lowS,prehash:!1},T={lowS:t.lowS,prehash:!1};function m(A,_,O=R){const{seed:L,k2sig:y}=F(A,_,O);return M0(t.hash.outputLen,s.BYTES,i)(L,y)}e.BASE.precompute(8);function C(A,_,O,L=T){const y=A;_=ve("msgHash",_),O=ve("publicKey",O),Lf(L);const{lowS:p,prehash:v,format:S}=L;if("strict"in L)throw new Error("options.strict was renamed to lowS");if(S!==void 0&&!["compact","der","js"].includes(S))throw new Error('format must be "compact", "der" or "js"');const I=typeof y=="string"||Ai(y),N=!I&&!S&&typeof y=="object"&&y!==null&&typeof y.r=="bigint"&&typeof y.s=="bigint";if(!I&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let $,k;try{if(N)if(S===void 0||S==="js")$=new d(y.r,y.s);else throw new Error("invalid format");if(I){try{S!=="compact"&&($=d.fromDER(y))}catch(ne){if(!(ne instanceof ot.Err))throw ne}!$&&S!=="der"&&($=d.fromCompact(y))}k=e.fromHex(O)}catch{return!1}if(!$||p&&$.hasHighS())return!1;v&&(_=t.hash(_));const{r:z,s:j}=$,H=x(_),V=s.inv(j),Z=s.create(H*V),X=s.create(z*V),W=e.BASE.multiplyUnsafe(Z).add(k.multiplyUnsafe(X));return W.is0()?!1:s.create(W.x)===z}return Object.freeze({getPublicKey:g,getSharedSecret:U,sign:m,verify:C,utils:h,Point:e,Signature:d})}function wp(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=ln(t.n,e.nBitLength),i={Fp:n,Fn:r,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function yp(e){const{CURVE:t,curveOpts:n}=wp(e),r={hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,ecdsaOpts:r}}function mp(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function Ep(e){const{CURVE:t,curveOpts:n,ecdsaOpts:r}=yp(e),i=bp(t,n),o=pp(i,r,n);return mp(e,o)}function qo(e,t){const n=r=>Ep({...e,hash:r});return{...n(t),create:n}}const zf={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Hf={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},jf={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},xp=ln(zf.p),vp=ln(Hf.p),Dp=ln(jf.p),Ap=qo({...zf,Fp:xp,lowS:!1},vt);qo({...Hf,Fp:vp,lowS:!1},F0),qo({...jf,Fp:Dp,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},R0);const Bp=Ap,Sp=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function _p(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Sp(e)}catch{return e}}function Ip(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Vf(e,...t){if(!Ip(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function qf(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Up(e,t){Vf(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const gn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ko=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Op(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Kf(e){return typeof e=="string"&&(e=Op(e)),Vf(e),e}class Cp{clone(){return this._cloneInto()}}function Tp(e){const t=r=>e().update(Kf(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Np(e=32){if(gn&&typeof gn.getRandomValues=="function")return gn.getRandomValues(new Uint8Array(e));if(gn&&typeof gn.randomBytes=="function")return gn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function $p(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,u=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+u,c,r)}class Rp extends Cp{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ko(this.buffer)}update(t){qf(this);const{view:n,buffer:r,blockLen:i}=this;t=Kf(t);const o=t.length;for(let s=0;s<o;){const c=Math.min(i-this.pos,o-s);if(c===i){const a=Ko(t);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){qf(this),Up(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let l=s;l<i;l++)n[l]=0;$p(r,i-8,BigInt(this.length*8),o),this.process(r,0);const c=Ko(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)c.setUint32(4*l,f[l],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return t.length=i,t.pos=c,t.finished=o,t.destroyed=s,i%n&&t.buffer.set(r),t}}const Hr=BigInt(2**32-1),Wo=BigInt(32);function Wf(e,t=!1){return t?{h:Number(e&Hr),l:Number(e>>Wo&Hr)}:{h:Number(e>>Wo&Hr)|0,l:Number(e&Hr)|0}}function Fp(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=Wf(e[i],t);[n[i],r[i]]=[o,s]}return[n,r]}const Pp=(e,t)=>BigInt(e>>>0)<<Wo|BigInt(t>>>0),Lp=(e,t,n)=>e>>>n,kp=(e,t,n)=>e<<32-n|t>>>n,Mp=(e,t,n)=>e>>>n|t<<32-n,zp=(e,t,n)=>e<<32-n|t>>>n,Hp=(e,t,n)=>e<<64-n|t>>>n-32,jp=(e,t,n)=>e>>>n-32|t<<64-n,Vp=(e,t)=>t,qp=(e,t)=>e,Kp=(e,t,n)=>e<<n|t>>>32-n,Wp=(e,t,n)=>t<<n|e>>>32-n,Zp=(e,t,n)=>t<<n-32|e>>>64-n,Gp=(e,t,n)=>e<<n-32|t>>>64-n;function Yp(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const Xp=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Jp=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Qp=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),ew=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,tw=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),nw=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,K={fromBig:Wf,split:Fp,toBig:Pp,shrSH:Lp,shrSL:kp,rotrSH:Mp,rotrSL:zp,rotrBH:Hp,rotrBL:jp,rotr32H:Vp,rotr32L:qp,rotlSH:Kp,rotlSL:Wp,rotlBH:Zp,rotlBL:Gp,add:Yp,add3L:Xp,add3H:Jp,add4L:Qp,add4H:ew,add5H:nw,add5L:tw},[rw,iw]=K.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Tt=new Uint32Array(80),Nt=new Uint32Array(80);class ow extends Rp{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:u,El:f,Fh:l,Fl:d,Gh:b,Gl:h,Hh:g,Hl:E}=this;return[t,n,r,i,o,s,c,a,u,f,l,d,b,h,g,E]}set(t,n,r,i,o,s,c,a,u,f,l,d,b,h,g,E){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=d|0,this.Gh=b|0,this.Gl=h|0,this.Hh=g|0,this.Hl=E|0}process(t,n){for(let x=0;x<16;x++,n+=4)Tt[x]=t.getUint32(n),Nt[x]=t.getUint32(n+=4);for(let x=16;x<80;x++){const D=Tt[x-15]|0,B=Nt[x-15]|0,F=K.rotrSH(D,B,1)^K.rotrSH(D,B,8)^K.shrSH(D,B,7),R=K.rotrSL(D,B,1)^K.rotrSL(D,B,8)^K.shrSL(D,B,7),T=Tt[x-2]|0,m=Nt[x-2]|0,C=K.rotrSH(T,m,19)^K.rotrBH(T,m,61)^K.shrSH(T,m,6),A=K.rotrSL(T,m,19)^K.rotrBL(T,m,61)^K.shrSL(T,m,6),_=K.add4L(R,A,Nt[x-7],Nt[x-16]),O=K.add4H(_,F,C,Tt[x-7],Tt[x-16]);Tt[x]=O|0,Nt[x]=_|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:u,Dl:f,Eh:l,El:d,Fh:b,Fl:h,Gh:g,Gl:E,Hh:U,Hl:P}=this;for(let x=0;x<80;x++){const D=K.rotrSH(l,d,14)^K.rotrSH(l,d,18)^K.rotrBH(l,d,41),B=K.rotrSL(l,d,14)^K.rotrSL(l,d,18)^K.rotrBL(l,d,41),F=l&b^~l&g,R=d&h^~d&E,T=K.add5L(P,B,R,iw[x],Nt[x]),m=K.add5H(T,U,D,F,rw[x],Tt[x]),C=T|0,A=K.rotrSH(r,i,28)^K.rotrBH(r,i,34)^K.rotrBH(r,i,39),_=K.rotrSL(r,i,28)^K.rotrBL(r,i,34)^K.rotrBL(r,i,39),O=r&o^r&c^o&c,L=i&s^i&a^s&a;U=g|0,P=E|0,g=b|0,E=h|0,b=l|0,h=d|0,{h:l,l:d}=K.add(u|0,f|0,m|0,C|0),u=c|0,f=a|0,c=o|0,a=s|0,o=r|0,s=i|0;const y=K.add3L(C,_,L);r=K.add3H(y,m,A,O),i=y|0}({h:r,l:i}=K.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=K.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=K.add(this.Ch|0,this.Cl|0,c|0,a|0),{h:u,l:f}=K.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:d}=K.add(this.Eh|0,this.El|0,l|0,d|0),{h:b,l:h}=K.add(this.Fh|0,this.Fl|0,b|0,h|0),{h:g,l:E}=K.add(this.Gh|0,this.Gl|0,g|0,E|0),{h:U,l:P}=K.add(this.Hh|0,this.Hl|0,U|0,P|0),this.set(r,i,o,s,c,a,u,f,l,d,b,h,g,E,U,P)}roundClean(){Tt.fill(0),Nt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sw=Tp(()=>new ow);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zo=BigInt(0),Zf=BigInt(1),cw=BigInt(2);function Go(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Yo(e){if(!Go(e))throw new Error("Uint8Array expected")}function Xo(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const aw=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Jo(e){Yo(e);let t="";for(let n=0;n<e.length;n++)t+=aw[e[n]];return t}function Gf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Zo:BigInt("0x"+e)}const st={_0:48,_9:57,A:65,F:70,a:97,f:102};function Yf(e){if(e>=st._0&&e<=st._9)return e-st._0;if(e>=st.A&&e<=st.F)return e-(st.A-10);if(e>=st.a&&e<=st.f)return e-(st.a-10)}function Xf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=Yf(e.charCodeAt(o)),c=Yf(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function fw(e){return Gf(Jo(e))}function jr(e){return Yo(e),Gf(Jo(Uint8Array.from(e).reverse()))}function Jf(e,t){return Xf(e.toString(16).padStart(t*2,"0"))}function Qo(e,t){return Jf(e,t).reverse()}function ct(e,t,n){let r;if(typeof t=="string")try{r=Xf(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Go(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function Qf(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Yo(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}const es=e=>typeof e=="bigint"&&Zo<=e;function uw(e,t,n){return es(e)&&es(t)&&es(n)&&t<=e&&e<n}function Yn(e,t,n,r){if(!uw(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function lw(e){let t;for(t=0;e>Zo;e>>=Zf,t+=1);return t}const dw=e=>(cw<<BigInt(e-1))-Zf,hw={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Go(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ts(e,t,n={}){const r=(i,o,s)=>{const c=hw[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[i];if(!(s&&a===void 0)&&!c(a,e))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+a)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}function eu(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const se=BigInt(0),te=BigInt(1),Xt=BigInt(2),gw=BigInt(3),ns=BigInt(4),tu=BigInt(5),nu=BigInt(8);function ie(e,t){const n=e%t;return n>=se?n:t+n}function bw(e,t,n){if(t<se)throw new Error("invalid exponent, negatives unsupported");if(n<=se)throw new Error("invalid modulus");if(n===te)return se;let r=te;for(;t>se;)t&te&&(r=r*e%n),e=e*e%n,t>>=te;return r}function Ye(e,t,n){let r=e;for(;t-- >se;)r*=r,r%=n;return r}function ru(e,t){if(e===se)throw new Error("invert: expected non-zero number");if(t<=se)throw new Error("invert: expected positive modulus, got "+t);let n=ie(e,t),r=t,i=se,o=te;for(;n!==se;){const s=r/n,c=r%n,a=i-o*s;r=n,n=c,i=o,o=a}if(r!==te)throw new Error("invert: does not exist");return ie(i,t)}function pw(e){const t=(e-te)/Xt;let n,r,i;for(n=e-te,r=0;n%Xt===se;n/=Xt,r++);for(i=Xt;i<e&&bw(i,t,e)!==e-te;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const s=(e+te)/ns;return function(c,a){const u=c.pow(a,s);if(!c.eql(c.sqr(u),a))throw new Error("Cannot find square root");return u}}const o=(n+te)/Xt;return function(s,c){if(s.pow(c,t)===s.neg(s.ONE))throw new Error("Cannot find square root");let a=r,u=s.pow(s.mul(s.ONE,i),n),f=s.pow(c,o),l=s.pow(c,n);for(;!s.eql(l,s.ONE);){if(s.eql(l,s.ZERO))return s.ZERO;let d=1;for(let h=s.sqr(l);d<a&&!s.eql(h,s.ONE);d++)h=s.sqr(h);const b=s.pow(u,te<<BigInt(a-d-1));u=s.sqr(b),f=s.mul(f,b),l=s.mul(l,u),a=d}return f}}function ww(e){if(e%ns===gw){const t=(e+te)/ns;return function(n,r){const i=n.pow(r,t);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%nu===tu){const t=(e-tu)/nu;return function(n,r){const i=n.mul(r,Xt),o=n.pow(i,t),s=n.mul(r,o),c=n.mul(n.mul(s,Xt),o),a=n.mul(s,n.sub(c,n.ONE));if(!n.eql(n.sqr(a),r))throw new Error("Cannot find square root");return a}}return pw(e)}const yw=(e,t)=>(ie(e,t)&te)===te,mw=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ew(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=mw.reduce((r,i)=>(r[i]="function",r),t);return ts(e,n)}function xw(e,t,n){if(n<se)throw new Error("invalid exponent, negatives unsupported");if(n===se)return e.ONE;if(n===te)return t;let r=e.ONE,i=t;for(;n>se;)n&te&&(r=e.mul(r,i)),i=e.sqr(i),n>>=te;return r}function vw(e,t){const n=new Array(t.length),r=t.reduce((o,s,c)=>e.is0(s)?o:(n[c]=o,e.mul(o,s)),e.ONE),i=e.inv(r);return t.reduceRight((o,s,c)=>e.is0(s)?o:(n[c]=e.mul(o,n[c]),e.mul(o,s)),i),n}function iu(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ou(e,t,n=!1,r={}){if(e<=se)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=iu(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const c=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:o,MASK:dw(i),ZERO:se,ONE:te,create:a=>ie(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return se<=a&&a<e},is0:a=>a===se,isOdd:a=>(a&te)===te,neg:a=>ie(-a,e),eql:(a,u)=>a===u,sqr:a=>ie(a*a,e),add:(a,u)=>ie(a+u,e),sub:(a,u)=>ie(a-u,e),mul:(a,u)=>ie(a*u,e),pow:(a,u)=>xw(c,a,u),div:(a,u)=>ie(a*ru(u,e),e),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>ru(a,e),sqrt:r.sqrt||(a=>(s||(s=ww(e)),s(c,a))),invertBatch:a=>vw(c,a),cmov:(a,u,f)=>f?u:a,toBytes:a=>n?Qo(a,o):Jf(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?jr(a):fw(a)}});return Object.freeze(c)}const su=BigInt(0),Vr=BigInt(1);function rs(e,t){const n=t.negate();return e?n:t}function cu(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function is(e,t){cu(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function Dw(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Aw(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const os=new WeakMap,au=new WeakMap;function ss(e){return au.get(e)||1}function Bw(e,t){return{constTimeNegate:rs,hasPrecomputes(n){return ss(n)!==1},unsafeLadder(n,r,i=e.ZERO){let o=n;for(;r>su;)r&Vr&&(i=i.add(o)),o=o.double(),r>>=Vr;return i},precomputeWindow(n,r){const{windows:i,windowSize:o}=is(r,t),s=[];let c=n,a=c;for(let u=0;u<i;u++){a=c,s.push(a);for(let f=1;f<o;f++)a=a.add(c),s.push(a);c=a.double()}return s},wNAF(n,r,i){const{windows:o,windowSize:s}=is(n,t);let c=e.ZERO,a=e.BASE;const u=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let d=0;d<o;d++){const b=d*s;let h=Number(i&u);i>>=l,h>s&&(h-=f,i+=Vr);const g=b,E=b+Math.abs(h)-1,U=d%2!==0,P=h<0;h===0?a=a.add(rs(U,r[g])):c=c.add(rs(P,r[E]))}return{p:c,f:a}},wNAFUnsafe(n,r,i,o=e.ZERO){const{windows:s,windowSize:c}=is(n,t),a=BigInt(2**n-1),u=2**n,f=BigInt(n);for(let l=0;l<s;l++){const d=l*c;if(i===su)break;let b=Number(i&a);if(i>>=f,b>c&&(b-=u,i+=Vr),b===0)continue;let h=r[d+Math.abs(b)-1];b<0&&(h=h.negate()),o=o.add(h)}return o},getPrecomputes(n,r,i){let o=os.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&os.set(r,i(o))),o},wNAFCached(n,r,i){const o=ss(n);return this.wNAF(o,this.getPrecomputes(o,n,i),r)},wNAFCachedUnsafe(n,r,i,o){const s=ss(n);return s===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,n,i),r,o)},setWindowSize(n,r){cu(r,t),au.set(n,r),os.delete(n)}}}function Sw(e,t,n,r){if(Dw(n,e),Aw(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,o=lw(BigInt(n.length)),s=o>12?o-3:o>4?o-2:o?2:1,c=(1<<s)-1,a=new Array(c+1).fill(i),u=Math.floor((t.BITS-1)/s)*s;let f=i;for(let l=u;l>=0;l-=s){a.fill(i);for(let b=0;b<r.length;b++){const h=r[b],g=Number(h>>BigInt(l)&BigInt(c));a[g]=a[g].add(n[b])}let d=i;for(let b=a.length-1,h=i;b>0;b--)h=h.add(a[b]),d=d.add(h);if(f=f.add(d),l!==0)for(let b=0;b<s;b++)f=f.double()}return f}function _w(e){return Ew(e.Fp),ts(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...iu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const qe=BigInt(0),Se=BigInt(1),qr=BigInt(2),Iw=BigInt(8),Uw={zip215:!0};function Ow(e){const t=_w(e);return ts(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Cw(e){const t=Ow(e),{Fp:n,n:r,prehash:i,hash:o,randomBytes:s,nByteLength:c,h:a}=t,u=qr<<BigInt(c*8)-Se,f=n.create,l=ou(t.n,t.nBitLength),d=t.uvRatio||((y,p)=>{try{return{isValid:!0,value:n.sqrt(y*n.inv(p))}}catch{return{isValid:!1,value:qe}}}),b=t.adjustScalarBytes||(y=>y),h=t.domain||((y,p,v)=>{if(Xo("phflag",v),p.length||v)throw new Error("Contexts/pre-hash are not supported");return y});function g(y,p){Yn("coordinate "+y,p,qe,u)}function E(y){if(!(y instanceof x))throw new Error("ExtendedPoint expected")}const U=eu((y,p)=>{const{ex:v,ey:S,ez:I}=y,N=y.is0();p==null&&(p=N?Iw:n.inv(I));const $=f(v*p),k=f(S*p),z=f(I*p);if(N)return{x:qe,y:Se};if(z!==Se)throw new Error("invZ was invalid");return{x:$,y:k}}),P=eu(y=>{const{a:p,d:v}=t;if(y.is0())throw new Error("bad point: ZERO");const{ex:S,ey:I,ez:N,et:$}=y,k=f(S*S),z=f(I*I),j=f(N*N),H=f(j*j),V=f(k*p),Z=f(j*f(V+z)),X=f(H+f(v*f(k*z)));if(Z!==X)throw new Error("bad point: equation left != right (1)");const W=f(S*I),ee=f(N*$);if(W!==ee)throw new Error("bad point: equation left != right (2)");return!0});class x{constructor(p,v,S,I){this.ex=p,this.ey=v,this.ez=S,this.et=I,g("x",p),g("y",v),g("z",S),g("t",I),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof x)throw new Error("extended point not allowed");const{x:v,y:S}=p||{};return g("x",v),g("y",S),new x(v,S,Se,f(v*S))}static normalizeZ(p){const v=n.invertBatch(p.map(S=>S.ez));return p.map((S,I)=>S.toAffine(v[I])).map(x.fromAffine)}static msm(p,v){return Sw(x,l,p,v)}_setWindowSize(p){F.setWindowSize(this,p)}assertValidity(){P(this)}equals(p){E(p);const{ex:v,ey:S,ez:I}=this,{ex:N,ey:$,ez:k}=p,z=f(v*k),j=f(N*I),H=f(S*k),V=f($*I);return z===j&&H===V}is0(){return this.equals(x.ZERO)}negate(){return new x(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){const{a:p}=t,{ex:v,ey:S,ez:I}=this,N=f(v*v),$=f(S*S),k=f(qr*f(I*I)),z=f(p*N),j=v+S,H=f(f(j*j)-N-$),V=z+$,Z=V-k,X=z-$,W=f(H*Z),ee=f(V*X),ne=f(H*X),Xe=f(Z*V);return new x(W,ee,Xe,ne)}add(p){E(p);const{a:v,d:S}=t,{ex:I,ey:N,ez:$,et:k}=this,{ex:z,ey:j,ez:H,et:V}=p;if(v===BigInt(-1)){const Kl=f((N-I)*(j+z)),Wl=f((N+I)*(j-z)),Is=f(Wl-Kl);if(Is===qe)return this.double();const Zl=f($*qr*V),Gl=f(k*qr*H),Yl=Gl+Zl,Xl=Wl+Kl,Jl=Gl-Zl,G3=f(Yl*Is),Y3=f(Xl*Jl),X3=f(Yl*Jl),J3=f(Is*Xl);return new x(G3,Y3,J3,X3)}const Z=f(I*z),X=f(N*j),W=f(k*S*V),ee=f($*H),ne=f((I+N)*(z+j)-Z-X),Xe=ee-W,Je=ee+W,Lt=f(X-v*Z),kt=f(ne*Xe),ni=f(Je*Lt),W3=f(ne*Lt),Z3=f(Xe*Je);return new x(kt,ni,Z3,W3)}subtract(p){return this.add(p.negate())}wNAF(p){return F.wNAFCached(this,p,x.normalizeZ)}multiply(p){const v=p;Yn("scalar",v,Se,r);const{p:S,f:I}=this.wNAF(v);return x.normalizeZ([S,I])[0]}multiplyUnsafe(p,v=x.ZERO){const S=p;return Yn("scalar",S,qe,r),S===qe?B:this.is0()||S===Se?this:F.wNAFCachedUnsafe(this,S,x.normalizeZ,v)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return F.unsafeLadder(this,r).is0()}toAffine(p){return U(this,p)}clearCofactor(){const{h:p}=t;return p===Se?this:this.multiplyUnsafe(p)}static fromHex(p,v=!1){const{d:S,a:I}=t,N=n.BYTES;p=ct("pointHex",p,N),Xo("zip215",v);const $=p.slice(),k=p[N-1];$[N-1]=k&-129;const z=jr($),j=v?u:n.ORDER;Yn("pointHex.y",z,qe,j);const H=f(z*z),V=f(H-Se),Z=f(S*H-I);let{isValid:X,value:W}=d(V,Z);if(!X)throw new Error("Point.fromHex: invalid y coordinate");const ee=(W&Se)===Se,ne=(k&128)!==0;if(!v&&W===qe&&ne)throw new Error("Point.fromHex: x=0 and x_0=1");return ne!==ee&&(W=f(-W)),x.fromAffine({x:W,y:z})}static fromPrivateKey(p){return m(p).point}toRawBytes(){const{x:p,y:v}=this.toAffine(),S=Qo(v,n.BYTES);return S[S.length-1]|=p&Se?128:0,S}toHex(){return Jo(this.toRawBytes())}}x.BASE=new x(t.Gx,t.Gy,Se,f(t.Gx*t.Gy)),x.ZERO=new x(qe,Se,Se,qe);const{BASE:D,ZERO:B}=x,F=Bw(x,c*8);function R(y){return ie(y,r)}function T(y){return R(jr(y))}function m(y){const p=n.BYTES;y=ct("private key",y,p);const v=ct("hashed private key",o(y),2*p),S=b(v.slice(0,p)),I=v.slice(p,2*p),N=T(S),$=D.multiply(N),k=$.toRawBytes();return{head:S,prefix:I,scalar:N,point:$,pointBytes:k}}function C(y){return m(y).pointBytes}function A(y=new Uint8Array,...p){const v=Qf(...p);return T(o(h(v,ct("context",y),!!i)))}function _(y,p,v={}){y=ct("message",y),i&&(y=i(y));const{prefix:S,scalar:I,pointBytes:N}=m(p),$=A(v.context,S,y),k=D.multiply($).toRawBytes(),z=A(v.context,k,N,y),j=R($+z*I);Yn("signature.s",j,qe,r);const H=Qf(k,Qo(j,n.BYTES));return ct("result",H,n.BYTES*2)}const O=Uw;function L(y,p,v,S=O){const{context:I,zip215:N}=S,$=n.BYTES;y=ct("signature",y,2*$),p=ct("message",p),v=ct("publicKey",v,$),N!==void 0&&Xo("zip215",N),i&&(p=i(p));const k=jr(y.slice($,2*$));let z,j,H;try{z=x.fromHex(v,N),j=x.fromHex(y.slice(0,$),N),H=D.multiplyUnsafe(k)}catch{return!1}if(!N&&z.isSmallOrder())return!1;const V=A(I,j.toRawBytes(),z.toRawBytes(),p);return j.add(z.multiplyUnsafe(V)).subtract(H).clearCofactor().equals(x.ZERO)}return D._setWindowSize(8),{CURVE:t,getPublicKey:C,sign:_,verify:L,ExtendedPoint:x,utils:{getExtendedPublicKey:m,randomPrivateKey:()=>s(n.BYTES),precompute(y=8,p=x.BASE){return p._setWindowSize(y),p.multiply(BigInt(3)),p}}}}BigInt(0),BigInt(1);const cs=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),fu=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Tw=BigInt(1),uu=BigInt(2);BigInt(3);const Nw=BigInt(5),$w=BigInt(8);function Rw(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=cs,s=e*e%o*e%o,c=Ye(s,uu,o)*s%o,a=Ye(c,Tw,o)*e%o,u=Ye(a,Nw,o)*a%o,f=Ye(u,t,o)*u%o,l=Ye(f,n,o)*f%o,d=Ye(l,r,o)*l%o,b=Ye(d,i,o)*d%o,h=Ye(b,i,o)*d%o,g=Ye(h,t,o)*u%o;return{pow_p_5_8:Ye(g,uu,o)*e%o,b2:s}}function Fw(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Pw(e,t){const n=cs,r=ie(t*t*t,n),i=ie(r*r*t,n),o=Rw(e*i).pow_p_5_8;let s=ie(e*r*o,n);const c=ie(t*s*s,n),a=s,u=ie(s*fu,n),f=c===e,l=c===ie(-e,n),d=c===ie(-e*fu,n);return f&&(s=a),(l||d)&&(s=u),yw(s,n)&&(s=ie(-s,n)),{isValid:f||l,value:s}}const Lw=ou(cs,void 0,!0),kw={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Lw,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:$w,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sw,randomBytes:Np,adjustScalarBytes:Fw,uvRatio:Pw};Cw(kw);const lu=".",du="base64url",Mw="utf8",zw="utf8";function hu(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Hw(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?hu(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function jw(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var c=e.length,a=e.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var g=0,E=0,U=0,P=h.length;U!==P&&h[U]===0;)U++,g++;for(var x=(P-U)*f+1>>>0,D=new Uint8Array(x);U!==P;){for(var B=h[U],F=0,R=x-1;(B!==0||F<E)&&R!==-1;R--,F++)B+=256*D[R]>>>0,D[R]=B%c>>>0,B=B/c>>>0;if(B!==0)throw new Error("Non-zero carry");E=F,U++}for(var T=x-E;T!==x&&D[T]===0;)T++;for(var m=a.repeat(g);T<x;++T)m+=e.charAt(D[T]);return m}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var g=0;if(h[g]!==" "){for(var E=0,U=0;h[g]===a;)E++,g++;for(var P=(h.length-g)*u+1>>>0,x=new Uint8Array(P);h[g];){var D=n[h.charCodeAt(g)];if(D===255)return;for(var B=0,F=P-1;(D!==0||B<U)&&F!==-1;F--,B++)D+=c*x[F]>>>0,x[F]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");U=B,g++}if(h[g]!==" "){for(var R=P-U;R!==P&&x[R]===0;)R++;for(var T=new Uint8Array(E+(P-R)),m=E;R!==P;)T[m++]=x[R++];return T}}}function b(h){var g=d(h);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:d,decode:b}}var Vw=jw,qw=Vw;const gu=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Kw=e=>new TextEncoder().encode(e),Ww=e=>new TextDecoder().decode(e);class Zw{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Gw{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return bu(this,t)}}class Yw{constructor(t){this.decoders=t}or(t){return bu(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const bu=(e,t)=>new Yw({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Xw{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Zw(t,n,r),this.decoder=new Gw(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Kr=({name:e,prefix:t,encode:n,decode:r})=>new Xw(e,t,n,r),Xn=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=qw(n,t);return Kr({prefix:e,name:t,encode:r,decode:o=>gu(i(o))})},Jw=(e,t,n,r)=>{const i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let c=0,a=0,u=0;for(let f=0;f<o;++f){const l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<n|l,c+=n,c>=8&&(c-=8,s[u++]=255&a>>c)}if(c>=n||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},Qw=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,c=0;for(let a=0;a<e.length;++a)for(c=c<<8|e[a],s+=8;s>n;)s-=n,o+=t[i&c>>s];if(s&&(o+=t[i&c<<n-s]),r)for(;o.length*n&7;)o+="=";return o},fe=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Kr({prefix:t,name:e,encode(i){return Qw(i,r,n)},decode(i){return Jw(i,r,n,e)}}),e2=Kr({prefix:"\0",name:"identity",encode:e=>Ww(e),decode:e=>Kw(e)});var t2=Object.freeze({__proto__:null,identity:e2});const n2=fe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var r2=Object.freeze({__proto__:null,base2:n2});const i2=fe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var o2=Object.freeze({__proto__:null,base8:i2});const s2=Xn({prefix:"9",name:"base10",alphabet:"0123456789"});var c2=Object.freeze({__proto__:null,base10:s2});const a2=fe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),f2=fe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var u2=Object.freeze({__proto__:null,base16:a2,base16upper:f2});const l2=fe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),d2=fe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),h2=fe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),g2=fe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),b2=fe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),p2=fe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),w2=fe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),y2=fe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),m2=fe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var E2=Object.freeze({__proto__:null,base32:l2,base32upper:d2,base32pad:h2,base32padupper:g2,base32hex:b2,base32hexupper:p2,base32hexpad:w2,base32hexpadupper:y2,base32z:m2});const x2=Xn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),v2=Xn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var D2=Object.freeze({__proto__:null,base36:x2,base36upper:v2});const A2=Xn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),B2=Xn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var S2=Object.freeze({__proto__:null,base58btc:A2,base58flickr:B2});const _2=fe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),I2=fe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),U2=fe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),O2=fe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var C2=Object.freeze({__proto__:null,base64:_2,base64pad:I2,base64url:U2,base64urlpad:O2});const pu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),T2=pu.reduce((e,t,n)=>(e[n]=t,e),[]),N2=pu.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function $2(e){return e.reduce((t,n)=>(t+=T2[n],t),"")}function R2(e){const t=[];for(const n of e){const r=N2[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const F2=Kr({prefix:"\u{1F680}",name:"base256emoji",encode:$2,decode:R2});var P2=Object.freeze({__proto__:null,base256emoji:F2}),L2=yu,wu=128,k2=127,M2=~k2,z2=Math.pow(2,31);function yu(e,t,n){t=t||[],n=n||0;for(var r=n;e>=z2;)t[n++]=e&255|wu,e/=128;for(;e&M2;)t[n++]=e&255|wu,e>>>=7;return t[n]=e|0,yu.bytes=n-r+1,t}var H2=as,j2=128,mu=127;function as(e,r){var n=0,r=r||0,i=0,o=r,s,c=e.length;do{if(o>=c)throw as.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&mu)<<i:(s&mu)*Math.pow(2,i),i+=7}while(s>=j2);return as.bytes=o-r,n}var V2=Math.pow(2,7),q2=Math.pow(2,14),K2=Math.pow(2,21),W2=Math.pow(2,28),Z2=Math.pow(2,35),G2=Math.pow(2,42),Y2=Math.pow(2,49),X2=Math.pow(2,56),J2=Math.pow(2,63),Q2=function(e){return e<V2?1:e<q2?2:e<K2?3:e<W2?4:e<Z2?5:e<G2?6:e<Y2?7:e<X2?8:e<J2?9:10},ey={encode:L2,decode:H2,encodingLength:Q2},Eu=ey;const xu=(e,t,n=0)=>(Eu.encode(e,t,n),t),vu=e=>Eu.encodingLength(e),fs=(e,t)=>{const n=t.byteLength,r=vu(e),i=r+vu(n),o=new Uint8Array(i+n);return xu(e,o,0),xu(n,o,r),o.set(t,i),new ty(e,n,t,o)};class ty{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const Du=({name:e,code:t,encode:n})=>new ny(e,t,n);class ny{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?fs(this.code,n):n.then(r=>fs(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Au=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ry=Du({name:"sha2-256",code:18,encode:Au("SHA-256")}),iy=Du({name:"sha2-512",code:19,encode:Au("SHA-512")});var oy=Object.freeze({__proto__:null,sha256:ry,sha512:iy});const Bu=0,sy="identity",Su=gu;var cy=Object.freeze({__proto__:null,identity:{code:Bu,name:sy,encode:Su,digest:e=>fs(Bu,Su(e))}});new TextEncoder,new TextDecoder;const _u={...t2,...r2,...o2,...c2,...u2,...E2,...D2,...S2,...C2,...P2};({...oy,...cy});function Iu(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Uu=Iu("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),us=Iu("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=Hw(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),Ou={utf8:Uu,"utf-8":Uu,hex:_u.base16,latin1:us,ascii:us,binary:us,..._u};function ay(e,t="utf8"){const n=Ou[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function ls(e,t="utf8"){const n=Ou[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?hu(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Cu(e){return _p(ay(ls(e,du),Mw))}function fy(e){return ls(e,du)}function uy(e){const t=e.split(lu),n=Cu(t[0]),r=Cu(t[1]),i=fy(t[2]),o=ls(t.slice(0,2).join(lu),zw);return{header:n,payload:r,signature:i,data:o}}function ds(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Tu(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ds(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Jn(e,t){t||(t=e.reduce((i,o)=>i+o.length,0));const n=Tu(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return ds(n)}function ly(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var c=e.length,a=e.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var g=0,E=0,U=0,P=h.length;U!==P&&h[U]===0;)U++,g++;for(var x=(P-U)*f+1>>>0,D=new Uint8Array(x);U!==P;){for(var B=h[U],F=0,R=x-1;(B!==0||F<E)&&R!==-1;R--,F++)B+=256*D[R]>>>0,D[R]=B%c>>>0,B=B/c>>>0;if(B!==0)throw new Error("Non-zero carry");E=F,U++}for(var T=x-E;T!==x&&D[T]===0;)T++;for(var m=a.repeat(g);T<x;++T)m+=e.charAt(D[T]);return m}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var g=0;if(h[g]!==" "){for(var E=0,U=0;h[g]===a;)E++,g++;for(var P=(h.length-g)*u+1>>>0,x=new Uint8Array(P);h[g];){var D=n[h.charCodeAt(g)];if(D===255)return;for(var B=0,F=P-1;(D!==0||B<U)&&F!==-1;F--,B++)D+=c*x[F]>>>0,x[F]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");U=B,g++}if(h[g]!==" "){for(var R=P-U;R!==P&&x[R]===0;)R++;for(var T=new Uint8Array(E+(P-R)),m=E;R!==P;)T[m++]=x[R++];return T}}}function b(h){var g=d(h);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:d,decode:b}}var dy=ly,hy=dy;const Nu=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},gy=e=>new TextEncoder().encode(e),by=e=>new TextDecoder().decode(e);class py{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class wy{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return $u(this,t)}}class yy{constructor(t){this.decoders=t}or(t){return $u(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $u=(e,t)=>new yy({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class my{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new py(t,n,r),this.decoder=new wy(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Wr=({name:e,prefix:t,encode:n,decode:r})=>new my(e,t,n,r),Qn=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=hy(n,t);return Wr({prefix:e,name:t,encode:r,decode:o=>Nu(i(o))})},Ey=(e,t,n,r)=>{const i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let c=0,a=0,u=0;for(let f=0;f<o;++f){const l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<n|l,c+=n,c>=8&&(c-=8,s[u++]=255&a>>c)}if(c>=n||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},xy=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,c=0;for(let a=0;a<e.length;++a)for(c=c<<8|e[a],s+=8;s>n;)s-=n,o+=t[i&c>>s];if(s&&(o+=t[i&c<<n-s]),r)for(;o.length*n&7;)o+="=";return o},ue=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Wr({prefix:t,name:e,encode(i){return xy(i,r,n)},decode(i){return Ey(i,r,n,e)}}),vy=Wr({prefix:"\0",name:"identity",encode:e=>by(e),decode:e=>gy(e)});var Dy=Object.freeze({__proto__:null,identity:vy});const Ay=ue({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var By=Object.freeze({__proto__:null,base2:Ay});const Sy=ue({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var _y=Object.freeze({__proto__:null,base8:Sy});const Iy=Qn({prefix:"9",name:"base10",alphabet:"0123456789"});var Uy=Object.freeze({__proto__:null,base10:Iy});const Oy=ue({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Cy=ue({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ty=Object.freeze({__proto__:null,base16:Oy,base16upper:Cy});const Ny=ue({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$y=ue({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ry=ue({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Fy=ue({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Py=ue({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ly=ue({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ky=ue({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),My=ue({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),zy=ue({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Hy=Object.freeze({__proto__:null,base32:Ny,base32upper:$y,base32pad:Ry,base32padupper:Fy,base32hex:Py,base32hexupper:Ly,base32hexpad:ky,base32hexpadupper:My,base32z:zy});const jy=Qn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vy=Qn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qy=Object.freeze({__proto__:null,base36:jy,base36upper:Vy});const Ky=Qn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wy=Qn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Zy=Object.freeze({__proto__:null,base58btc:Ky,base58flickr:Wy});const Gy=ue({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Yy=ue({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Xy=ue({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Jy=ue({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Qy=Object.freeze({__proto__:null,base64:Gy,base64pad:Yy,base64url:Xy,base64urlpad:Jy});const Ru=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),em=Ru.reduce((e,t,n)=>(e[n]=t,e),[]),tm=Ru.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function nm(e){return e.reduce((t,n)=>(t+=em[n],t),"")}function rm(e){const t=[];for(const n of e){const r=tm[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const im=Wr({prefix:"\u{1F680}",name:"base256emoji",encode:nm,decode:rm});var om=Object.freeze({__proto__:null,base256emoji:im}),sm=Pu,Fu=128,cm=127,am=~cm,fm=Math.pow(2,31);function Pu(e,t,n){t=t||[],n=n||0;for(var r=n;e>=fm;)t[n++]=e&255|Fu,e/=128;for(;e&am;)t[n++]=e&255|Fu,e>>>=7;return t[n]=e|0,Pu.bytes=n-r+1,t}var um=hs,lm=128,Lu=127;function hs(e,r){var n=0,r=r||0,i=0,o=r,s,c=e.length;do{if(o>=c)throw hs.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&Lu)<<i:(s&Lu)*Math.pow(2,i),i+=7}while(s>=lm);return hs.bytes=o-r,n}var dm=Math.pow(2,7),hm=Math.pow(2,14),gm=Math.pow(2,21),bm=Math.pow(2,28),pm=Math.pow(2,35),wm=Math.pow(2,42),ym=Math.pow(2,49),mm=Math.pow(2,56),Em=Math.pow(2,63),xm=function(e){return e<dm?1:e<hm?2:e<gm?3:e<bm?4:e<pm?5:e<wm?6:e<ym?7:e<mm?8:e<Em?9:10},vm={encode:sm,decode:um,encodingLength:xm},ku=vm;const Mu=(e,t,n=0)=>(ku.encode(e,t,n),t),zu=e=>ku.encodingLength(e),gs=(e,t)=>{const n=t.byteLength,r=zu(e),i=r+zu(n),o=new Uint8Array(i+n);return Mu(e,o,0),Mu(n,o,r),o.set(t,i),new Dm(e,n,t,o)};class Dm{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const Hu=({name:e,code:t,encode:n})=>new Am(e,t,n);class Am{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?gs(this.code,n):n.then(r=>gs(this.code,r))}else throw Error("Unknown type, must be binary type")}}const ju=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Bm=Hu({name:"sha2-256",code:18,encode:ju("SHA-256")}),Sm=Hu({name:"sha2-512",code:19,encode:ju("SHA-512")});var _m=Object.freeze({__proto__:null,sha256:Bm,sha512:Sm});const Vu=0,Im="identity",qu=Nu;var Um=Object.freeze({__proto__:null,identity:{code:Vu,name:Im,encode:qu,digest:e=>gs(Vu,qu(e))}});new TextEncoder,new TextDecoder;const Ku={...Dy,...By,..._y,...Uy,...Ty,...Hy,...qy,...Zy,...Qy,...om};({..._m,...Um});function Wu(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Zu=Wu("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),bs=Wu("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=Tu(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),Gu={utf8:Zu,"utf-8":Zu,hex:Ku.base16,latin1:bs,ascii:bs,binary:bs,...Ku};function Me(e,t="utf8"){const n=Gu[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ds(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Ce(e,t="utf8"){const n=Gu[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const ps="base10",xe="base16",bn="base64pad",Zr="base64url",pn="utf8",ws=0,wn=1,er=2,Om=0,Yu=1,tr=12,ys=32;function Cm(){const e=Vo.utils.randomPrivateKey(),t=Vo.getPublicKey(e);return{privateKey:Ce(e,xe),publicKey:Ce(t,xe)}}function Tm(){const e=wt(ys);return Ce(e,xe)}function Nm(e,t){const n=Vo.getSharedSecret(Me(e,xe),Me(t,xe)),r=Mb(hr,n,void 0,void 0,ys);return Ce(r,xe)}function $m(e){const t=hr(Me(e,xe));return Ce(t,xe)}function Rm(e){const t=hr(Me(e,pn));return Ce(t,xe)}function ms(e){return Me(`${e}`,ps)}function Jt(e){return Number(Ce(e,ps))}function Xu(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Ju(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function Fm(e){const t=ms(typeof e.type<"u"?e.type:ws);if(Jt(t)===wn&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Me(e.senderPublicKey,xe):void 0,r=typeof e.iv<"u"?Me(e.iv,xe):wt(tr),i=Me(e.symKey,xe),o=Ef(i,r).encrypt(Me(e.message,pn)),s=Es({type:t,sealed:o,iv:r,senderPublicKey:n});return e.encoding===Zr?Xu(s):s}function Pm(e){const t=Me(e.symKey,xe),{sealed:n,iv:r}=Gr({encoded:e.encoded,encoding:e.encoding}),i=Ef(t,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Ce(i,pn)}function Lm(e,t){const n=ms(er),r=wt(tr),i=Me(e,pn),o=Es({type:n,sealed:i,iv:r});return t===Zr?Xu(o):o}function km(e,t){const{sealed:n}=Gr({encoded:e,encoding:t});return Ce(n,pn)}function Es(e){if(Jt(e.type)===er)return Ce(Jn([e.type,e.sealed]),bn);if(Jt(e.type)===wn){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ce(Jn([e.type,e.senderPublicKey,e.iv,e.sealed]),bn)}return Ce(Jn([e.type,e.iv,e.sealed]),bn)}function Gr(e){const t=(e.encoding||bn)===Zr?Ju(e.encoded):e.encoded,n=Me(t,bn),r=n.slice(Om,Yu),i=Yu;if(Jt(r)===wn){const a=i+ys,u=a+tr,f=n.slice(i,a),l=n.slice(a,u),d=n.slice(u);return{type:r,sealed:d,iv:l,senderPublicKey:f}}if(Jt(r)===er){const a=n.slice(i),u=wt(tr);return{type:r,sealed:a,iv:u}}const o=i+tr,s=n.slice(i,o),c=n.slice(o);return{type:r,sealed:c,iv:s}}function Mm(e,t){const n=Gr({encoded:e,encoding:t?.encoding});return Qu({type:Jt(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Ce(n.senderPublicKey,xe):void 0,receiverPublicKey:t?.receiverPublicKey})}function Qu(e){const t=e?.type||ws;if(t===wn){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function zm(e){return e.type===wn&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function Hm(e){return e.type===er}function el(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return Jn([new Uint8Array([4]),t,n])}function jm(e,t){const[n,r,i]=e.split("."),o=Buffer.from(Ju(i),"base64");if(o.length!==64)throw new Error("Invalid signature length");const s=o.slice(0,32),c=o.slice(32,64),a=`${n}.${r}`,u=hr(a),f=el(t);if(!Bp.verify(Jn([s,c]),u,f))throw new Error("Invalid signature");return uy(e).payload}const Vm={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},tl="irn";function qm(e){return e?.relay||{protocol:tl}}function Km(e){const t=Vm[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function nl(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(r)){const o=i.replace(r,""),s=e[i];n[o]=s}}),n}function Wm(e){if(!e.includes("wc:")){const u=xi(e);u!=null&&u.includes("wc:")&&(e=u)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),i=e.substring(t+1,n).split("@"),o=typeof n<"u"?e.substring(n):"",s=new URLSearchParams(o),c={};s.forEach((u,f)=>{c[f]=u});const a=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:r,topic:rl(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:nl(c),methods:a,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function rl(e){return e.startsWith("//")?e.substring(2):e}function il(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(i=>{const o=i,s=n+t+o;e[o]&&(r[s]=e[o])}),r}function Zm(e){const t=new URLSearchParams,n=il(e.relay);Object.keys(n).sort().forEach(i=>{t.set(i,n[i])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function Gm(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var Ym=Object.defineProperty,Xm=Object.defineProperties,Jm=Object.getOwnPropertyDescriptors,ol=Object.getOwnPropertySymbols,Qm=Object.prototype.hasOwnProperty,e3=Object.prototype.propertyIsEnumerable,sl=(e,t,n)=>t in e?Ym(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,t3=(e,t)=>{for(var n in t||(t={}))Qm.call(t,n)&&sl(e,n,t[n]);if(ol)for(var n of ol(t))e3.call(t,n)&&sl(e,n,t[n]);return e},n3=(e,t)=>Xm(e,Jm(t));function Qt(e){const t=[];return e.forEach(n=>{const[r,i]=n.split(":");t.push(`${r}:${i}`)}),t}function cl(e){const t=[];return Object.values(e).forEach(n=>{t.push(...Qt(n.accounts))}),t}function al(e,t){const n=[];return Object.values(e).forEach(r=>{Qt(r.accounts).includes(t)&&n.push(...r.methods)}),n}function fl(e,t){const n=[];return Object.values(e).forEach(r=>{Qt(r.accounts).includes(t)&&n.push(...r.events)}),n}function r3(e,t){const n=El(e,t);if(n)throw new Error(n.message);const r={};for(const[i,o]of Object.entries(e))r[i]={methods:o.methods,events:o.events,chains:o.accounts.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)};return r}function i3(e){var t;const{proposal:{requiredNamespaces:n,optionalNamespaces:r={}},supportedNamespaces:i}=e,o=nr(n),s=nr(r),c={};Object.keys(i).forEach(f=>{const l=i[f].chains,d=i[f].methods,b=i[f].events,h=i[f].accounts;l.forEach(g=>{if(!h.some(E=>E.includes(g)))throw new Error(`No accounts provided for chain ${g} in namespace ${f}`)}),c[f]={chains:l,methods:d,events:b,accounts:h}});const a=vl(n,c,"approve()");if(a)throw new Error(a.message);const u={};if(!Object.keys(n).length&&!Object.keys(r).length)return c;Object.keys(o).forEach(f=>{const l=i[f].chains.filter(g=>{var E,U;return(U=(E=o[f])==null?void 0:E.chains)==null?void 0:U.includes(g)}),d=i[f].methods.filter(g=>{var E,U;return(U=(E=o[f])==null?void 0:E.methods)==null?void 0:U.includes(g)}),b=i[f].events.filter(g=>{var E,U;return(U=(E=o[f])==null?void 0:E.events)==null?void 0:U.includes(g)}),h=l.map(g=>i[f].accounts.filter(E=>E.includes(`${g}:`))).flat();u[f]={chains:l,methods:d,events:b,accounts:h}}),Object.keys(s).forEach(f=>{var l,d,b,h,g,E;if(!i[f])return;const U=(d=(l=s[f])==null?void 0:l.chains)==null?void 0:d.filter(B=>i[f].chains.includes(B)),P=i[f].methods.filter(B=>{var F,R;return(R=(F=s[f])==null?void 0:F.methods)==null?void 0:R.includes(B)}),x=i[f].events.filter(B=>{var F,R;return(R=(F=s[f])==null?void 0:F.events)==null?void 0:R.includes(B)}),D=U?.map(B=>i[f].accounts.filter(F=>F.includes(`${B}:`))).flat();u[f]={chains:Ne((b=u[f])==null?void 0:b.chains,U),methods:Ne((h=u[f])==null?void 0:h.methods,P),events:Ne((g=u[f])==null?void 0:g.events,x),accounts:Ne((E=u[f])==null?void 0:E.accounts,D)}});for(const[f,l]of Object.entries(u))(l.accounts.length===0||((t=l?.chains)==null?void 0:t.length)===0)&&delete u[f];return u}function xs(e){return e.includes(":")}function ul(e){return xs(e)?e.split(":")[0]:e}function nr(e){var t,n,r;const i={};if(!Yr(e))return i;for(const[o,s]of Object.entries(e)){const c=xs(o)?[o]:s.chains,a=s.methods||[],u=s.events||[],f=ul(o);i[f]=n3(t3({},i[f]),{chains:Ne(c,(t=i[f])==null?void 0:t.chains),methods:Ne(a,(n=i[f])==null?void 0:n.methods),events:Ne(u,(r=i[f])==null?void 0:r.events)})}return i}function ll(e){const t={};return e?.forEach(n=>{var r;const[i,o]=n.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(n),(r=t[i].chains)==null||r.push(`${i}:${o}`)}),t}function o3(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=ll(t);for(const[r,i]of Object.entries(n))i.methods?i.methods=Ne(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return n}function s3(e,t){var n,r,i,o,s,c;const a=nr(e),u=nr(t),f={},l=Object.keys(a).concat(Object.keys(u));for(const d of l)f[d]={chains:Ne((n=a[d])==null?void 0:n.chains,(r=u[d])==null?void 0:r.chains),methods:Ne((i=a[d])==null?void 0:i.methods,(o=u[d])==null?void 0:o.methods),events:Ne((s=a[d])==null?void 0:s.events,(c=u[d])==null?void 0:c.events)};return f}const dl={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},hl={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function at(e,t){const{message:n,code:r}=hl[e];return{message:t?`${n} ${t}`:n,code:r}}function en(e,t){const{message:n,code:r}=dl[e];return{message:t?`${n} ${t}`:n,code:r}}function rr(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Yr(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function $t(e){return typeof e>"u"}function Te(e,t){return t&&$t(e)?!0:typeof e=="string"&&!!e.trim().length}function Xr(e,t){return t&&$t(e)?!0:typeof e=="number"&&!isNaN(e)}function c3(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n);let o=!0;return lt(i,r)?(r.forEach(s=>{const{accounts:c,methods:a,events:u}=e.namespaces[s],f=Qt(c),l=n[s];(!lt(ar(s,l),f)||!lt(l.methods,a)||!lt(l.events,u))&&(o=!1)}),o):!1}function ir(e){return Te(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function gl(e){if(Te(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&ir(n)}}return!1}function a3(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Te(e,!1)){if(t(e))return!0;const n=xi(e);return t(n)}}catch{}return!1}function f3(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function u3(e){return e?.topic}function l3(e,t){let n=null;return Te(e?.publicKey,!1)||(n=at("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function vs(e){let t=!0;return rr(e)?e.length&&(t=e.every(n=>Te(n,!1))):t=!1,t}function bl(e,t,n){let r=null;return rr(t)&&t.length?t.forEach(i=>{r||ir(i)||(r=en("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):ir(e)||(r=en("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function pl(e,t,n){let r=null;return Object.entries(e).forEach(([i,o])=>{if(r)return;const s=bl(i,ar(i,o),`${t} ${n}`);s&&(r=s)}),r}function wl(e,t){let n=null;return rr(e)?e.forEach(r=>{n||gl(r)||(n=en("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=en("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function yl(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=wl(r?.accounts,`${t} namespace`);i&&(n=i)}),n}function ml(e,t){let n=null;return vs(e?.methods)?vs(e?.events)||(n=en("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=en("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function Ds(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=ml(r,`${t}, namespace`);i&&(n=i)}),n}function d3(e,t,n){let r=null;if(e&&Yr(e)){const i=Ds(e,t);i&&(r=i);const o=pl(e,t,n);o&&(r=o)}else r=at("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function El(e,t){let n=null;if(e&&Yr(e)){const r=Ds(e,t);r&&(n=r);const i=yl(e,t);i&&(n=i)}else n=at("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function xl(e){return Te(e.protocol,!0)}function h3(e,t){let n=!1;return t&&!e?n=!0:e&&rr(e)&&e.length&&e.forEach(r=>{n=xl(r)}),n}function g3(e){return typeof e=="number"}function b3(e){return typeof e<"u"&&typeof e!==null}function p3(e){return!(!e||typeof e!="object"||!e.code||!Xr(e.code,!1)||!e.message||!Te(e.message,!1))}function w3(e){return!($t(e)||!Te(e.method,!1))}function y3(e){return!($t(e)||$t(e.result)&&$t(e.error)||!Xr(e.id,!1)||!Te(e.jsonrpc,!1))}function m3(e){return!($t(e)||!Te(e.name,!1))}function E3(e,t){return!(!ir(t)||!cl(e).includes(t))}function x3(e,t,n){return Te(n,!1)?al(e,t).includes(n):!1}function v3(e,t,n){return Te(n,!1)?fl(e,t).includes(n):!1}function vl(e,t,n){let r=null;const i=D3(e),o=A3(t),s=Object.keys(i),c=Object.keys(o),a=Dl(Object.keys(e)),u=Dl(Object.keys(t)),f=a.filter(l=>!u.includes(l));return f.length&&(r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(t).toString()}`)),lt(s,c)||(r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${s.toString()}
      Approved: ${c.toString()}`)),Object.keys(t).forEach(l=>{if(!l.includes(":")||r)return;const d=Qt(t[l].accounts);d.includes(l)||(r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${l}
        Required: ${l}
        Approved: ${d.toString()}`))}),s.forEach(l=>{r||(lt(i[l].methods,o[l].methods)?lt(i[l].events,o[l].events)||(r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${l}`)):r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${l}`))}),r}function D3(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(i=>{t[i]={methods:e[n].methods,events:e[n].events}})}),t}function Dl(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function A3(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{const r=Qt(e[n].accounts);r?.forEach(i=>{t[i]={accounts:e[n].accounts.filter(o=>o.includes(`${i}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function B3(e,t){return Xr(e,!1)&&e<=t.max&&e>=t.min}function S3(){const e=Vt();return new Promise(t=>{switch(e){case we.browser:t(Al());break;case we.reactNative:t(Bl());break;case we.node:t(Sl());break;default:t(!0)}})}function Al(){return on()&&navigator?.onLine}async function Bl(){if(ut()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e?.isConnected}return!0}function Sl(){return!0}function _3(e){switch(Vt()){case we.browser:_l(e);break;case we.reactNative:Il(e);break;case we.node:break}}function _l(e){!ut()&&on()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function Il(e){ut()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function I3(){var e;return on()&&rn()?((e=rn())==null?void 0:e.visibilityState)==="visible":!0}const As={};class U3{static get(t){return As[t]}static set(t,n){As[t]=n}static delete(t){delete As[t]}}const O3="Input must be an string, Buffer or Uint8Array";function C3(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(O3);return t}function T3(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function Jr(e){return(4294967296+e).toString(16).substring(1)}function N3(e,t,n){let r=`
`+e+" = ";for(let i=0;i<t.length;i+=2){if(n===32)r+=Jr(t[i]).toUpperCase(),r+=" ",r+=Jr(t[i+1]).toUpperCase();else if(n===64)r+=Jr(t[i+1]).toUpperCase(),r+=Jr(t[i]).toUpperCase();else throw new Error("Invalid size "+n);i%6===4?r+=`
`+new Array(e.length+4).join(" "):i<t.length-2&&(r+=" ")}console.log(r)}function $3(e,t,n){let r=new Date().getTime();const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=s%256;const o=new Date().getTime();console.log("Generated random input in "+(o-r)+"ms"),r=o;for(let s=0;s<n;s++){const c=e(i),a=new Date().getTime(),u=a-r;r=a,console.log("Hashed in "+u+"ms: "+c.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}var Ul={normalizeInput:C3,toHex:T3,debugPrint:N3,testSpeed:$3};const Qr=Ul;function ei(e,t,n){const r=e[t]+e[n];let i=e[t+1]+e[n+1];r>=4294967296&&i++,e[t]=r,e[t+1]=i}function Ol(e,t,n,r){let i=e[t]+n;n<0&&(i+=4294967296);let o=e[t+1]+r;i>=4294967296&&o++,e[t]=i,e[t+1]=o}function Cl(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Rt(e,t,n,r,i,o){const s=or[i],c=or[i+1],a=or[o],u=or[o+1];ei(q,e,t),Ol(q,e,s,c);let f=q[r]^q[e],l=q[r+1]^q[e+1];q[r]=l,q[r+1]=f,ei(q,n,r),f=q[t]^q[n],l=q[t+1]^q[n+1],q[t]=f>>>24^l<<8,q[t+1]=l>>>24^f<<8,ei(q,e,t),Ol(q,e,a,u),f=q[r]^q[e],l=q[r+1]^q[e+1],q[r]=f>>>16^l<<16,q[r+1]=l>>>16^f<<16,ei(q,n,r),f=q[t]^q[n],l=q[t+1]^q[n+1],q[t]=l>>>31^f<<1,q[t+1]=f>>>31^l<<1}const Tl=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),R3=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],be=new Uint8Array(R3.map(function(e){return e*2})),q=new Uint32Array(32),or=new Uint32Array(32);function Nl(e,t){let n=0;for(n=0;n<16;n++)q[n]=e.h[n],q[n+16]=Tl[n];for(q[24]=q[24]^e.t,q[25]=q[25]^e.t/4294967296,t&&(q[28]=~q[28],q[29]=~q[29]),n=0;n<32;n++)or[n]=Cl(e.b,4*n);for(n=0;n<12;n++)Rt(0,8,16,24,be[n*16+0],be[n*16+1]),Rt(2,10,18,26,be[n*16+2],be[n*16+3]),Rt(4,12,20,28,be[n*16+4],be[n*16+5]),Rt(6,14,22,30,be[n*16+6],be[n*16+7]),Rt(0,10,20,30,be[n*16+8],be[n*16+9]),Rt(2,12,22,24,be[n*16+10],be[n*16+11]),Rt(4,14,16,26,be[n*16+12],be[n*16+13]),Rt(6,8,18,28,be[n*16+14],be[n*16+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^q[n]^q[n+16]}const Ft=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function $l(e,t,n,r){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};Ft.fill(0),Ft[0]=e,t&&(Ft[1]=t.length),Ft[2]=1,Ft[3]=1,n&&Ft.set(n,32),r&&Ft.set(r,48);for(let o=0;o<16;o++)i.h[o]=Tl[o]^Cl(Ft,o*4);return t&&(Bs(i,t),i.c=128),i}function Bs(e,t){for(let n=0;n<t.length;n++)e.c===128&&(e.t+=e.c,Nl(e,!1),e.c=0),e.b[e.c++]=t[n]}function Rl(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;Nl(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3);return t}function Fl(e,t,n,r,i){n=n||64,e=Qr.normalizeInput(e),r&&(r=Qr.normalizeInput(r)),i&&(i=Qr.normalizeInput(i));const o=$l(n,t,r,i);return Bs(o,e),Rl(o)}function F3(e,t,n,r,i){const o=Fl(e,t,n,r,i);return Qr.toHex(o)}var P3={blake2b:Fl,blake2bHex:F3,blake2bInit:$l,blake2bUpdate:Bs,blake2bFinal:Rl};const Pl=Ul;function L3(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Pt(e,t,n,r,i,o){Y[e]=Y[e]+Y[t]+i,Y[r]=ti(Y[r]^Y[e],16),Y[n]=Y[n]+Y[r],Y[t]=ti(Y[t]^Y[n],12),Y[e]=Y[e]+Y[t]+o,Y[r]=ti(Y[r]^Y[e],8),Y[n]=Y[n]+Y[r],Y[t]=ti(Y[t]^Y[n],7)}function ti(e,t){return e>>>t^e<<32-t}const Ll=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pe=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Y=new Uint32Array(16),le=new Uint32Array(16);function kl(e,t){let n=0;for(n=0;n<8;n++)Y[n]=e.h[n],Y[n+8]=Ll[n];for(Y[12]^=e.t,Y[13]^=e.t/4294967296,t&&(Y[14]=~Y[14]),n=0;n<16;n++)le[n]=L3(e.b,4*n);for(n=0;n<10;n++)Pt(0,4,8,12,le[pe[n*16+0]],le[pe[n*16+1]]),Pt(1,5,9,13,le[pe[n*16+2]],le[pe[n*16+3]]),Pt(2,6,10,14,le[pe[n*16+4]],le[pe[n*16+5]]),Pt(3,7,11,15,le[pe[n*16+6]],le[pe[n*16+7]]),Pt(0,5,10,15,le[pe[n*16+8]],le[pe[n*16+9]]),Pt(1,6,11,12,le[pe[n*16+10]],le[pe[n*16+11]]),Pt(2,7,8,13,le[pe[n*16+12]],le[pe[n*16+13]]),Pt(3,4,9,14,le[pe[n*16+14]],le[pe[n*16+15]]);for(n=0;n<8;n++)e.h[n]^=Y[n]^Y[n+8]}function Ml(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(Ll),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(Ss(r,t),r.c=64),r}function Ss(e,t){for(let n=0;n<t.length;n++)e.c===64&&(e.t+=e.c,kl(e,!1),e.c=0),e.b[e.c++]=t[n]}function zl(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;kl(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3)&255;return t}function Hl(e,t,n){n=n||32,e=Pl.normalizeInput(e);const r=Ml(n,t);return Ss(r,e),zl(r)}function k3(e,t,n){const r=Hl(e,t,n);return Pl.toHex(r)}var M3={blake2s:Hl,blake2sHex:k3,blake2sInit:Ml,blake2sUpdate:Ss,blake2sFinal:zl};const sr=P3,cr=M3;var z3={blake2b:sr.blake2b,blake2bHex:sr.blake2bHex,blake2bInit:sr.blake2bInit,blake2bUpdate:sr.blake2bUpdate,blake2bFinal:sr.blake2bFinal,blake2s:cr.blake2s,blake2sHex:cr.blake2sHex,blake2sInit:cr.blake2sInit,blake2sUpdate:cr.blake2sUpdate,blake2sFinal:cr.blake2sFinal};function jl(e){const t=Mn.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function Vl({publicKey:e,signature:t,payload:n}){var r;const i=_s(n.method),o=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),s=j3(n.address),c=n.era==="00"?new Uint8Array([0]):_s(n.era);if(c.length!==1&&c.length!==2)throw new Error("Invalid era length");const a=parseInt(n.nonce,16),u=new Uint8Array([a&255,a>>8&255]),f=BigInt(`0x${H3(n.tip)}`),l=q3(f),d=new Uint8Array([0,...e,s,...t,...c,...u,...l,...i]),b=V3(d.length+1);return new Uint8Array([...b,o,...d])}function ql(e){const t=_s(e),n=z3.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function _s(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function H3(e){return e.startsWith("0x")?e.slice(2):e}function j3(e){const t=Mn.decode(e)[0];return t===42?0:t===60?2:1}function V3(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function q3(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function K3(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=jl(e.transaction.address),r=Vl({publicKey:n,signature:t,payload:e.transaction}),i=Buffer.from(r).toString("hex");return ql(i)}w.BASE10=ps,w.BASE16=xe,w.BASE64=bn,w.BASE64URL=Zr,w.COLON=fh,w.DEFAULT_DEPTH=wi,w.EMPTY_SPACE=ur,w.ENV_MAP=we,w.INTERNAL_ERRORS=hl,w.LimitedSet=kh,w.MemoryStore=U3,w.ONE_THOUSAND=uh,w.REACT_NATIVE_PRODUCT=ec,w.RELAYER_DEFAULT_PROTOCOL=tl,w.SDK_ERRORS=dl,w.SDK_TYPE=nc,w.SLASH=tc,w.TYPE_0=ws,w.TYPE_1=wn,w.TYPE_2=er,w.UTF8=pn,w.addResourceToRecap=af,w.addSignatureToExtrinsic=Vl,w.appendToQueryString=rc,w.assertType=yh,w.assignAbilityToActions=To,w.base64Decode=sf,w.base64Encode=of,w.buildApprovedNamespaces=i3,w.buildAuthObject=cb,w.buildNamespacesFromAuth=o3,w.buildRecapStatement=uf,w.buildSignedExtrinsicHash=K3,w.calcExpiry=Oh,w.capitalize=Ah,w.capitalizeWord=uc,w.createDelayedPromise=Bh,w.createEncodedRecap=lb,w.createExpiringPromise=Sh,w.createRecap=cf,w.decodeRecap=Ot,w.decodeTypeByte=Jt,w.decodeTypeTwoEnvelope=km,w.decrypt=Pm,w.deriveExtrinsicHash=ql,w.deriveSymKey=Nm,w.deserialize=Gr,w.encodeRecap=Pr,w.encodeTypeByte=ms,w.encodeTypeTwoEnvelope=Lm,w.encrypt=Fm,w.engineEvent=Th,w.enumify=Dh,w.extractSolanaTransactionId=Gg,w.formatAccountId=Os,w.formatAccountWithChain=Ql,w.formatChainId=Us,w.formatDeeplinkUrl=lc,w.formatExpirerTarget=mi,w.formatIdTarget=Ih,w.formatMessage=ef,w.formatMessageContext=mh,w.formatRelayParams=il,w.formatRelayRpcUrl=ph,w.formatStatementFromRecap=$o,w.formatTopicTarget=_h,w.formatUA=cc,w.formatUri=Zm,w.fromBase64=xi,w.generateKeyPair=Cm,w.generateRandomBytes32=Tm,w.getAccountsChains=Qt,w.getAccountsFromNamespaces=td,w.getAddressFromAccount=Cs,w.getAddressesFromAccounts=ed,w.getAlgorandTransactionId=Jg,w.getAppId=hh,w.getAppMetadata=ic,w.getBrowserOnlineStatus=Al,w.getChainFromAccount=Ts,w.getChainsFromAccounts=Ns,w.getChainsFromNamespace=ar,w.getChainsFromNamespaces=nd,w.getChainsFromRecap=gb,w.getChainsFromRequiredNamespaces=rd,w.getCommonValuesInArrays=Ei,w.getCryptoKeyFromKeyData=el,w.getDecodedRecapFromResources=tf,w.getDeepLink=$h,w.getDidAddress=Co,w.getDidAddressSegments=Fr,w.getDidChainId=Ja,w.getEnvironment=Vt,w.getHttpUrl=wh,w.getInternalError=at,w.getJavascriptID=sc,w.getJavascriptOS=oc,w.getLastItems=fc,w.getLinkModeURL=Gm,w.getMethodsFromRecap=hb,w.getNamespacedDidChainId=Qa,w.getNamespacesChains=cl,w.getNamespacesEventsForChainId=fl,w.getNamespacesFromAccounts=ll,w.getNamespacesMethodsForChainId=al,w.getNearTransactionIdFromSignedTransaction=Xg,w.getNearUint8ArrayFromBytes=Za,w.getNodeOnlineStatus=Sl,w.getReCapActions=rf,w.getReactNativeOnlineStatus=Bl,w.getRecapAbilitiesFromResource=ub,w.getRecapFromResources=Lr,w.getRecapResource=nf,w.getRelayClientMetadata=bh,w.getRelayProtocolApi=Km,w.getRelayProtocolName=qm,w.getRequiredNamespacesFromNamespaces=r3,w.getSdkError=en,w.getSearchParamFromURL=Rh,w.getSignDirectHash=Qg,w.getSuiDigest=Yg,w.getUniqueValues=oi,w.handleDeeplinkRedirect=Nh,w.hasOverlap=lt,w.hashEthereumMessage=Io,w.hashKey=$m,w.hashMessage=Rm,w.isAndroid=lh,w.isAppVisible=I3,w.isBrowser=on,w.isCaipNamespace=xs,w.isConformingNamespaces=vl,w.isExpired=Ch,w.isIframe=gc,w.isIos=dh,w.isNode=yi,w.isOnline=S3,w.isProposalStruct=f3,w.isReactNative=ut,w.isRecap=No,w.isSessionCompatible=c3,w.isSessionStruct=u3,w.isTelegram=hc,w.isTestRun=Ph,w.isTypeOneEnvelope=zm,w.isTypeTwoEnvelope=Hm,w.isUndefined=$t,w.isValidAccountId=gl,w.isValidAccounts=wl,w.isValidActions=ml,w.isValidArray=rr,w.isValidChainId=ir,w.isValidChains=bl,w.isValidController=l3,w.isValidEip1271Signature=Wa,w.isValidEip191Signature=Ka,w.isValidErrorReason=p3,w.isValidEvent=m3,w.isValidId=g3,w.isValidNamespaceAccounts=yl,w.isValidNamespaceActions=Ds,w.isValidNamespaceChains=pl,w.isValidNamespaceMethodsOrEvents=vs,w.isValidNamespaces=El,w.isValidNamespacesChainId=E3,w.isValidNamespacesEvent=v3,w.isValidNamespacesRequest=x3,w.isValidNumber=Xr,w.isValidObject=Yr,w.isValidParams=b3,w.isValidRecap=Ge,w.isValidRelay=xl,w.isValidRelays=h3,w.isValidRequest=w3,w.isValidRequestExpiry=B3,w.isValidRequiredNamespaces=d3,w.isValidResponse=y3,w.isValidString=Te,w.isValidUrl=a3,w.mapEntries=vh,w.mapToObj=Eh,w.mergeArrays=Ne,w.mergeEncodedRecaps=db,w.mergeRecaps=ff,w.mergeRequiredAndOptionalNamespaces=s3,w.normalizeNamespaces=nr,w.objToMap=xh,w.openDeeplink=dc,w.parseAccountId=ii,w.parseChainId=ri,w.parseContextNames=ac,w.parseExpirerTarget=Uh,w.parseNamespaceKey=ul,w.parseRelayParams=nl,w.parseTopic=rl,w.parseUri=Wm,w.populateAppMetadata=gh,w.populateAuthPayload=ab,w.recapHasResource=fb,w.serialize=Es,w.sleep=Lh,w.ss58AddressToPublicKey=jl,w.subscribeToBrowserNetworkChange=_l,w.subscribeToNetworkChange=_3,w.subscribeToReactNativeNetworkChange=Il,w.toBase64=bc,w.uuidv4=Fh,w.validateDecoding=Mm,w.validateEncoding=Qu,w.validateSignedCacao=sb,w.verifyP256Jwt=jm,w.verifySignature=qa,Object.defineProperty(w,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
